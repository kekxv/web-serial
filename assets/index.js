(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();var lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jd={exports:{}},ic={};var om;function Ry(){if(om)return ic;om=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(l,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:t,type:l,key:f,ref:o!==void 0?o:null,props:d}}return ic.Fragment=s,ic.jsx=n,ic.jsxs=n,ic}var cm;function Ny(){return cm||(cm=1,Jd.exports=Ry()),Jd.exports}var R=Ny(),ef={exports:{}},We={};var hm;function By(){if(hm)return We;hm=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function N(C){return C===null||typeof C!="object"?null:(C=E&&C[E]||C["@@iterator"],typeof C=="function"?C:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,y={};function O(C,V,_e){this.props=C,this.context=V,this.refs=y,this.updater=_e||D}O.prototype.isReactComponent={},O.prototype.setState=function(C,V){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,V,"setState")},O.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function k(){}k.prototype=O.prototype;function A(C,V,_e){this.props=C,this.context=V,this.refs=y,this.updater=_e||D}var j=A.prototype=new k;j.constructor=A,H(j,O.prototype),j.isPureReactComponent=!0;var I=Array.isArray;function U(){}var G={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function re(C,V,_e){var le=_e.ref;return{$$typeof:t,type:C,key:V,ref:le!==void 0?le:null,props:_e}}function de(C,V){return re(C.type,V,C.props)}function pe(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function ie(C){var V={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(_e){return V[_e]})}var Y=/\/+/g;function fe(C,V){return typeof C=="object"&&C!==null&&C.key!=null?ie(""+C.key):V.toString(36)}function me(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(U,U):(C.status="pending",C.then(function(V){C.status==="pending"&&(C.status="fulfilled",C.value=V)},function(V){C.status==="pending"&&(C.status="rejected",C.reason=V)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function L(C,V,_e,le,we){var ye=typeof C;(ye==="undefined"||ye==="boolean")&&(C=null);var oe=!1;if(C===null)oe=!0;else switch(ye){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(C.$$typeof){case t:case s:oe=!0;break;case T:return oe=C._init,L(oe(C._payload),V,_e,le,we)}}if(oe)return we=we(C),oe=le===""?"."+fe(C,0):le,I(we)?(_e="",oe!=null&&(_e=oe.replace(Y,"$&/")+"/"),L(we,V,_e,"",function(De){return De})):we!=null&&(pe(we)&&(we=de(we,_e+(we.key==null||C&&C.key===we.key?"":(""+we.key).replace(Y,"$&/")+"/")+oe)),V.push(we)),1;oe=0;var ce=le===""?".":le+":";if(I(C))for(var W=0;W<C.length;W++)le=C[W],ye=ce+fe(le,W),oe+=L(le,V,_e,ye,we);else if(W=N(C),typeof W=="function")for(C=W.call(C),W=0;!(le=C.next()).done;)le=le.value,ye=ce+fe(le,W++),oe+=L(le,V,_e,ye,we);else if(ye==="object"){if(typeof C.then=="function")return L(me(C),V,_e,le,we);throw V=String(C),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return oe}function J(C,V,_e){if(C==null)return C;var le=[],we=0;return L(C,le,"","",function(ye){return V.call(_e,ye,we++)}),le}function X(C){if(C._status===-1){var V=C._result;V=V(),V.then(function(_e){(C._status===0||C._status===-1)&&(C._status=1,C._result=_e)},function(_e){(C._status===0||C._status===-1)&&(C._status=2,C._result=_e)}),C._status===-1&&(C._status=0,C._result=V)}if(C._status===1)return C._result.default;throw C._result}var Se=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Te={map:J,forEach:function(C,V,_e){J(C,function(){V.apply(this,arguments)},_e)},count:function(C){var V=0;return J(C,function(){V++}),V},toArray:function(C){return J(C,function(V){return V})||[]},only:function(C){if(!pe(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return We.Activity=x,We.Children=Te,We.Component=O,We.Fragment=n,We.Profiler=o,We.PureComponent=A,We.StrictMode=l,We.Suspense=v,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,We.__COMPILER_RUNTIME={__proto__:null,c:function(C){return G.H.useMemoCache(C)}},We.cache=function(C){return function(){return C.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(C,V,_e){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var le=H({},C.props),we=C.key;if(V!=null)for(ye in V.key!==void 0&&(we=""+V.key),V)!P.call(V,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&V.ref===void 0||(le[ye]=V[ye]);var ye=arguments.length-2;if(ye===1)le.children=_e;else if(1<ye){for(var oe=Array(ye),ce=0;ce<ye;ce++)oe[ce]=arguments[ce+2];le.children=oe}return re(C.type,we,le)},We.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},We.createElement=function(C,V,_e){var le,we={},ye=null;if(V!=null)for(le in V.key!==void 0&&(ye=""+V.key),V)P.call(V,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(we[le]=V[le]);var oe=arguments.length-2;if(oe===1)we.children=_e;else if(1<oe){for(var ce=Array(oe),W=0;W<oe;W++)ce[W]=arguments[W+2];we.children=ce}if(C&&C.defaultProps)for(le in oe=C.defaultProps,oe)we[le]===void 0&&(we[le]=oe[le]);return re(C,ye,we)},We.createRef=function(){return{current:null}},We.forwardRef=function(C){return{$$typeof:p,render:C}},We.isValidElement=pe,We.lazy=function(C){return{$$typeof:T,_payload:{_status:-1,_result:C},_init:X}},We.memo=function(C,V){return{$$typeof:_,type:C,compare:V===void 0?null:V}},We.startTransition=function(C){var V=G.T,_e={};G.T=_e;try{var le=C(),we=G.S;we!==null&&we(_e,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(U,Se)}catch(ye){Se(ye)}finally{V!==null&&_e.types!==null&&(V.types=_e.types),G.T=V}},We.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},We.use=function(C){return G.H.use(C)},We.useActionState=function(C,V,_e){return G.H.useActionState(C,V,_e)},We.useCallback=function(C,V){return G.H.useCallback(C,V)},We.useContext=function(C){return G.H.useContext(C)},We.useDebugValue=function(){},We.useDeferredValue=function(C,V){return G.H.useDeferredValue(C,V)},We.useEffect=function(C,V){return G.H.useEffect(C,V)},We.useEffectEvent=function(C){return G.H.useEffectEvent(C)},We.useId=function(){return G.H.useId()},We.useImperativeHandle=function(C,V,_e){return G.H.useImperativeHandle(C,V,_e)},We.useInsertionEffect=function(C,V){return G.H.useInsertionEffect(C,V)},We.useLayoutEffect=function(C,V){return G.H.useLayoutEffect(C,V)},We.useMemo=function(C,V){return G.H.useMemo(C,V)},We.useOptimistic=function(C,V){return G.H.useOptimistic(C,V)},We.useReducer=function(C,V,_e){return G.H.useReducer(C,V,_e)},We.useRef=function(C){return G.H.useRef(C)},We.useState=function(C){return G.H.useState(C)},We.useSyncExternalStore=function(C,V,_e){return G.H.useSyncExternalStore(C,V,_e)},We.useTransition=function(){return G.H.useTransition()},We.version="19.2.3",We}var um;function gu(){return um||(um=1,ef.exports=By()),ef.exports}var Fe=gu(),tf={exports:{}},sc={},sf={exports:{}},rf={};var dm;function Ly(){return dm||(dm=1,(function(t){function s(L,J){var X=L.length;L.push(J);e:for(;0<X;){var Se=X-1>>>1,Te=L[Se];if(0<o(Te,J))L[Se]=J,L[X]=Te,X=Se;else break e}}function n(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var J=L[0],X=L.pop();if(X!==J){L[0]=X;e:for(var Se=0,Te=L.length,C=Te>>>1;Se<C;){var V=2*(Se+1)-1,_e=L[V],le=V+1,we=L[le];if(0>o(_e,X))le<Te&&0>o(we,_e)?(L[Se]=we,L[le]=X,Se=le):(L[Se]=_e,L[V]=X,Se=V);else if(le<Te&&0>o(we,X))L[Se]=we,L[le]=X,Se=le;else break e}}return J}function o(L,J){var X=L.sortIndex-J.sortIndex;return X!==0?X:L.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var v=[],_=[],T=1,x=null,E=3,N=!1,D=!1,H=!1,y=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function j(L){for(var J=n(_);J!==null;){if(J.callback===null)l(_);else if(J.startTime<=L)l(_),J.sortIndex=J.expirationTime,s(v,J);else break;J=n(_)}}function I(L){if(H=!1,j(L),!D)if(n(v)!==null)D=!0,U||(U=!0,ie());else{var J=n(_);J!==null&&me(I,J.startTime-L)}}var U=!1,G=-1,P=5,re=-1;function de(){return y?!0:!(t.unstable_now()-re<P)}function pe(){if(y=!1,U){var L=t.unstable_now();re=L;var J=!0;try{e:{D=!1,H&&(H=!1,k(G),G=-1),N=!0;var X=E;try{t:{for(j(L),x=n(v);x!==null&&!(x.expirationTime>L&&de());){var Se=x.callback;if(typeof Se=="function"){x.callback=null,E=x.priorityLevel;var Te=Se(x.expirationTime<=L);if(L=t.unstable_now(),typeof Te=="function"){x.callback=Te,j(L),J=!0;break t}x===n(v)&&l(v),j(L)}else l(v);x=n(v)}if(x!==null)J=!0;else{var C=n(_);C!==null&&me(I,C.startTime-L),J=!1}}break e}finally{x=null,E=X,N=!1}J=void 0}}finally{J?ie():U=!1}}}var ie;if(typeof A=="function")ie=function(){A(pe)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,fe=Y.port2;Y.port1.onmessage=pe,ie=function(){fe.postMessage(null)}}else ie=function(){O(pe,0)};function me(L,J){G=O(function(){L(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(L){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var X=E;E=J;try{return L()}finally{E=X}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(L,J){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var X=E;E=L;try{return J()}finally{E=X}},t.unstable_scheduleCallback=function(L,J,X){var Se=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Se+X:Se):X=Se,L){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=X+Te,L={id:T++,callback:J,priorityLevel:L,startTime:X,expirationTime:Te,sortIndex:-1},X>Se?(L.sortIndex=X,s(_,L),n(v)===null&&L===n(_)&&(H?(k(G),G=-1):H=!0,me(I,X-Se))):(L.sortIndex=Te,s(v,L),D||N||(D=!0,U||(U=!0,ie()))),L},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(L){var J=E;return function(){var X=E;E=J;try{return L.apply(this,arguments)}finally{E=X}}}})(rf)),rf}var fm;function zy(){return fm||(fm=1,sf.exports=Ly()),sf.exports}var nf={exports:{}},$i={};var _m;function Hy(){if(_m)return $i;_m=1;var t=gu();function s(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(s(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,_,T){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:v,containerInfo:_,implementation:T}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,$i.createPortal=function(v,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(s(299));return d(v,_,null,T)},$i.flushSync=function(v){var _=f.T,T=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=_,l.p=T,l.d.f()}},$i.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,l.d.C(v,_))},$i.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},$i.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var T=_.as,x=p(T,_.crossOrigin),E=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?l.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:N}):T==="script"&&l.d.X(v,{crossOrigin:x,integrity:E,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$i.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=p(_.as,_.crossOrigin);l.d.M(v,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&l.d.M(v)},$i.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,x=p(T,_.crossOrigin);l.d.L(v,T,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$i.preloadModule=function(v,_){if(typeof v=="string")if(_){var T=p(_.as,_.crossOrigin);l.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else l.d.m(v)},$i.requestFormReset=function(v){l.d.r(v)},$i.unstable_batchedUpdates=function(v,_){return v(_)},$i.useFormState=function(v,_,T){return f.H.useFormState(v,_,T)},$i.useFormStatus=function(){return f.H.useHostTransitionStatus()},$i.version="19.2.3",$i}var pm;function Uy(){if(pm)return nf.exports;pm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),nf.exports=Hy(),nf.exports}var gm;function jy(){if(gm)return sc;gm=1;var t=zy(),s=gu(),n=Uy();function l(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(l(188))}function _(e){var i=e.alternate;if(!i){if(i=d(e),i===null)throw Error(l(188));return i!==e?null:e}for(var r=e,a=i;;){var c=r.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===r)return v(c),e;if(u===a)return v(c),i;u=u.sibling}throw Error(l(188))}if(r.return!==a.return)r=c,a=u;else{for(var m=!1,S=c.child;S;){if(S===r){m=!0,r=c,a=u;break}if(S===a){m=!0,a=c,r=u;break}S=S.sibling}if(!m){for(S=u.child;S;){if(S===r){m=!0,r=u,a=c;break}if(S===a){m=!0,a=u,r=c;break}S=S.sibling}if(!m)throw Error(l(189))}}if(r.alternate!==a)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?e:i}function T(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=T(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),A=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=pe&&e[pe]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Y?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case O:return"Profiler";case y:return"StrictMode";case I:return"Suspense";case U:return"SuspenseList";case re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case A:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case j:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return i=e.displayName||null,i!==null?i:fe(e.type)||"Memo";case P:i=e._payload,e=e._init;try{return fe(e(i))}catch{}}return null}var me=Array.isArray,L=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Se=[],Te=-1;function C(e){return{current:e}}function V(e){0>Te||(e.current=Se[Te],Se[Te]=null,Te--)}function _e(e,i){Te++,Se[Te]=e.current,e.current=i}var le=C(null),we=C(null),ye=C(null),oe=C(null);function ce(e,i){switch(_e(ye,i),_e(we,e),_e(le,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Mg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Mg(i),e=Og(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(le),_e(le,e)}function W(){V(le),V(we),V(ye)}function De(e){e.memoizedState!==null&&_e(oe,e);var i=le.current,r=Og(i,e.type);i!==r&&(_e(we,e),_e(le,r))}function ze(e){we.current===e&&(V(le),V(we)),oe.current===e&&(V(oe),Qo._currentValue=X)}var ot,Ye;function Kt(e){if(ot===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);ot=i&&i[1]||"",Ye=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+e+Ye}var gr=!1;function cs(e,i){if(!e||gr)return"";gr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var $=Q}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(Q){$=Q}e.call(ne.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),m=u[0],S=u[1];if(m&&S){var M=m.split(`
`),K=S.split(`
`);for(c=a=0;a<M.length&&!M[a].includes("DetermineComponentFrameRoot");)a++;for(;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;if(a===M.length||c===K.length)for(a=M.length-1,c=K.length-1;1<=a&&0<=c&&M[a]!==K[c];)c--;for(;1<=a&&0<=c;a--,c--)if(M[a]!==K[c]){if(a!==1||c!==1)do if(a--,c--,0>c||M[a]!==K[c]){var te=`
`+M[a].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=a&&0<=c);break}}}finally{gr=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Kt(r):""}function xs(e,i){switch(e.tag){case 26:case 27:case 5:return Kt(e.type);case 16:return Kt("Lazy");case 13:return e.child!==i&&i!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return cs(e.type,!1);case 11:return cs(e.type.render,!1);case 1:return cs(e.type,!0);case 31:return Kt("Activity");default:return""}}function yt(e){try{var i="",r=null;do i+=xs(e,r),r=e,e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ue=Object.prototype.hasOwnProperty,He=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,hi=t.unstable_shouldYield,Es=t.unstable_requestPaint,Ct=t.unstable_now,ti=t.unstable_getCurrentPriorityLevel,It=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,mr=t.unstable_NormalPriority,vr=t.unstable_LowPriority,br=t.unstable_IdlePriority,yr=t.log,Sr=t.unstable_setDisableYieldValue,Hs=null,ge=null;function $e(e){if(typeof yr=="function"&&Sr(e),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(Hs,e)}catch{}}var Re=Math.clz32?Math.clz32:ui,Ge=Math.log,Nt=Math.LN2;function ui(e){return e>>>=0,e===0?32:31-(Ge(e)/Nt|0)|0}var qi=256,Us=262144,As=4194304;function di(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bi(e,i,r){var a=e.pendingLanes;if(a===0)return 0;var c=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var S=a&134217727;return S!==0?(a=S&~u,a!==0?c=di(a):(m&=S,m!==0?c=di(m):r||(r=S&~e,r!==0&&(c=di(r))))):(S=a&~u,S!==0?c=di(S):m!==0?c=di(m):r||(r=a&~e,r!==0&&(c=di(r)))),c===0?0:i!==0&&i!==c&&(i&u)===0&&(u=c&-c,r=i&-i,u>=r||u===32&&(r&4194048)!==0)?i:c}function Bi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Kr(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var e=As;return As<<=1,(As&62914560)===0&&(As=4194304),e}function tr(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function Wr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function js(e,i,r,a,c,u){var m=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var S=e.entanglements,M=e.expirationTimes,K=e.hiddenUpdates;for(r=m&~r;0<r;){var te=31-Re(r),ne=1<<te;S[te]=0,M[te]=-1;var $=K[te];if($!==null)for(K[te]=null,te=0;te<$.length;te++){var Q=$[te];Q!==null&&(Q.lane&=-536870913)}r&=~ne}a!==0&&Ts(e,a,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~i))}function Ts(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var a=31-Re(i);e.entangledLanes|=i,e.entanglements[a]=e.entanglements[a]|1073741824|r&261930}function _a(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var a=31-Re(r),c=1<<a;c&i|e[a]&i&&(e[a]|=i),r&=~c}}function hs(e,i){var r=i&-i;return r=(r&42)!==0?1:ir(r),(r&(e.suspendedLanes|i))!==0?0:r}function ir(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pa(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:em(e.type))}function Yr(e,i){var r=J.p;try{return J.p=e,i()}finally{J.p=r}}var Vi=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Vi,Pi="__reactProps$"+Vi,wr="__reactContainer$"+Vi,Pl="__reactEvents$"+Vi,wu="__reactListeners$"+Vi,Cn="__reactHandles$"+Vi,Si="__reactResources$"+Vi,fi="__reactMarker$"+Vi;function Li(e){delete e[Wt],delete e[Pi],delete e[Pl],delete e[wu],delete e[Cn]}function Yt(e){var i=e[Wt];if(i)return i;for(var r=e.parentNode;r;){if(i=r[wr]||r[Wt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=Ug(e);e!==null;){if(r=e[Wt])return r;e=Ug(e)}return i}e=r,r=e.parentNode}return null}function sr(e){if(e=e[Wt]||e[wr]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Fs(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(l(33))}function us(e){var i=e[Si];return i||(i=e[Si]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(e){e[fi]=!0}var Zl=new Set,Qa={};function ds(e,i){$r(e,i),$r(e+"Capture",i)}function $r(e,i){for(Qa[e]=i,e=0;e<i.length;e++)Zl.add(i[e])}var Kl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},Wl={};function Ec(e){return ue.call(Wl,e)?!0:ue.call(Ja,e)?!1:Kl.test(e)?Wl[e]=!0:(Ja[e]=!0,!1)}function ga(e,i,r){if(Ec(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var a=i.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function ma(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function Is(e,i,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+a)}}function Gi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yl(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ac(e,i,r){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,u=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return c.call(this)},set:function(m){r=""+m,u.call(this,m)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(m){r=""+m},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function el(e){if(!e._valueTracker){var i=Yl(e)?"checked":"value";e._valueTracker=Ac(e,i,""+e[i])}}function $l(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),a="";return e&&(a=Yl(e)?e.checked?"true":"false":e.value),e=a,e!==r?(i.setValue(e),!0):!1}function Qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ji=/[\n"\\]/g;function ii(e){return e.replace(Ji,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zi(e,i,r,a,c,u,m,S){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),i!=null?m==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Gi(i)):e.value!==""+Gi(i)&&(e.value=""+Gi(i)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),i!=null?va(e,m,Gi(i)):r!=null?va(e,m,Gi(r)):a!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Gi(S):e.removeAttribute("name")}function tl(e,i,r,a,c,u,m,S){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),i!=null||r!=null){if(!(u!=="submit"&&u!=="reset"||i!=null)){el(e);return}r=r!=null?""+Gi(r):"",i=i!=null?""+Gi(i):r,S||i===e.value||(e.value=i),e.defaultValue=i}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=S?e.checked:!!a,e.defaultChecked=!!a,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),el(e)}function va(e,i,r){i==="number"&&Qi(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function zi(e,i,r,a){if(e=e.options,i){i={};for(var c=0;c<r.length;c++)i["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=i.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Gi(r),i=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}i!==null||e[c].disabled||(i=e[c])}i!==null&&(i.selected=!0)}}function Cr(e,i,r){if(i!=null&&(i=""+Gi(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+Gi(r):""}function ba(e,i,r,a){if(i==null){if(a!=null){if(r!=null)throw Error(l(92));if(me(a)){if(1<a.length)throw Error(l(93));a=a[0]}r=a}r==null&&(r=""),i=r}r=Gi(i),e.defaultValue=r,a=e.textContent,a===r&&a!==""&&a!==null&&(e.value=a),el(e)}function ks(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var Xl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(e,i,r){var a=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?a?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":a?e.setProperty(i,r):typeof r!="number"||r===0||Xl.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function Xr(e,i,r){if(i!=null&&typeof i!="object")throw Error(l(62));if(e=e.style,r!=null){for(var a in r)!r.hasOwnProperty(a)||i!=null&&i.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var c in i)a=i[c],i.hasOwnProperty(c)&&r[c]!==a&&Vl(e,c,a)}else for(var u in i)i.hasOwnProperty(u)&&Vl(e,u,i[u])}function ya(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(e){return rr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wi(){}var xn=null;function sl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qs=null,xr=null;function En(e){var i=sr(e);if(i&&(e=i.stateNode)){var r=e[Pi]||null;e:switch(e=i.stateNode,i.type){case"input":if(Zi(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ii(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var a=r[i];if(a!==e&&a.form===e.form){var c=a[Pi]||null;if(!c)throw Error(l(90));Zi(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(i=0;i<r.length;i++)a=r[i],a.form===e.form&&$l(a)}break e;case"textarea":Cr(e,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&zi(e,!!r.multiple,i,!1)}}}var rl=!1;function Gl(e,i,r){if(rl)return e(i,r);rl=!0;try{var a=e(i);return a}finally{if(rl=!1,(qs!==null||xr!==null)&&(kh(),qs&&(i=qs,e=xr,xr=qs=null,En(i),e)))for(i=0;i<e.length;i++)En(e[i])}}function An(e,i){var r=e.stateNode;if(r===null)return null;var a=r[Pi]||null;if(a===null)return null;r=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(l(231,i,typeof r));return r}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=!1;if(Ki)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Ql=!1}var Ps=null,kn=null,Dn=null;function kc(){if(Dn)return Dn;var e,i=kn,r=i.length,a,c="value"in Ps?Ps.value:Ps.textContent,u=c.length;for(e=0;e<r&&i[e]===c[e];e++);var m=r-e;for(a=1;a<=m&&i[r-a]===c[u-a];a++);return Dn=c.slice(e,1<a?1-a:void 0)}function Vr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function nl(){return!0}function Jl(){return!1}function Ci(e){function i(r,a,c,u,m){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(r=e[S],this[S]=r?r(u):u[S]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?nl:Jl,this.isPropagationStopped=Jl,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),i}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=Ci(nr),On=x({},nr,{view:0,detail:0}),Sa=Ci(On),wa,al,Rn,ar=x({},On,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(wa=e.screenX-Rn.screenX,al=e.screenY-Rn.screenY):al=wa=0,Rn=e),wa)},movementY:function(e){return"movementY"in e?e.movementY:al}}),Dc=Ci(ar),Mc=x({},ar,{dataTransfer:0}),Oc=Ci(Mc),Rc=x({},On,{relatedTarget:0}),ll=Ci(Rc),Nc=x({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=Ci(Nc),Bc=x({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cu=Ci(Bc),xu=x({},nr,{data:0}),to=Ci(xu),Lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ol={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Eu[e])?!!i[e]:!1}function Ca(){return Au}var zc=x({},On,{key:function(e){if(e.key){var i=Lc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Vr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ol[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?Vr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hc=Ci(zc),Gr=x({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Ci(Gr),Tu=x({},On,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),Uc=Ci(Tu),ku=x({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Du=Ci(ku),Mu=x({},ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ou=Ci(Mu),jc=x({},nr,{newState:0,oldState:0}),Fc=Ci(jc),Ru=[9,13,27,32],Er=Ki&&"CompositionEvent"in window,Ds=null;Ki&&"documentMode"in document&&(Ds=document.documentMode);var Nu=Ki&&"TextEvent"in window&&!Ds,xa=Ki&&(!Er||Ds&&8<Ds&&11>=Ds),Ic=" ",qc=!1;function Pc(e,i){switch(e){case"keyup":return Ru.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nn=!1;function Bu(e,i){switch(e){case"compositionend":return Zc(i);case"keypress":return i.which!==32?null:(qc=!0,Ic);case"textInput":return e=i.data,e===Ic&&qc?null:e;default:return null}}function Lu(e,i){if(Nn)return e==="compositionend"||!Er&&Pc(e,i)?(e=kc(),Dn=kn=Ps=null,Nn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return xa&&i.locale!=="ko"?null:i.data;default:return null}}var zu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fs(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!zu[e.type]:i==="textarea"}function io(e,i,r,a){qs?xr?xr.push(a):xr=[a]:qs=a,i=Lh(i,"onChange"),0<i.length&&(r=new Mn("onChange","change",null,r,a),e.push({event:r,listeners:i}))}var Bn=null,Ln=null;function Hu(e){xg(e,0)}function hl(e){var i=Fs(e);if($l(i))return e}function so(e,i){if(e==="change")return i}var Ea=!1;if(Ki){var ro;if(Ki){var no="oninput"in document;if(!no){var ao=document.createElement("div");ao.setAttribute("oninput","return;"),no=typeof ao.oninput=="function"}ro=no}else ro=!1;Ea=ro&&(!document.documentMode||9<document.documentMode)}function Kc(){Bn&&(Bn.detachEvent("onpropertychange",Wc),Ln=Bn=null)}function Wc(e){if(e.propertyName==="value"&&hl(Ln)){var i=[];io(i,Ln,e,sl(e)),Gl(Hu,i)}}function Yc(e,i,r){e==="focusin"?(Kc(),Bn=i,Ln=r,Bn.attachEvent("onpropertychange",Wc)):e==="focusout"&&Kc()}function $c(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hl(Ln)}function Xc(e,i){if(e==="click")return hl(i)}function ul(e,i){if(e==="input"||e==="change")return hl(i)}function Vc(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Hi=typeof Object.is=="function"?Object.is:Vc;function xi(e,i){if(Hi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),a=Object.keys(i);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!ue.call(i,c)||!Hi(e[c],i[c]))return!1}return!0}function Gc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,i){var r=Gc(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=i&&a>=i)return{node:r,offset:i-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gc(r)}}function lo(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?lo(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function oo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Qi(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=Qi(e.document)}return i}function co(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Uu=Ki&&"documentMode"in document&&11>=document.documentMode,zn=null,ho=null,Aa=null,uo=!1;function fo(e,i,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uo||zn==null||zn!==Qi(a)||(a=zn,"selectionStart"in a&&co(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Aa&&xi(Aa,a)||(Aa=a,a=Lh(ho,"onSelect"),0<a.length&&(i=new Mn("onSelect","select",null,i,r),e.push({event:i,listeners:a}),i.target=zn)))}function Ar(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var Tr={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},_o={},Jc={};Ki&&(Jc=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function es(e){if(_o[e])return _o[e];if(!Tr[e])return e;var i=Tr[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in Jc)return _o[e]=i[r];return e}var Zs=es("animationend"),po=es("animationiteration"),eh=es("animationstart"),th=es("transitionrun"),ih=es("transitionstart"),sh=es("transitioncancel"),go=es("transitionend"),rh=new Map,mo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mo.push("scrollEnd");function Ms(e,i){rh.set(e,i),ds(i,[e])}var Ta=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ts=[],Hn=0,vo=0;function dl(){for(var e=Hn,i=vo=Hn=0;i<e;){var r=ts[i];ts[i++]=null;var a=ts[i];ts[i++]=null;var c=ts[i];ts[i++]=null;var u=ts[i];if(ts[i++]=null,a!==null&&c!==null){var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}u!==0&&yo(r,c,u)}}function fl(e,i,r,a){ts[Hn++]=e,ts[Hn++]=i,ts[Hn++]=r,ts[Hn++]=a,vo|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function bo(e,i,r,a){return fl(e,i,r,a),_l(e)}function Ui(e,i){return fl(e,null,null,i),_l(e)}function yo(e,i,r){e.lanes|=r;var a=e.alternate;a!==null&&(a.lanes|=r);for(var c=!1,u=e.return;u!==null;)u.childLanes|=r,a=u.alternate,a!==null&&(a.childLanes|=r),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&i!==null&&(c=31-Re(r),e=u.hiddenUpdates,a=e[c],a===null?e[c]=[i]:a.push(i),i.lane=r|536870912),u):null}function _l(e){if(50<Ko)throw Ko=0,Cd=null,Error(l(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Un={};function ju(e,i,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(e,i,r,a){return new ju(e,i,r,a)}function So(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lr(e,i){var r=e.alternate;return r===null?(r=is(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function nh(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function pl(e,i,r,a,c,u){var m=0;if(a=e,typeof e=="function")So(e)&&(m=1);else if(typeof e=="string")m=yy(e,r,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case re:return e=is(31,r,i,c),e.elementType=re,e.lanes=u,e;case H:return or(r.children,c,u,i);case y:m=8,c|=24;break;case O:return e=is(12,r,i,c|2),e.elementType=O,e.lanes=u,e;case I:return e=is(13,r,i,c),e.elementType=I,e.lanes=u,e;case U:return e=is(19,r,i,c),e.elementType=U,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:m=10;break e;case k:m=9;break e;case j:m=11;break e;case G:m=14;break e;case P:m=16,a=null;break e}m=29,r=Error(l(130,e===null?"null":typeof e,"")),a=null}return i=is(m,r,i,c),i.elementType=e,i.type=a,i.lanes=u,i}function or(e,i,r,a){return e=is(7,e,a,i),e.lanes=r,e}function jn(e,i,r){return e=is(6,e,null,i),e.lanes=r,e}function ah(e){var i=is(18,null,null,0);return i.stateNode=e,i}function gl(e,i,r){return i=is(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var wo=new WeakMap;function Ei(e,i){if(typeof e=="object"&&e!==null){var r=wo.get(e);return r!==void 0?r:(i={value:e,source:i,stack:yt(i)},wo.set(e,i),i)}return{value:e,source:i,stack:yt(i)}}var kr=[],Dr=0,ml=null,ka=0,_s=[],si=0,Mr=null,Ks=1,Ws="";function cr(e,i){kr[Dr++]=ka,kr[Dr++]=ml,ml=e,ka=i}function Da(e,i,r){_s[si++]=Ks,_s[si++]=Ws,_s[si++]=Mr,Mr=e;var a=Ks;e=Ws;var c=32-Re(a)-1;a&=~(1<<c),r+=1;var u=32-Re(i)+c;if(30<u){var m=c-c%5;u=(a&(1<<m)-1).toString(32),a>>=m,c-=m,Ks=1<<32-Re(i)+c|r<<c|a,Ws=u+e}else Ks=1<<u|r<<c|a,Ws=e}function Ma(e){e.return!==null&&(cr(e,1),Da(e,1,0))}function Co(e){for(;e===ml;)ml=kr[--Dr],kr[Dr]=null,ka=kr[--Dr],kr[Dr]=null;for(;e===Mr;)Mr=_s[--si],_s[si]=null,Ws=_s[--si],_s[si]=null,Ks=_s[--si],_s[si]=null}function xo(e,i){_s[si++]=Ks,_s[si++]=Ws,_s[si++]=Mr,Ks=i.id,Ws=i.overflow,Mr=e}var _i=null,dt=null,Qe=!1,hr=null,ps=!1,Eo=Error(l(519));function Or(e){var i=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oa(Ei(i,e)),Eo}function Fn(e){var i=e.stateNode,r=e.type,a=e.memoizedProps;switch(i[Wt]=e,i[Pi]=a,r){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(r=0;r<Yo.length;r++)st(Yo[r],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":st("invalid",i),tl(i,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":st("invalid",i);break;case"textarea":st("invalid",i),ba(i,a.value,a.defaultValue,a.children)}r=a.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||a.suppressHydrationWarning===!0||kg(i.textContent,r)?(a.popover!=null&&(st("beforetoggle",i),st("toggle",i)),a.onScroll!=null&&st("scroll",i),a.onScrollEnd!=null&&st("scrollend",i),a.onClick!=null&&(i.onclick=wi),i=!0):i=!1,i||Or(e,!0)}function Rr(e){for(_i=e.return;_i;)switch(_i.tag){case 5:case 31:case 13:ps=!1;return;case 27:case 3:ps=!0;return;default:_i=_i.return}}function In(e){if(e!==_i)return!1;if(!Qe)return Rr(e),Qe=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Ud(e.type,e.memoizedProps)),r=!r),r&&dt&&Or(e),Rr(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));dt=Hg(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));dt=Hg(e)}else i===27?(i=dt,ta(e.type)?(e=Pd,Pd=null,dt=e):dt=i):dt=_i?Xs(e.stateNode.nextSibling):null;return!0}function Qr(){dt=_i=null,Qe=!1}function Ao(){var e=hr;return e!==null&&(ys===null?ys=e:ys.push.apply(ys,e),hr=null),e}function Oa(e){hr===null?hr=[e]:hr.push(e)}var To=C(null),Jr=null,ur=null;function Nr(e,i,r){_e(To,i._currentValue),i._currentValue=r}function Ys(e){e._currentValue=To.current,V(To)}function ko(e,i,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===r)break;e=e.return}}function vl(e,i,r,a){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var m=c.child;u=u.firstContext;e:for(;u!==null;){var S=u;u=c;for(var M=0;M<i.length;M++)if(S.context===i[M]){u.lanes|=r,S=u.alternate,S!==null&&(S.lanes|=r),ko(u.return,r,e),a||(m=null);break e}u=S.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(l(341));m.lanes|=r,u=m.alternate,u!==null&&(u.lanes|=r),ko(m,r,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function Br(e,i,r,a){e=null;for(var c=i,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var S=c.type;Hi(c.pendingProps.value,m.value)||(e!==null?e.push(S):e=[S])}}else if(c===oe.current){if(m=c.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Qo):e=[Qo])}c=c.return}e!==null&&vl(i,e,r,a),i.flags|=262144}function Ra(e){for(e=e.firstContext;e!==null;){if(!Hi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ss(e){Jr=e,ur=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ri(e){return Do(Jr,e)}function qn(e,i){return Jr===null&&ss(e),Do(e,i)}function Do(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},ur===null){if(e===null)throw Error(l(308));ur=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ur=ur.next=i;return r}var Mo=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,a){e.push(a)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},lh=t.unstable_scheduleCallback,Oo=t.unstable_NormalPriority,$t={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dr(){return{controller:new Mo,data:new Map,refCount:0}}function gs(e){e.refCount--,e.refCount===0&&lh(Oo,function(){e.controller.abort()})}var Na=null,Ro=0,Pn=0,Zn=null;function Fu(e,i){if(Na===null){var r=Na=[];Ro=0,Pn=Dd(),Zn={status:"pending",value:void 0,then:function(a){r.push(a)}}}return Ro++,i.then(oh,oh),i}function oh(){if(--Ro===0&&Na!==null){Zn!==null&&(Zn.status="fulfilled");var e=Na;Na=null,Pn=0,Zn=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Iu(e,i){var r=[],a={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return e.then(function(){a.status="fulfilled",a.value=i;for(var c=0;c<r.length;c++)(0,r[c])(i)},function(c){for(a.status="rejected",a.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),a}var ch=L.S;L.S=function(e,i){Qp=Ct(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Fu(e,i),ch!==null&&ch(e,i)};var Lr=C(null);function Kn(){var e=Lr.current;return e!==null?e:Tt.pooledCache}function en(e,i){i===null?_e(Lr,Lr.current):_e(Lr,i.pool)}function hh(){var e=Kn();return e===null?null:{parent:$t._currentValue,pool:e}}var Wn=Error(l(460)),tn=Error(l(474)),b=Error(l(542)),h={then:function(){}};function g(e){return e=e.status,e==="fulfilled"||e==="rejected"}function w(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then(wi,wi),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,he(e),e;default:if(typeof i.status=="string")i.then(wi,wi);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=i,e.status="pending",e.then(function(a){if(i.status==="pending"){var c=i;c.status="fulfilled",c.value=a}},function(a){if(i.status==="pending"){var c=i;c.status="rejected",c.reason=a}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,he(e),e}throw F=i,Wn}}function z(e){try{var i=e._init;return i(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(F=r,Wn):r}}var F=null;function ee(){if(F===null)throw Error(l(459));var e=F;return F=null,e}function he(e){if(e===Wn||e===b)throw Error(l(483))}var ve=null,xe=0;function Ae(e){var i=xe;return xe+=1,ve===null&&(ve=[]),w(ve,e,i)}function Ce(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Pe(e,i){throw i.$$typeof===E?Error(l(525)):(e=Object.prototype.toString.call(i),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Be(e){function i(q,B){if(e){var Z=q.deletions;Z===null?(q.deletions=[B],q.flags|=16):Z.push(B)}}function r(q,B){if(!e)return null;for(;B!==null;)i(q,B),B=B.sibling;return null}function a(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function c(q,B){return q=lr(q,B),q.index=0,q.sibling=null,q}function u(q,B,Z){return q.index=Z,e?(Z=q.alternate,Z!==null?(Z=Z.index,Z<B?(q.flags|=67108866,B):Z):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function m(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function S(q,B,Z,se){return B===null||B.tag!==6?(B=jn(Z,q.mode,se),B.return=q,B):(B=c(B,Z),B.return=q,B)}function M(q,B,Z,se){var Oe=Z.type;return Oe===H?te(q,B,Z.props.children,se,Z.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&z(Oe)===B.type)?(B=c(B,Z.props),Ce(B,Z),B.return=q,B):(B=pl(Z.type,Z.key,Z.props,null,q.mode,se),Ce(B,Z),B.return=q,B)}function K(q,B,Z,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==Z.containerInfo||B.stateNode.implementation!==Z.implementation?(B=gl(Z,q.mode,se),B.return=q,B):(B=c(B,Z.children||[]),B.return=q,B)}function te(q,B,Z,se,Oe){return B===null||B.tag!==7?(B=or(Z,q.mode,se,Oe),B.return=q,B):(B=c(B,Z),B.return=q,B)}function ne(q,B,Z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=jn(""+B,q.mode,Z),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return Z=pl(B.type,B.key,B.props,null,q.mode,Z),Ce(Z,B),Z.return=q,Z;case D:return B=gl(B,q.mode,Z),B.return=q,B;case P:return B=z(B),ne(q,B,Z)}if(me(B)||ie(B))return B=or(B,q.mode,Z,null),B.return=q,B;if(typeof B.then=="function")return ne(q,Ae(B),Z);if(B.$$typeof===A)return ne(q,qn(q,B),Z);Pe(q,B)}return null}function $(q,B,Z,se){var Oe=B!==null?B.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:S(q,B,""+Z,se);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:return Z.key===Oe?M(q,B,Z,se):null;case D:return Z.key===Oe?K(q,B,Z,se):null;case P:return Z=z(Z),$(q,B,Z,se)}if(me(Z)||ie(Z))return Oe!==null?null:te(q,B,Z,se,null);if(typeof Z.then=="function")return $(q,B,Ae(Z),se);if(Z.$$typeof===A)return $(q,B,qn(q,Z),se);Pe(q,Z)}return null}function Q(q,B,Z,se,Oe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(Z)||null,S(B,q,""+se,Oe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case N:return q=q.get(se.key===null?Z:se.key)||null,M(B,q,se,Oe);case D:return q=q.get(se.key===null?Z:se.key)||null,K(B,q,se,Oe);case P:return se=z(se),Q(q,B,Z,se,Oe)}if(me(se)||ie(se))return q=q.get(Z)||null,te(B,q,se,Oe,null);if(typeof se.then=="function")return Q(q,B,Z,Ae(se),Oe);if(se.$$typeof===A)return Q(q,B,Z,qn(B,se),Oe);Pe(B,se)}return null}function ke(q,B,Z,se){for(var Oe=null,_t=null,Me=B,Xe=B=0,nt=null;Me!==null&&Xe<Z.length;Xe++){Me.index>Xe?(nt=Me,Me=null):nt=Me.sibling;var pt=$(q,Me,Z[Xe],se);if(pt===null){Me===null&&(Me=nt);break}e&&Me&&pt.alternate===null&&i(q,Me),B=u(pt,B,Xe),_t===null?Oe=pt:_t.sibling=pt,_t=pt,Me=nt}if(Xe===Z.length)return r(q,Me),Qe&&cr(q,Xe),Oe;if(Me===null){for(;Xe<Z.length;Xe++)Me=ne(q,Z[Xe],se),Me!==null&&(B=u(Me,B,Xe),_t===null?Oe=Me:_t.sibling=Me,_t=Me);return Qe&&cr(q,Xe),Oe}for(Me=a(Me);Xe<Z.length;Xe++)nt=Q(Me,q,Xe,Z[Xe],se),nt!==null&&(e&&nt.alternate!==null&&Me.delete(nt.key===null?Xe:nt.key),B=u(nt,B,Xe),_t===null?Oe=nt:_t.sibling=nt,_t=nt);return e&&Me.forEach(function(aa){return i(q,aa)}),Qe&&cr(q,Xe),Oe}function Ue(q,B,Z,se){if(Z==null)throw Error(l(151));for(var Oe=null,_t=null,Me=B,Xe=B=0,nt=null,pt=Z.next();Me!==null&&!pt.done;Xe++,pt=Z.next()){Me.index>Xe?(nt=Me,Me=null):nt=Me.sibling;var aa=$(q,Me,pt.value,se);if(aa===null){Me===null&&(Me=nt);break}e&&Me&&aa.alternate===null&&i(q,Me),B=u(aa,B,Xe),_t===null?Oe=aa:_t.sibling=aa,_t=aa,Me=nt}if(pt.done)return r(q,Me),Qe&&cr(q,Xe),Oe;if(Me===null){for(;!pt.done;Xe++,pt=Z.next())pt=ne(q,pt.value,se),pt!==null&&(B=u(pt,B,Xe),_t===null?Oe=pt:_t.sibling=pt,_t=pt);return Qe&&cr(q,Xe),Oe}for(Me=a(Me);!pt.done;Xe++,pt=Z.next())pt=Q(Me,q,Xe,pt.value,se),pt!==null&&(e&&pt.alternate!==null&&Me.delete(pt.key===null?Xe:pt.key),B=u(pt,B,Xe),_t===null?Oe=pt:_t.sibling=pt,_t=pt);return e&&Me.forEach(function(Oy){return i(q,Oy)}),Qe&&cr(q,Xe),Oe}function Et(q,B,Z,se){if(typeof Z=="object"&&Z!==null&&Z.type===H&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case N:e:{for(var Oe=Z.key;B!==null;){if(B.key===Oe){if(Oe=Z.type,Oe===H){if(B.tag===7){r(q,B.sibling),se=c(B,Z.props.children),se.return=q,q=se;break e}}else if(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&z(Oe)===B.type){r(q,B.sibling),se=c(B,Z.props),Ce(se,Z),se.return=q,q=se;break e}r(q,B);break}else i(q,B);B=B.sibling}Z.type===H?(se=or(Z.props.children,q.mode,se,Z.key),se.return=q,q=se):(se=pl(Z.type,Z.key,Z.props,null,q.mode,se),Ce(se,Z),se.return=q,q=se)}return m(q);case D:e:{for(Oe=Z.key;B!==null;){if(B.key===Oe)if(B.tag===4&&B.stateNode.containerInfo===Z.containerInfo&&B.stateNode.implementation===Z.implementation){r(q,B.sibling),se=c(B,Z.children||[]),se.return=q,q=se;break e}else{r(q,B);break}else i(q,B);B=B.sibling}se=gl(Z,q.mode,se),se.return=q,q=se}return m(q);case P:return Z=z(Z),Et(q,B,Z,se)}if(me(Z))return ke(q,B,Z,se);if(ie(Z)){if(Oe=ie(Z),typeof Oe!="function")throw Error(l(150));return Z=Oe.call(Z),Ue(q,B,Z,se)}if(typeof Z.then=="function")return Et(q,B,Ae(Z),se);if(Z.$$typeof===A)return Et(q,B,qn(q,Z),se);Pe(q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,B!==null&&B.tag===6?(r(q,B.sibling),se=c(B,Z),se.return=q,q=se):(r(q,B),se=jn(Z,q.mode,se),se.return=q,q=se),m(q)):r(q,B)}return function(q,B,Z,se){try{xe=0;var Oe=Et(q,B,Z,se);return ve=null,Oe}catch(Me){if(Me===Wn||Me===b)throw Me;var _t=is(29,Me,null,q.mode);return _t.lanes=se,_t.return=q,_t}}}var Le=Be(!0),je=Be(!1),Ne=!1;function ft(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mt(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ie(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ve(e,i,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(gt&2)!==0){var c=a.pending;return c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i,i=_l(e),yo(e,null,r),i}return fl(e,a,i,r),_l(e)}function Ze(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var a=i.lanes;a&=e.pendingLanes,r|=a,i.lanes=r,_a(e,r)}}function Je(e,i){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var m={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};u===null?c=u=m:u=u.next=m,r=r.next}while(r!==null);u===null?c=u=i:u=u.next=i}else c=u=i;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var ht=!1;function ct(){if(ht){var e=Zn;if(e!==null)throw e}}function lt(e,i,r,a){ht=!1;var c=e.updateQueue;Ne=!1;var u=c.firstBaseUpdate,m=c.lastBaseUpdate,S=c.shared.pending;if(S!==null){c.shared.pending=null;var M=S,K=M.next;M.next=null,m===null?u=K:m.next=K,m=M;var te=e.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==m&&(S===null?te.firstBaseUpdate=K:S.next=K,te.lastBaseUpdate=M))}if(u!==null){var ne=c.baseState;m=0,te=K=M=null,S=u;do{var $=S.lane&-536870913,Q=$!==S.lane;if(Q?(rt&$)===$:(a&$)===$){$!==0&&$===Pn&&(ht=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ke=e,Ue=S;$=i;var Et=r;switch(Ue.tag){case 1:if(ke=Ue.payload,typeof ke=="function"){ne=ke.call(Et,ne,$);break e}ne=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ue.payload,$=typeof ke=="function"?ke.call(Et,ne,$):ke,$==null)break e;ne=x({},ne,$);break e;case 2:Ne=!0}}$=S.callback,$!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=c.callbacks,Q===null?c.callbacks=[$]:Q.push($))}else Q={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(K=te=Q,M=ne):te=te.next=Q,m|=$;if(S=S.next,S===null){if(S=c.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,c.lastBaseUpdate=Q,c.shared.pending=null}}while(!0);te===null&&(M=ne),c.baseState=M,c.firstBaseUpdate=K,c.lastBaseUpdate=te,u===null&&(c.shared.lanes=0),Vn|=m,e.lanes=m,e.memoizedState=ne}}function Bt(e,i){if(typeof e!="function")throw Error(l(191,e));e.call(i)}function Wi(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Bt(r[e],i)}var Ai=C(null),ni=C(0);function rs(e,i){e=fn,_e(ni,e),_e(Ai,i),fn=e|i.baseLanes}function Yi(){_e(ni,fn),_e(Ai,Ai.current)}function kt(){fn=ni.current,V(Ai),V(ni)}var Lt=C(null),qt=null;function ns(e){var i=e.alternate;_e(bt,bt.current&1),_e(Lt,e),qt===null&&(i===null||Ai.current!==null||i.memoizedState!==null)&&(qt=e)}function Xt(e){_e(bt,bt.current),_e(Lt,e),qt===null&&(qt=e)}function vt(e){e.tag===22?(_e(bt,bt.current),_e(Lt,e),qt===null&&(qt=e)):zt()}function zt(){_e(bt,bt.current),_e(Lt,Lt.current)}function Dt(e){V(Lt),qt===e&&(qt=null),V(bt)}var bt=C(0);function sn(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Id(r)||qd(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $s=0,Ke=null,ut=null,Vt=null,bl=!1,zr=!1,rn=!1,Ba=0,La=0,nn=null,uh=0;function Ht(){throw Error(l(321))}function No(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!Hi(e[r],i[r]))return!1;return!0}function fr(e,i,r,a,c,u){return $s=u,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,L.H=e===null||e.memoizedState===null?cp:Qu,rn=!1,u=r(a,c),rn=!1,zr&&(u=Bo(i,r,a,c)),za(e),u}function za(e){L.H=zo;var i=ut!==null&&ut.next!==null;if($s=0,Vt=ut=Ke=null,bl=!1,La=0,nn=null,i)throw Error(l(300));e===null||ai||(e=e.dependencies,e!==null&&Ra(e)&&(ai=!0))}function Bo(e,i,r,a){Ke=e;var c=0;do{if(zr&&(nn=null),La=0,zr=!1,25<=c)throw Error(l(301));if(c+=1,Vt=ut=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}L.H=hp,u=i(r,a)}while(zr);return u}function dh(){var e=L.H,i=e.useState()[0];return i=typeof i.then=="function"?Ua(i):i,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(Ke.flags|=1024),i}function Ha(){var e=Ba!==0;return Ba=0,e}function yl(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function Sl(e){if(bl){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}bl=!1}$s=0,Vt=ut=Ke=null,zr=!1,La=Ba=0,nn=null}function Ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ke.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function Ut(){if(ut===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var i=Vt===null?Ke.memoizedState:Vt.next;if(i!==null)Vt=i,ut=e;else{if(e===null)throw Ke.alternate===null?Error(l(467)):Error(l(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Vt===null?Ke.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ua(e){var i=La;return La+=1,nn===null&&(nn=[]),e=w(nn,e,i),i=Ke,(Vt===null?i.memoizedState:Vt.next)===null&&(i=i.alternate,L.H=i===null||i.memoizedState===null?cp:Qu),e}function Yn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ua(e);if(e.$$typeof===A)return ri(e)}throw Error(l(438,String(e)))}function Cl(e){var i=null,r=Ke.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var a=Ke.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(i={data:a.data.map(function(c){return c.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=wl(),Ke.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),a=0;a<e;a++)r[a]=de;return i.index++,r}function an(e,i){return typeof i=="function"?i(e):i}function fh(e){var i=Ut();return qu(i,ut,e)}function qu(e,i,r){var a=e.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=r;var c=e.baseQueue,u=a.pending;if(u!==null){if(c!==null){var m=c.next;c.next=u.next,u.next=m}i.baseQueue=c=u,a.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{i=c.next;var S=m=null,M=null,K=i,te=!1;do{var ne=K.lane&-536870913;if(ne!==K.lane?(rt&ne)===ne:($s&ne)===ne){var $=K.revertLane;if($===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ne===Pn&&(te=!0);else if(($s&$)===$){K=K.next,$===Pn&&(te=!0);continue}else ne={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(S=M=ne,m=u):M=M.next=ne,Ke.lanes|=$,Vn|=$;ne=K.action,rn&&r(u,ne),u=K.hasEagerState?K.eagerState:r(u,ne)}else $={lane:ne,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(S=M=$,m=u):M=M.next=$,Ke.lanes|=ne,Vn|=ne;K=K.next}while(K!==null&&K!==i);if(M===null?m=u:M.next=S,!Hi(u,e.memoizedState)&&(ai=!0,te&&(r=Zn,r!==null)))throw r;e.memoizedState=u,e.baseState=m,e.baseQueue=M,a.lastRenderedState=u}return c===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Pu(e){var i=Ut(),r=i.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,u=i.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do u=e(u,m.action),m=m.next;while(m!==c);Hi(u,i.memoizedState)||(ai=!0),i.memoizedState=u,i.baseQueue===null&&(i.baseState=u),r.lastRenderedState=u}return[u,a]}function D_(e,i,r){var a=Ke,c=Ut(),u=Qe;if(u){if(r===void 0)throw Error(l(407));r=r()}else r=i();var m=!Hi((ut||c).memoizedState,r);if(m&&(c.memoizedState=r,ai=!0),c=c.queue,Wu(R_.bind(null,a,c,e),[e]),c.getSnapshot!==i||m||Vt!==null&&Vt.memoizedState.tag&1){if(a.flags|=2048,xl(9,{destroy:void 0},O_.bind(null,a,c,r,i),null),Tt===null)throw Error(l(349));u||($s&127)!==0||M_(a,i,r)}return r}function M_(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=Ke.updateQueue,i===null?(i=wl(),Ke.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function O_(e,i,r,a){i.value=r,i.getSnapshot=a,N_(i)&&B_(e)}function R_(e,i,r){return r(function(){N_(i)&&B_(e)})}function N_(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!Hi(e,r)}catch{return!0}}function B_(e){var i=Ui(e,2);i!==null&&Ss(i,e,2)}function Zu(e){var i=Ti();if(typeof e=="function"){var r=e;if(e=r(),rn){$e(!0);try{r()}finally{$e(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:e},i}function L_(e,i,r,a){return e.baseState=r,qu(e,ut,typeof a=="function"?a:an)}function Cb(e,i,r,a,c){if(gh(e))throw Error(l(485));if(e=i.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};L.T!==null?r(!0):u.isTransition=!1,a(u),r=i.pending,r===null?(u.next=i.pending=u,z_(i,u)):(u.next=r.next,i.pending=r.next=u)}}function z_(e,i){var r=i.action,a=i.payload,c=e.state;if(i.isTransition){var u=L.T,m={};L.T=m;try{var S=r(c,a),M=L.S;M!==null&&M(m,S),H_(e,i,S)}catch(K){Ku(e,i,K)}finally{u!==null&&m.types!==null&&(u.types=m.types),L.T=u}}else try{u=r(c,a),H_(e,i,u)}catch(K){Ku(e,i,K)}}function H_(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(a){U_(e,i,a)},function(a){return Ku(e,i,a)}):U_(e,i,r)}function U_(e,i,r){i.status="fulfilled",i.value=r,j_(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,z_(e,r)))}function Ku(e,i,r){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do i.status="rejected",i.reason=r,j_(i),i=i.next;while(i!==a)}e.action=null}function j_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function F_(e,i){return i}function I_(e,i){if(Qe){var r=Tt.formState;if(r!==null){e:{var a=Ke;if(Qe){if(dt){t:{for(var c=dt,u=ps;c.nodeType!==8;){if(!u){c=null;break t}if(c=Xs(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){dt=Xs(c.nextSibling),a=c.data==="F!";break e}}Or(a)}a=!1}a&&(i=r[0])}}return r=Ti(),r.memoizedState=r.baseState=i,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F_,lastRenderedState:i},r.queue=a,r=ap.bind(null,Ke,a),a.dispatch=r,a=Zu(!1),u=Gu.bind(null,Ke,!1,a.queue),a=Ti(),c={state:i,dispatch:null,action:e,pending:null},a.queue=c,r=Cb.bind(null,Ke,c,u,r),c.dispatch=r,a.memoizedState=e,[i,r,!1]}function q_(e){var i=Ut();return P_(i,ut,e)}function P_(e,i,r){if(i=qu(e,i,F_)[0],e=fh(an)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var a=Ua(i)}catch(m){throw m===Wn?b:m}else a=i;i=Ut();var c=i.queue,u=c.dispatch;return r!==i.memoizedState&&(Ke.flags|=2048,xl(9,{destroy:void 0},xb.bind(null,c,r),null)),[a,u,e]}function xb(e,i){e.action=i}function Z_(e){var i=Ut(),r=ut;if(r!==null)return P_(i,r,e);Ut(),i=i.memoizedState,r=Ut();var a=r.queue.dispatch;return r.memoizedState=e,[i,a,!1]}function xl(e,i,r,a){return e={tag:e,create:r,deps:a,inst:i,next:null},i=Ke.updateQueue,i===null&&(i=wl(),Ke.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,i.lastEffect=e),e}function K_(){return Ut().memoizedState}function _h(e,i,r,a){var c=Ti();Ke.flags|=e,c.memoizedState=xl(1|i,{destroy:void 0},r,a===void 0?null:a)}function ph(e,i,r,a){var c=Ut();a=a===void 0?null:a;var u=c.memoizedState.inst;ut!==null&&a!==null&&No(a,ut.memoizedState.deps)?c.memoizedState=xl(i,u,r,a):(Ke.flags|=e,c.memoizedState=xl(1|i,u,r,a))}function W_(e,i){_h(8390656,8,e,i)}function Wu(e,i){ph(2048,8,e,i)}function Eb(e){Ke.flags|=4;var i=Ke.updateQueue;if(i===null)i=wl(),Ke.updateQueue=i,i.events=[e];else{var r=i.events;r===null?i.events=[e]:r.push(e)}}function Y_(e){var i=Ut().memoizedState;return Eb({ref:i,nextImpl:e}),function(){if((gt&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}function $_(e,i){return ph(4,2,e,i)}function X_(e,i){return ph(4,4,e,i)}function V_(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function G_(e,i,r){r=r!=null?r.concat([e]):null,ph(4,4,V_.bind(null,i,e),r)}function Yu(){}function Q_(e,i){var r=Ut();i=i===void 0?null:i;var a=r.memoizedState;return i!==null&&No(i,a[1])?a[0]:(r.memoizedState=[e,i],e)}function J_(e,i){var r=Ut();i=i===void 0?null:i;var a=r.memoizedState;if(i!==null&&No(i,a[1]))return a[0];if(a=e(),rn){$e(!0);try{e()}finally{$e(!1)}}return r.memoizedState=[a,i],a}function $u(e,i,r){return r===void 0||($s&1073741824)!==0&&(rt&261930)===0?e.memoizedState=i:(e.memoizedState=r,e=eg(),Ke.lanes|=e,Vn|=e,r)}function ep(e,i,r,a){return Hi(r,i)?r:Ai.current!==null?(e=$u(e,r,a),Hi(e,i)||(ai=!0),e):($s&42)===0||($s&1073741824)!==0&&(rt&261930)===0?(ai=!0,e.memoizedState=r):(e=eg(),Ke.lanes|=e,Vn|=e,i)}function tp(e,i,r,a,c){var u=J.p;J.p=u!==0&&8>u?u:8;var m=L.T,S={};L.T=S,Gu(e,!1,i,r);try{var M=c(),K=L.S;if(K!==null&&K(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=Iu(M,a);Lo(e,i,te,Ns(e))}else Lo(e,i,a,Ns(e))}catch(ne){Lo(e,i,{then:function(){},status:"rejected",reason:ne},Ns())}finally{J.p=u,m!==null&&S.types!==null&&(m.types=S.types),L.T=m}}function Ab(){}function Xu(e,i,r,a){if(e.tag!==5)throw Error(l(476));var c=ip(e).queue;tp(e,c,i,X,r===null?Ab:function(){return sp(e),r(a)})}function ip(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:X},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function sp(e){var i=ip(e);i.next===null&&(i=e.alternate.memoizedState),Lo(e,i.next.queue,{},Ns())}function Vu(){return ri(Qo)}function rp(){return Ut().memoizedState}function np(){return Ut().memoizedState}function Tb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=Ns();e=Ie(r);var a=Ve(i,e,r);a!==null&&(Ss(a,i,r),Ze(a,i,r)),i={cache:dr()},e.payload=i;return}i=i.return}}function kb(e,i,r){var a=Ns();r={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},gh(e)?lp(i,r):(r=bo(e,i,r,a),r!==null&&(Ss(r,e,a),op(r,i,a)))}function ap(e,i,r){var a=Ns();Lo(e,i,r,a)}function Lo(e,i,r,a){var c={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(gh(e))lp(i,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=i.lastRenderedReducer,u!==null))try{var m=i.lastRenderedState,S=u(m,r);if(c.hasEagerState=!0,c.eagerState=S,Hi(S,m))return fl(e,i,c,0),Tt===null&&dl(),!1}catch{}if(r=bo(e,i,c,a),r!==null)return Ss(r,e,a),op(r,i,a),!0}return!1}function Gu(e,i,r,a){if(a={lane:2,revertLane:Dd(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},gh(e)){if(i)throw Error(l(479))}else i=bo(e,r,a,2),i!==null&&Ss(i,e,2)}function gh(e){var i=e.alternate;return e===Ke||i!==null&&i===Ke}function lp(e,i){zr=bl=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function op(e,i,r){if((r&4194048)!==0){var a=i.lanes;a&=e.pendingLanes,r|=a,i.lanes=r,_a(e,r)}}var zo={readContext:ri,use:Yn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};zo.useEffectEvent=Ht;var cp={readContext:ri,use:Yn,useCallback:function(e,i){return Ti().memoizedState=[e,i===void 0?null:i],e},useContext:ri,useEffect:W_,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,_h(4194308,4,V_.bind(null,i,e),r)},useLayoutEffect:function(e,i){return _h(4194308,4,e,i)},useInsertionEffect:function(e,i){_h(4,2,e,i)},useMemo:function(e,i){var r=Ti();i=i===void 0?null:i;var a=e();if(rn){$e(!0);try{e()}finally{$e(!1)}}return r.memoizedState=[a,i],a},useReducer:function(e,i,r){var a=Ti();if(r!==void 0){var c=r(i);if(rn){$e(!0);try{r(i)}finally{$e(!1)}}}else c=i;return a.memoizedState=a.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},a.queue=e,e=e.dispatch=kb.bind(null,Ke,e),[a.memoizedState,e]},useRef:function(e){var i=Ti();return e={current:e},i.memoizedState=e},useState:function(e){e=Zu(e);var i=e.queue,r=ap.bind(null,Ke,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:Yu,useDeferredValue:function(e,i){var r=Ti();return $u(r,e,i)},useTransition:function(){var e=Zu(!1);return e=tp.bind(null,Ke,e.queue,!0,!1),Ti().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var a=Ke,c=Ti();if(Qe){if(r===void 0)throw Error(l(407));r=r()}else{if(r=i(),Tt===null)throw Error(l(349));(rt&127)!==0||M_(a,i,r)}c.memoizedState=r;var u={value:r,getSnapshot:i};return c.queue=u,W_(R_.bind(null,a,u,e),[e]),a.flags|=2048,xl(9,{destroy:void 0},O_.bind(null,a,u,r,i),null),r},useId:function(){var e=Ti(),i=Tt.identifierPrefix;if(Qe){var r=Ws,a=Ks;r=(a&~(1<<32-Re(a)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Ba++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=uh++,i="_"+i+"r_"+r.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Vu,useFormState:I_,useActionState:I_,useOptimistic:function(e){var i=Ti();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=Gu.bind(null,Ke,!0,r),r.dispatch=i,[e,i]},useMemoCache:Cl,useCacheRefresh:function(){return Ti().memoizedState=Tb.bind(null,Ke)},useEffectEvent:function(e){var i=Ti(),r={impl:e};return i.memoizedState=r,function(){if((gt&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},Qu={readContext:ri,use:Yn,useCallback:Q_,useContext:ri,useEffect:Wu,useImperativeHandle:G_,useInsertionEffect:$_,useLayoutEffect:X_,useMemo:J_,useReducer:fh,useRef:K_,useState:function(){return fh(an)},useDebugValue:Yu,useDeferredValue:function(e,i){var r=Ut();return ep(r,ut.memoizedState,e,i)},useTransition:function(){var e=fh(an)[0],i=Ut().memoizedState;return[typeof e=="boolean"?e:Ua(e),i]},useSyncExternalStore:D_,useId:rp,useHostTransitionStatus:Vu,useFormState:q_,useActionState:q_,useOptimistic:function(e,i){var r=Ut();return L_(r,ut,e,i)},useMemoCache:Cl,useCacheRefresh:np};Qu.useEffectEvent=Y_;var hp={readContext:ri,use:Yn,useCallback:Q_,useContext:ri,useEffect:Wu,useImperativeHandle:G_,useInsertionEffect:$_,useLayoutEffect:X_,useMemo:J_,useReducer:Pu,useRef:K_,useState:function(){return Pu(an)},useDebugValue:Yu,useDeferredValue:function(e,i){var r=Ut();return ut===null?$u(r,e,i):ep(r,ut.memoizedState,e,i)},useTransition:function(){var e=Pu(an)[0],i=Ut().memoizedState;return[typeof e=="boolean"?e:Ua(e),i]},useSyncExternalStore:D_,useId:rp,useHostTransitionStatus:Vu,useFormState:Z_,useActionState:Z_,useOptimistic:function(e,i){var r=Ut();return ut!==null?L_(r,ut,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Cl,useCacheRefresh:np};hp.useEffectEvent=Y_;function Ju(e,i,r,a){i=e.memoizedState,r=r(a,i),r=r==null?i:x({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ed={enqueueSetState:function(e,i,r){e=e._reactInternals;var a=Ns(),c=Ie(a);c.payload=i,r!=null&&(c.callback=r),i=Ve(e,c,a),i!==null&&(Ss(i,e,a),Ze(i,e,a))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var a=Ns(),c=Ie(a);c.tag=1,c.payload=i,r!=null&&(c.callback=r),i=Ve(e,c,a),i!==null&&(Ss(i,e,a),Ze(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=Ns(),a=Ie(r);a.tag=2,i!=null&&(a.callback=i),i=Ve(e,a,r),i!==null&&(Ss(i,e,r),Ze(i,e,r))}};function up(e,i,r,a,c,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,m):i.prototype&&i.prototype.isPureReactComponent?!xi(r,a)||!xi(c,u):!0}function dp(e,i,r,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,a),i.state!==e&&ed.enqueueReplaceState(i,i.state,null)}function ja(e,i){var r=i;if("ref"in i){r={};for(var a in i)a!=="ref"&&(r[a]=i[a])}if(e=e.defaultProps){r===i&&(r=x({},r));for(var c in e)r[c]===void 0&&(r[c]=e[c])}return r}function fp(e){Ta(e)}function _p(e){console.error(e)}function pp(e){Ta(e)}function mh(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(a){setTimeout(function(){throw a})}}function gp(e,i,r){try{var a=e.onCaughtError;a(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function td(e,i,r){return r=Ie(r),r.tag=3,r.payload={element:null},r.callback=function(){mh(e,i)},r}function mp(e){return e=Ie(e),e.tag=3,e}function vp(e,i,r,a){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var u=a.value;e.payload=function(){return c(u)},e.callback=function(){gp(i,r,a)}}var m=r.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){gp(i,r,a),typeof c!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})})}function Db(e,i,r,a,c){if(r.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(i=r.alternate,i!==null&&Br(i,r,c,!0),r=Lt.current,r!==null){switch(r.tag){case 31:case 13:return qt===null?Dh():r.alternate===null&&Gt===0&&(Gt=3),r.flags&=-257,r.flags|=65536,r.lanes=c,a===h?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([a]):i.add(a),Ad(e,a,c)),!1;case 22:return r.flags|=65536,a===h?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([a])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([a]):r.add(a)),Ad(e,a,c)),!1}throw Error(l(435,r.tag))}return Ad(e,a,c),Dh(),!1}if(Qe)return i=Lt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=c,a!==Eo&&(e=Error(l(422),{cause:a}),Oa(Ei(e,r)))):(a!==Eo&&(i=Error(l(423),{cause:a}),Oa(Ei(i,r))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,a=Ei(a,r),c=td(e.stateNode,a,c),Je(e,c),Gt!==4&&(Gt=2)),!1;var u=Error(l(520),{cause:a});if(u=Ei(u,r),Zo===null?Zo=[u]:Zo.push(u),Gt!==4&&(Gt=2),i===null)return!0;a=Ei(a,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=c&-c,r.lanes|=e,e=td(r.stateNode,a,e),Je(r,e),!1;case 1:if(i=r.type,u=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Gn===null||!Gn.has(u))))return r.flags|=65536,c&=-c,r.lanes|=c,c=mp(c),vp(c,e,r,a),Je(r,c),!1}r=r.return}while(r!==null);return!1}var id=Error(l(461)),ai=!1;function ji(e,i,r,a){i.child=e===null?je(i,null,r,a):Le(i,e.child,r,a)}function bp(e,i,r,a,c){r=r.render;var u=i.ref;if("ref"in a){var m={};for(var S in a)S!=="ref"&&(m[S]=a[S])}else m=a;return ss(i),a=fr(e,i,r,m,u,c),S=Ha(),e!==null&&!ai?(yl(e,i,c),ln(e,i,c)):(Qe&&S&&Ma(i),i.flags|=1,ji(e,i,a,c),i.child)}function yp(e,i,r,a,c){if(e===null){var u=r.type;return typeof u=="function"&&!So(u)&&u.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=u,Sp(e,i,u,a,c)):(e=pl(r.type,null,a,i,i.mode,c),e.ref=i.ref,e.return=i,i.child=e)}if(u=e.child,!hd(e,c)){var m=u.memoizedProps;if(r=r.compare,r=r!==null?r:xi,r(m,a)&&e.ref===i.ref)return ln(e,i,c)}return i.flags|=1,e=lr(u,a),e.ref=i.ref,e.return=i,i.child=e}function Sp(e,i,r,a,c){if(e!==null){var u=e.memoizedProps;if(xi(u,a)&&e.ref===i.ref)if(ai=!1,i.pendingProps=a=u,hd(e,c))(e.flags&131072)!==0&&(ai=!0);else return i.lanes=e.lanes,ln(e,i,c)}return sd(e,i,r,a,c)}function wp(e,i,r,a){var c=a.children,u=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((i.flags&128)!==0){if(u=u!==null?u.baseLanes|r:r,e!==null){for(a=i.child=e.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~u}else a=0,i.child=null;return Cp(e,i,u,r,a)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&en(i,u!==null?u.cachePool:null),u!==null?rs(i,u):Yi(),vt(i);else return a=i.lanes=536870912,Cp(e,i,u!==null?u.baseLanes|r:r,r,a)}else u!==null?(en(i,u.cachePool),rs(i,u),zt(),i.memoizedState=null):(e!==null&&en(i,null),Yi(),zt());return ji(e,i,c,r),i.child}function Ho(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Cp(e,i,r,a,c){var u=Kn();return u=u===null?null:{parent:$t._currentValue,pool:u},i.memoizedState={baseLanes:r,cachePool:u},e!==null&&en(i,null),Yi(),vt(i),e!==null&&Br(e,i,a,!0),i.childLanes=c,null}function vh(e,i){return i=yh({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function xp(e,i,r){return Le(i,e.child,null,r),e=vh(i,i.pendingProps),e.flags|=2,Dt(i),i.memoizedState=null,e}function Mb(e,i,r){var a=i.pendingProps,c=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Qe){if(a.mode==="hidden")return e=vh(i,a),i.lanes=536870912,Ho(null,e);if(Xt(i),(e=dt)?(e=zg(e,ps),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Mr!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},r=ah(e),r.return=i,i.child=r,_i=i,dt=null)):e=null,e===null)throw Or(i);return i.lanes=536870912,null}return vh(i,a)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(Xt(i),c)if(i.flags&256)i.flags&=-257,i=xp(e,i,r);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(l(558));else if(ai||Br(e,i,r,!1),c=(r&e.childLanes)!==0,ai||c){if(a=Tt,a!==null&&(m=hs(a,r),m!==0&&m!==u.retryLane))throw u.retryLane=m,Ui(e,m),Ss(a,e,m),id;Dh(),i=xp(e,i,r)}else e=u.treeContext,dt=Xs(m.nextSibling),_i=i,Qe=!0,hr=null,ps=!1,e!==null&&xo(i,e),i=vh(i,a),i.flags|=4096;return i}return e=lr(e.child,{mode:a.mode,children:a.children}),e.ref=i.ref,i.child=e,e.return=i,e}function bh(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function sd(e,i,r,a,c){return ss(i),r=fr(e,i,r,a,void 0,c),a=Ha(),e!==null&&!ai?(yl(e,i,c),ln(e,i,c)):(Qe&&a&&Ma(i),i.flags|=1,ji(e,i,r,c),i.child)}function Ep(e,i,r,a,c,u){return ss(i),i.updateQueue=null,r=Bo(i,a,r,c),za(e),a=Ha(),e!==null&&!ai?(yl(e,i,u),ln(e,i,u)):(Qe&&a&&Ma(i),i.flags|=1,ji(e,i,r,u),i.child)}function Ap(e,i,r,a,c){if(ss(i),i.stateNode===null){var u=Un,m=r.contextType;typeof m=="object"&&m!==null&&(u=ri(m)),u=new r(a,u),i.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=ed,i.stateNode=u,u._reactInternals=i,u=i.stateNode,u.props=a,u.state=i.memoizedState,u.refs={},ft(i),m=r.contextType,u.context=typeof m=="object"&&m!==null?ri(m):Un,u.state=i.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Ju(i,r,m,a),u.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&ed.enqueueReplaceState(u,u.state,null),lt(i,a,u,c),ct(),u.state=i.memoizedState),typeof u.componentDidMount=="function"&&(i.flags|=4194308),a=!0}else if(e===null){u=i.stateNode;var S=i.memoizedProps,M=ja(r,S);u.props=M;var K=u.context,te=r.contextType;m=Un,typeof te=="object"&&te!==null&&(m=ri(te));var ne=r.getDerivedStateFromProps;te=typeof ne=="function"||typeof u.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,te||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(S||K!==m)&&dp(i,u,a,m),Ne=!1;var $=i.memoizedState;u.state=$,lt(i,a,u,c),ct(),K=i.memoizedState,S||$!==K||Ne?(typeof ne=="function"&&(Ju(i,r,ne,a),K=i.memoizedState),(M=Ne||up(i,r,M,a,$,K,m))?(te||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(i.flags|=4194308)):(typeof u.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=K),u.props=a,u.state=K,u.context=m,a=M):(typeof u.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{u=i.stateNode,mt(e,i),m=i.memoizedProps,te=ja(r,m),u.props=te,ne=i.pendingProps,$=u.context,K=r.contextType,M=Un,typeof K=="object"&&K!==null&&(M=ri(K)),S=r.getDerivedStateFromProps,(K=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==ne||$!==M)&&dp(i,u,a,M),Ne=!1,$=i.memoizedState,u.state=$,lt(i,a,u,c),ct();var Q=i.memoizedState;m!==ne||$!==Q||Ne||e!==null&&e.dependencies!==null&&Ra(e.dependencies)?(typeof S=="function"&&(Ju(i,r,S,a),Q=i.memoizedState),(te=Ne||up(i,r,te,a,$,Q,M)||e!==null&&e.dependencies!==null&&Ra(e.dependencies))?(K||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,Q,M),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,Q,M)),typeof u.componentDidUpdate=="function"&&(i.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&$===e.memoizedState||(i.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&$===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=Q),u.props=a,u.state=Q,u.context=M,a=te):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&$===e.memoizedState||(i.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&$===e.memoizedState||(i.flags|=1024),a=!1)}return u=a,bh(e,i),a=(i.flags&128)!==0,u||a?(u=i.stateNode,r=a&&typeof r.getDerivedStateFromError!="function"?null:u.render(),i.flags|=1,e!==null&&a?(i.child=Le(i,e.child,null,c),i.child=Le(i,null,r,c)):ji(e,i,r,c),i.memoizedState=u.state,e=i.child):e=ln(e,i,c),e}function Tp(e,i,r,a){return Qr(),i.flags|=256,ji(e,i,r,a),i.child}var rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nd(e){return{baseLanes:e,cachePool:hh()}}function ad(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=Rs),e}function kp(e,i,r){var a=i.pendingProps,c=!1,u=(i.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),m&&(c=!0,i.flags&=-129),m=(i.flags&32)!==0,i.flags&=-33,e===null){if(Qe){if(c?ns(i):zt(),(e=dt)?(e=zg(e,ps),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Mr!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},r=ah(e),r.return=i,i.child=r,_i=i,dt=null)):e=null,e===null)throw Or(i);return qd(e)?i.lanes=32:i.lanes=536870912,null}var S=a.children;return a=a.fallback,c?(zt(),c=i.mode,S=yh({mode:"hidden",children:S},c),a=or(a,c,r,null),S.return=i,a.return=i,S.sibling=a,i.child=S,a=i.child,a.memoizedState=nd(r),a.childLanes=ad(e,m,r),i.memoizedState=rd,Ho(null,a)):(ns(i),ld(i,S))}var M=e.memoizedState;if(M!==null&&(S=M.dehydrated,S!==null)){if(u)i.flags&256?(ns(i),i.flags&=-257,i=od(e,i,r)):i.memoizedState!==null?(zt(),i.child=e.child,i.flags|=128,i=null):(zt(),S=a.fallback,c=i.mode,a=yh({mode:"visible",children:a.children},c),S=or(S,c,r,null),S.flags|=2,a.return=i,S.return=i,a.sibling=S,i.child=a,Le(i,e.child,null,r),a=i.child,a.memoizedState=nd(r),a.childLanes=ad(e,m,r),i.memoizedState=rd,i=Ho(null,a));else if(ns(i),qd(S)){if(m=S.nextSibling&&S.nextSibling.dataset,m)var K=m.dgst;m=K,a=Error(l(419)),a.stack="",a.digest=m,Oa({value:a,source:null,stack:null}),i=od(e,i,r)}else if(ai||Br(e,i,r,!1),m=(r&e.childLanes)!==0,ai||m){if(m=Tt,m!==null&&(a=hs(m,r),a!==0&&a!==M.retryLane))throw M.retryLane=a,Ui(e,a),Ss(m,e,a),id;Id(S)||Dh(),i=od(e,i,r)}else Id(S)?(i.flags|=192,i.child=e.child,i=null):(e=M.treeContext,dt=Xs(S.nextSibling),_i=i,Qe=!0,hr=null,ps=!1,e!==null&&xo(i,e),i=ld(i,a.children),i.flags|=4096);return i}return c?(zt(),S=a.fallback,c=i.mode,M=e.child,K=M.sibling,a=lr(M,{mode:"hidden",children:a.children}),a.subtreeFlags=M.subtreeFlags&65011712,K!==null?S=lr(K,S):(S=or(S,c,r,null),S.flags|=2),S.return=i,a.return=i,a.sibling=S,i.child=a,Ho(null,a),a=i.child,S=e.child.memoizedState,S===null?S=nd(r):(c=S.cachePool,c!==null?(M=$t._currentValue,c=c.parent!==M?{parent:M,pool:M}:c):c=hh(),S={baseLanes:S.baseLanes|r,cachePool:c}),a.memoizedState=S,a.childLanes=ad(e,m,r),i.memoizedState=rd,Ho(e.child,a)):(ns(i),r=e.child,e=r.sibling,r=lr(r,{mode:"visible",children:a.children}),r.return=i,r.sibling=null,e!==null&&(m=i.deletions,m===null?(i.deletions=[e],i.flags|=16):m.push(e)),i.child=r,i.memoizedState=null,r)}function ld(e,i){return i=yh({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function yh(e,i){return e=is(22,e,null,i),e.lanes=0,e}function od(e,i,r){return Le(i,e.child,null,r),e=ld(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Dp(e,i,r){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),ko(e.return,i,r)}function cd(e,i,r,a,c,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c,treeForkCount:u}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=r,m.tailMode=c,m.treeForkCount=u)}function Mp(e,i,r){var a=i.pendingProps,c=a.revealOrder,u=a.tail;a=a.children;var m=bt.current,S=(m&2)!==0;if(S?(m=m&1|2,i.flags|=128):m&=1,_e(bt,m),ji(e,i,a,r),a=Qe?ka:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dp(e,r,i);else if(e.tag===19)Dp(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(r=i.child,c=null;r!==null;)e=r.alternate,e!==null&&sn(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=i.child,i.child=null):(c=r.sibling,r.sibling=null),cd(i,!1,c,r,u,a);break;case"backwards":case"unstable_legacy-backwards":for(r=null,c=i.child,i.child=null;c!==null;){if(e=c.alternate,e!==null&&sn(e)===null){i.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}cd(i,!0,r,null,u,a);break;case"together":cd(i,!1,null,null,void 0,a);break;default:i.memoizedState=null}return i.child}function ln(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),Vn|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(Br(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(l(153));if(i.child!==null){for(e=i.child,r=lr(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=lr(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function hd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Ra(e)))}function Ob(e,i,r){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),Nr(i,$t,e.memoizedState.cache),Qr();break;case 27:case 5:De(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:Nr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xt(i),null;break;case 13:var a=i.memoizedState;if(a!==null)return a.dehydrated!==null?(ns(i),i.flags|=128,null):(r&i.child.childLanes)!==0?kp(e,i,r):(ns(i),e=ln(e,i,r),e!==null?e.sibling:null);ns(i);break;case 19:var c=(e.flags&128)!==0;if(a=(r&i.childLanes)!==0,a||(Br(e,i,r,!1),a=(r&i.childLanes)!==0),c){if(a)return Mp(e,i,r);i.flags|=128}if(c=i.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_e(bt,bt.current),a)break;return null;case 22:return i.lanes=0,wp(e,i,r,i.pendingProps);case 24:Nr(i,$t,e.memoizedState.cache)}return ln(e,i,r)}function Op(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)ai=!0;else{if(!hd(e,r)&&(i.flags&128)===0)return ai=!1,Ob(e,i,r);ai=(e.flags&131072)!==0}else ai=!1,Qe&&(i.flags&1048576)!==0&&Da(i,ka,i.index);switch(i.lanes=0,i.tag){case 16:e:{var a=i.pendingProps;if(e=z(i.elementType),i.type=e,typeof e=="function")So(e)?(a=ja(e,a),i.tag=1,i=Ap(null,i,e,a,r)):(i.tag=0,i=sd(null,i,e,a,r));else{if(e!=null){var c=e.$$typeof;if(c===j){i.tag=11,i=bp(null,i,e,a,r);break e}else if(c===G){i.tag=14,i=yp(null,i,e,a,r);break e}}throw i=fe(e)||e,Error(l(306,i,""))}}return i;case 0:return sd(e,i,i.type,i.pendingProps,r);case 1:return a=i.type,c=ja(a,i.pendingProps),Ap(e,i,a,c,r);case 3:e:{if(ce(i,i.stateNode.containerInfo),e===null)throw Error(l(387));a=i.pendingProps;var u=i.memoizedState;c=u.element,mt(e,i),lt(i,a,null,r);var m=i.memoizedState;if(a=m.cache,Nr(i,$t,a),a!==u.cache&&vl(i,[$t],r,!0),ct(),a=m.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:m.cache},i.updateQueue.baseState=u,i.memoizedState=u,i.flags&256){i=Tp(e,i,a,r);break e}else if(a!==c){c=Ei(Error(l(424)),i),Oa(c),i=Tp(e,i,a,r);break e}else for(e=i.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,dt=Xs(e.firstChild),_i=i,Qe=!0,hr=null,ps=!0,r=je(i,null,a,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qr(),a===c){i=ln(e,i,r);break e}ji(e,i,a,r)}i=i.child}return i;case 26:return bh(e,i),e===null?(r=qg(i.type,null,i.pendingProps,null))?i.memoizedState=r:Qe||(r=i.type,e=i.pendingProps,a=zh(ye.current).createElement(r),a[Wt]=i,a[Pi]=e,Fi(a,r,e),Mt(a),i.stateNode=a):i.memoizedState=qg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return De(i),e===null&&Qe&&(a=i.stateNode=jg(i.type,i.pendingProps,ye.current),_i=i,ps=!0,c=dt,ta(i.type)?(Pd=c,dt=Xs(a.firstChild)):dt=c),ji(e,i,i.pendingProps.children,r),bh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Qe&&((c=a=dt)&&(a=ly(a,i.type,i.pendingProps,ps),a!==null?(i.stateNode=a,_i=i,dt=Xs(a.firstChild),ps=!1,c=!0):c=!1),c||Or(i)),De(i),c=i.type,u=i.pendingProps,m=e!==null?e.memoizedProps:null,a=u.children,Ud(c,u)?a=null:m!==null&&Ud(c,m)&&(i.flags|=32),i.memoizedState!==null&&(c=fr(e,i,dh,null,null,r),Qo._currentValue=c),bh(e,i),ji(e,i,a,r),i.child;case 6:return e===null&&Qe&&((e=r=dt)&&(r=oy(r,i.pendingProps,ps),r!==null?(i.stateNode=r,_i=i,dt=null,e=!0):e=!1),e||Or(i)),null;case 13:return kp(e,i,r);case 4:return ce(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Le(i,null,a,r):ji(e,i,a,r),i.child;case 11:return bp(e,i,i.type,i.pendingProps,r);case 7:return ji(e,i,i.pendingProps,r),i.child;case 8:return ji(e,i,i.pendingProps.children,r),i.child;case 12:return ji(e,i,i.pendingProps.children,r),i.child;case 10:return a=i.pendingProps,Nr(i,i.type,a.value),ji(e,i,a.children,r),i.child;case 9:return c=i.type._context,a=i.pendingProps.children,ss(i),c=ri(c),a=a(c),i.flags|=1,ji(e,i,a,r),i.child;case 14:return yp(e,i,i.type,i.pendingProps,r);case 15:return Sp(e,i,i.type,i.pendingProps,r);case 19:return Mp(e,i,r);case 31:return Mb(e,i,r);case 22:return wp(e,i,r,i.pendingProps);case 24:return ss(i),a=ri($t),e===null?(c=Kn(),c===null&&(c=Tt,u=dr(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=r),c=u),i.memoizedState={parent:a,cache:c},ft(i),Nr(i,$t,c)):((e.lanes&r)!==0&&(mt(e,i),lt(i,null,null,r),ct()),c=e.memoizedState,u=i.memoizedState,c.parent!==a?(c={parent:a,cache:a},i.memoizedState=c,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=c),Nr(i,$t,a)):(a=u.cache,Nr(i,$t,a),a!==c.cache&&vl(i,[$t],r,!0))),ji(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function on(e){e.flags|=4}function ud(e,i,r,a,c){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(rg())e.flags|=8192;else throw F=h,tn}else e.flags&=-16777217}function Rp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yg(i))if(rg())e.flags|=8192;else throw F=h,tn}function Sh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?yi():536870912,e.lanes|=i,kl|=i)}function Uo(e,i){if(!Qe)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ot(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(i)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,i}function Rb(e,i,r){var a=i.pendingProps;switch(Co(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Ot(i),null;case 3:return r=i.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ys($t),W(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(In(i)?on(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ao())),Ot(i),null;case 26:var c=i.type,u=i.memoizedState;return e===null?(on(i),u!==null?(Ot(i),Rp(i,u)):(Ot(i),ud(i,c,null,a,r))):u?u!==e.memoizedState?(on(i),Ot(i),Rp(i,u)):(Ot(i),i.flags&=-16777217):(e=e.memoizedProps,e!==a&&on(i),Ot(i),ud(i,c,e,a,r)),null;case 27:if(ze(i),r=ye.current,c=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&on(i);else{if(!a){if(i.stateNode===null)throw Error(l(166));return Ot(i),null}e=le.current,In(i)?Fn(i):(e=jg(c,a,r),i.stateNode=e,on(i))}return Ot(i),null;case 5:if(ze(i),c=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==a&&on(i);else{if(!a){if(i.stateNode===null)throw Error(l(166));return Ot(i),null}if(u=le.current,In(i))Fn(i);else{var m=zh(ye.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof a.is=="string"?m.createElement("select",{is:a.is}):m.createElement("select"),a.multiple?u.multiple=!0:a.size&&(u.size=a.size);break;default:u=typeof a.is=="string"?m.createElement(c,{is:a.is}):m.createElement(c)}}u[Wt]=i,u[Pi]=a;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=u;e:switch(Fi(u,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&on(i)}}return Ot(i),ud(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,r),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==a&&on(i);else{if(typeof a!="string"&&i.stateNode===null)throw Error(l(166));if(e=ye.current,In(i)){if(e=i.stateNode,r=i.memoizedProps,a=null,c=_i,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}e[Wt]=i,e=!!(e.nodeValue===r||a!==null&&a.suppressHydrationWarning===!0||kg(e.nodeValue,r)),e||Or(i,!0)}else e=zh(e).createTextNode(a),e[Wt]=i,i.stateNode=e}return Ot(i),null;case 31:if(r=i.memoizedState,e===null||e.memoizedState!==null){if(a=In(i),r!==null){if(e===null){if(!a)throw Error(l(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Wt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),e=!1}else r=Ao(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return i.flags&256?(Dt(i),i):(Dt(i),null);if((i.flags&128)!==0)throw Error(l(558))}return Ot(i),null;case 13:if(a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=In(i),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=i.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[Wt]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),c=!1}else c=Ao(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return i.flags&256?(Dt(i),i):(Dt(i),null)}return Dt(i),(i.flags&128)!==0?(i.lanes=r,i):(r=a!==null,e=e!==null&&e.memoizedState!==null,r&&(a=i.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==c&&(a.flags|=2048)),r!==e&&r&&(i.child.flags|=8192),Sh(i,i.updateQueue),Ot(i),null);case 4:return W(),e===null&&Nd(i.stateNode.containerInfo),Ot(i),null;case 10:return Ys(i.type),Ot(i),null;case 19:if(V(bt),a=i.memoizedState,a===null)return Ot(i),null;if(c=(i.flags&128)!==0,u=a.rendering,u===null)if(c)Uo(a,!1);else{if(Gt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(u=sn(e),u!==null){for(i.flags|=128,Uo(a,!1),e=u.updateQueue,i.updateQueue=e,Sh(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)nh(r,e),r=r.sibling;return _e(bt,bt.current&1|2),Qe&&cr(i,a.treeForkCount),i.child}e=e.sibling}a.tail!==null&&Ct()>Ah&&(i.flags|=128,c=!0,Uo(a,!1),i.lanes=4194304)}else{if(!c)if(e=sn(u),e!==null){if(i.flags|=128,c=!0,e=e.updateQueue,i.updateQueue=e,Sh(i,e),Uo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Qe)return Ot(i),null}else 2*Ct()-a.renderingStartTime>Ah&&r!==536870912&&(i.flags|=128,c=!0,Uo(a,!1),i.lanes=4194304);a.isBackwards?(u.sibling=i.child,i.child=u):(e=a.last,e!==null?e.sibling=u:i.child=u,a.last=u)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ct(),e.sibling=null,r=bt.current,_e(bt,c?r&1|2:r&1),Qe&&cr(i,a.treeForkCount),e):(Ot(i),null);case 22:case 23:return Dt(i),kt(),a=i.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(i.flags|=8192):a&&(i.flags|=8192),a?(r&536870912)!==0&&(i.flags&128)===0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),r=i.updateQueue,r!==null&&Sh(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048),e!==null&&V(Lr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Ys($t),Ot(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function Nb(e,i){switch(Co(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ys($t),W(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return ze(i),null;case 31:if(i.memoizedState!==null){if(Dt(i),i.alternate===null)throw Error(l(340));Qr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Dt(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(l(340));Qr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(bt),null;case 4:return W(),null;case 10:return Ys(i.type),null;case 22:case 23:return Dt(i),kt(),e!==null&&V(Lr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ys($t),null;case 25:return null;default:return null}}function Np(e,i){switch(Co(i),i.tag){case 3:Ys($t),W();break;case 26:case 27:case 5:ze(i);break;case 4:W();break;case 31:i.memoizedState!==null&&Dt(i);break;case 13:Dt(i);break;case 19:V(bt);break;case 10:Ys(i.type);break;case 22:case 23:Dt(i),kt(),e!==null&&V(Lr);break;case 24:Ys($t)}}function jo(e,i){try{var r=i.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var c=a.next;r=c;do{if((r.tag&e)===e){a=void 0;var u=r.create,m=r.inst;a=u(),m.destroy=a}r=r.next}while(r!==c)}}catch(S){wt(i,i.return,S)}}function $n(e,i,r){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var u=c.next;a=u;do{if((a.tag&e)===e){var m=a.inst,S=m.destroy;if(S!==void 0){m.destroy=void 0,c=i;var M=r,K=S;try{K()}catch(te){wt(c,M,te)}}}a=a.next}while(a!==u)}}catch(te){wt(i,i.return,te)}}function Bp(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{Wi(i,r)}catch(a){wt(e,e.return,a)}}}function Lp(e,i,r){r.props=ja(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(a){wt(e,i,a)}}function Fo(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof r=="function"?e.refCleanup=r(a):r.current=a}}catch(c){wt(e,i,c)}}function Hr(e,i){var r=e.ref,a=e.refCleanup;if(r!==null)if(typeof a=="function")try{a()}catch(c){wt(e,i,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){wt(e,i,c)}else r.current=null}function zp(e){var i=e.type,r=e.memoizedProps,a=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&a.focus();break e;case"img":r.src?a.src=r.src:r.srcSet&&(a.srcset=r.srcSet)}}catch(c){wt(e,e.return,c)}}function dd(e,i,r){try{var a=e.stateNode;ty(a,e.type,r,i),a[Pi]=i}catch(c){wt(e,e.return,c)}}function Hp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ta(e.type)||e.tag===4}function fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ta(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _d(e,i,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=wi));else if(a!==4&&(a===27&&ta(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(_d(e,i,r),e=e.sibling;e!==null;)_d(e,i,r),e=e.sibling}function wh(e,i,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(a!==4&&(a===27&&ta(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(wh(e,i,r),e=e.sibling;e!==null;)wh(e,i,r),e=e.sibling}function Up(e){var i=e.stateNode,r=e.memoizedProps;try{for(var a=e.type,c=i.attributes;c.length;)i.removeAttributeNode(c[0]);Fi(i,a,r),i[Wt]=e,i[Pi]=r}catch(u){wt(e,e.return,u)}}var cn=!1,li=!1,pd=!1,jp=typeof WeakSet=="function"?WeakSet:Set,ki=null;function Bb(e,i){if(e=e.containerInfo,zd=Ph,e=oo(e),co(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var m=0,S=-1,M=-1,K=0,te=0,ne=e,$=null;t:for(;;){for(var Q;ne!==r||c!==0&&ne.nodeType!==3||(S=m+c),ne!==u||a!==0&&ne.nodeType!==3||(M=m+a),ne.nodeType===3&&(m+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)$=ne,ne=Q;for(;;){if(ne===e)break t;if($===r&&++K===c&&(S=m),$===u&&++te===a&&(M=m),(Q=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=Q}r=S===-1||M===-1?null:{start:S,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(Hd={focusedElem:e,selectionRange:r},Ph=!1,ki=i;ki!==null;)if(i=ki,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,ki=e;else for(;ki!==null;){switch(i=ki,u=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)c=e[r],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,r=i,c=u.memoizedProps,u=u.memoizedState,a=r.stateNode;try{var ke=ja(r.type,c);e=a.getSnapshotBeforeUpdate(ke,u),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){wt(r,r.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)Fd(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=i.sibling,e!==null){e.return=i.return,ki=e;break}ki=i.return}}function Fp(e,i,r){var a=r.flags;switch(r.tag){case 0:case 11:case 15:un(e,r),a&4&&jo(5,r);break;case 1:if(un(e,r),a&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(m){wt(r,r.return,m)}else{var c=ja(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(c,i,e.__reactInternalSnapshotBeforeUpdate)}catch(m){wt(r,r.return,m)}}a&64&&Bp(r),a&512&&Fo(r,r.return);break;case 3:if(un(e,r),a&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Wi(e,i)}catch(m){wt(r,r.return,m)}}break;case 27:i===null&&a&4&&Up(r);case 26:case 5:un(e,r),i===null&&a&4&&zp(r),a&512&&Fo(r,r.return);break;case 12:un(e,r);break;case 31:un(e,r),a&4&&Pp(e,r);break;case 13:un(e,r),a&4&&Zp(e,r),a&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Pb.bind(null,r),cy(e,r))));break;case 22:if(a=r.memoizedState!==null||cn,!a){i=i!==null&&i.memoizedState!==null||li,c=cn;var u=li;cn=a,(li=i)&&!u?dn(e,r,(r.subtreeFlags&8772)!==0):un(e,r),cn=c,li=u}break;case 30:break;default:un(e,r)}}function Ip(e){var i=e.alternate;i!==null&&(e.alternate=null,Ip(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Li(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jt=null,ms=!1;function hn(e,i,r){for(r=r.child;r!==null;)qp(e,i,r),r=r.sibling}function qp(e,i,r){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(Hs,r)}catch{}switch(r.tag){case 26:li||Hr(r,i),hn(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:li||Hr(r,i);var a=jt,c=ms;ta(r.type)&&(jt=r.stateNode,ms=!1),hn(e,i,r),Xo(r.stateNode),jt=a,ms=c;break;case 5:li||Hr(r,i);case 6:if(a=jt,c=ms,jt=null,hn(e,i,r),jt=a,ms=c,jt!==null)if(ms)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(r.stateNode)}catch(u){wt(r,i,u)}else try{jt.removeChild(r.stateNode)}catch(u){wt(r,i,u)}break;case 18:jt!==null&&(ms?(e=jt,Bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),zl(e)):Bg(jt,r.stateNode));break;case 4:a=jt,c=ms,jt=r.stateNode.containerInfo,ms=!0,hn(e,i,r),jt=a,ms=c;break;case 0:case 11:case 14:case 15:$n(2,r,i),li||$n(4,r,i),hn(e,i,r);break;case 1:li||(Hr(r,i),a=r.stateNode,typeof a.componentWillUnmount=="function"&&Lp(r,i,a)),hn(e,i,r);break;case 21:hn(e,i,r);break;case 22:li=(a=li)||r.memoizedState!==null,hn(e,i,r),li=a;break;default:hn(e,i,r)}}function Pp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zl(e)}catch(r){wt(i,i.return,r)}}}function Zp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zl(e)}catch(r){wt(i,i.return,r)}}function Lb(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new jp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new jp),i;default:throw Error(l(435,e.tag))}}function Ch(e,i){var r=Lb(e);i.forEach(function(a){if(!r.has(a)){r.add(a);var c=Zb.bind(null,e,a);a.then(c,c)}})}function vs(e,i){var r=i.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a],u=e,m=i,S=m;e:for(;S!==null;){switch(S.tag){case 27:if(ta(S.type)){jt=S.stateNode,ms=!1;break e}break;case 5:jt=S.stateNode,ms=!1;break e;case 3:case 4:jt=S.stateNode.containerInfo,ms=!0;break e}S=S.return}if(jt===null)throw Error(l(160));qp(u,m,c),jt=null,ms=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Kp(i,e),i=i.sibling}var _r=null;function Kp(e,i){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vs(i,e),bs(e),a&4&&($n(3,e,e.return),jo(3,e),$n(5,e,e.return));break;case 1:vs(i,e),bs(e),a&512&&(li||r===null||Hr(r,r.return)),a&64&&cn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?a:r.concat(a))));break;case 26:var c=_r;if(vs(i,e),bs(e),a&512&&(li||r===null||Hr(r,r.return)),a&4){var u=r!==null?r.memoizedState:null;if(a=e.memoizedState,r===null)if(a===null)if(e.stateNode===null){e:{a=e.type,r=e.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":u=c.getElementsByTagName("title")[0],(!u||u[fi]||u[Wt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(a),c.head.insertBefore(u,c.querySelector("head > title"))),Fi(u,a,r),u[Wt]=e,Mt(u),a=u;break e;case"link":var m=Kg("link","href",c).get(a+(r.href||""));if(m){for(var S=0;S<m.length;S++)if(u=m[S],u.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&u.getAttribute("rel")===(r.rel==null?null:r.rel)&&u.getAttribute("title")===(r.title==null?null:r.title)&&u.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){m.splice(S,1);break t}}u=c.createElement(a),Fi(u,a,r),c.head.appendChild(u);break;case"meta":if(m=Kg("meta","content",c).get(a+(r.content||""))){for(S=0;S<m.length;S++)if(u=m[S],u.getAttribute("content")===(r.content==null?null:""+r.content)&&u.getAttribute("name")===(r.name==null?null:r.name)&&u.getAttribute("property")===(r.property==null?null:r.property)&&u.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&u.getAttribute("charset")===(r.charSet==null?null:r.charSet)){m.splice(S,1);break t}}u=c.createElement(a),Fi(u,a,r),c.head.appendChild(u);break;default:throw Error(l(468,a))}u[Wt]=e,Mt(u),a=u}e.stateNode=a}else Wg(c,e.type,e.stateNode);else e.stateNode=Zg(c,a,e.memoizedProps);else u!==a?(u===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):u.count--,a===null?Wg(c,e.type,e.stateNode):Zg(c,a,e.memoizedProps)):a===null&&e.stateNode!==null&&dd(e,e.memoizedProps,r.memoizedProps)}break;case 27:vs(i,e),bs(e),a&512&&(li||r===null||Hr(r,r.return)),r!==null&&a&4&&dd(e,e.memoizedProps,r.memoizedProps);break;case 5:if(vs(i,e),bs(e),a&512&&(li||r===null||Hr(r,r.return)),e.flags&32){c=e.stateNode;try{ks(c,"")}catch(ke){wt(e,e.return,ke)}}a&4&&e.stateNode!=null&&(c=e.memoizedProps,dd(e,c,r!==null?r.memoizedProps:c)),a&1024&&(pd=!0);break;case 6:if(vs(i,e),bs(e),a&4){if(e.stateNode===null)throw Error(l(162));a=e.memoizedProps,r=e.stateNode;try{r.nodeValue=a}catch(ke){wt(e,e.return,ke)}}break;case 3:if(jh=null,c=_r,_r=Hh(i.containerInfo),vs(i,e),_r=c,bs(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{zl(i.containerInfo)}catch(ke){wt(e,e.return,ke)}pd&&(pd=!1,Wp(e));break;case 4:a=_r,_r=Hh(e.stateNode.containerInfo),vs(i,e),bs(e),_r=a;break;case 12:vs(i,e),bs(e);break;case 31:vs(i,e),bs(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ch(e,a)));break;case 13:vs(i,e),bs(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Eh=Ct()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ch(e,a)));break;case 22:c=e.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,K=cn,te=li;if(cn=K||c,li=te||M,vs(i,e),li=te,cn=K,bs(e),a&8192)e:for(i=e.stateNode,i._visibility=c?i._visibility&-2:i._visibility|1,c&&(r===null||M||cn||li||Fa(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){M=r=i;try{if(u=M.stateNode,c)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{S=M.stateNode;var ne=M.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ke){wt(M,M.return,ke)}}}else if(i.tag===6){if(r===null){M=i;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(ke){wt(M,M.return,ke)}}}else if(i.tag===18){if(r===null){M=i;try{var Q=M.stateNode;c?Lg(Q,!0):Lg(M.stateNode,!1)}catch(ke){wt(M,M.return,ke)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}a&4&&(a=e.updateQueue,a!==null&&(r=a.retryQueue,r!==null&&(a.retryQueue=null,Ch(e,r))));break;case 19:vs(i,e),bs(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ch(e,a)));break;case 30:break;case 21:break;default:vs(i,e),bs(e)}}function bs(e){var i=e.flags;if(i&2){try{for(var r,a=e.return;a!==null;){if(Hp(a)){r=a;break}a=a.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var c=r.stateNode,u=fd(e);wh(e,u,c);break;case 5:var m=r.stateNode;r.flags&32&&(ks(m,""),r.flags&=-33);var S=fd(e);wh(e,S,m);break;case 3:case 4:var M=r.stateNode.containerInfo,K=fd(e);_d(e,K,M);break;default:throw Error(l(161))}}catch(te){wt(e,e.return,te)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Wp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Wp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function un(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Fp(e,i.alternate,i),i=i.sibling}function Fa(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:$n(4,i,i.return),Fa(i);break;case 1:Hr(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Lp(i,i.return,r),Fa(i);break;case 27:Xo(i.stateNode);case 26:case 5:Hr(i,i.return),Fa(i);break;case 22:i.memoizedState===null&&Fa(i);break;case 30:Fa(i);break;default:Fa(i)}e=e.sibling}}function dn(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var a=i.alternate,c=e,u=i,m=u.flags;switch(u.tag){case 0:case 11:case 15:dn(c,u,r),jo(4,u);break;case 1:if(dn(c,u,r),a=u,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(K){wt(a,a.return,K)}if(a=u,c=a.updateQueue,c!==null){var S=a.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)Bt(M[c],S)}catch(K){wt(a,a.return,K)}}r&&m&64&&Bp(u),Fo(u,u.return);break;case 27:Up(u);case 26:case 5:dn(c,u,r),r&&a===null&&m&4&&zp(u),Fo(u,u.return);break;case 12:dn(c,u,r);break;case 31:dn(c,u,r),r&&m&4&&Pp(c,u);break;case 13:dn(c,u,r),r&&m&4&&Zp(c,u);break;case 22:u.memoizedState===null&&dn(c,u,r),Fo(u,u.return);break;case 30:break;default:dn(c,u,r)}i=i.sibling}}function gd(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&gs(r))}function md(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gs(e))}function pr(e,i,r,a){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yp(e,i,r,a),i=i.sibling}function Yp(e,i,r,a){var c=i.flags;switch(i.tag){case 0:case 11:case 15:pr(e,i,r,a),c&2048&&jo(9,i);break;case 1:pr(e,i,r,a);break;case 3:pr(e,i,r,a),c&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&gs(e)));break;case 12:if(c&2048){pr(e,i,r,a),e=i.stateNode;try{var u=i.memoizedProps,m=u.id,S=u.onPostCommit;typeof S=="function"&&S(m,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){wt(i,i.return,M)}}else pr(e,i,r,a);break;case 31:pr(e,i,r,a);break;case 13:pr(e,i,r,a);break;case 23:break;case 22:u=i.stateNode,m=i.alternate,i.memoizedState!==null?u._visibility&2?pr(e,i,r,a):Io(e,i):u._visibility&2?pr(e,i,r,a):(u._visibility|=2,El(e,i,r,a,(i.subtreeFlags&10256)!==0||!1)),c&2048&&gd(m,i);break;case 24:pr(e,i,r,a),c&2048&&md(i.alternate,i);break;default:pr(e,i,r,a)}}function El(e,i,r,a,c){for(c=c&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var u=e,m=i,S=r,M=a,K=m.flags;switch(m.tag){case 0:case 11:case 15:El(u,m,S,M,c),jo(8,m);break;case 23:break;case 22:var te=m.stateNode;m.memoizedState!==null?te._visibility&2?El(u,m,S,M,c):Io(u,m):(te._visibility|=2,El(u,m,S,M,c)),c&&K&2048&&gd(m.alternate,m);break;case 24:El(u,m,S,M,c),c&&K&2048&&md(m.alternate,m);break;default:El(u,m,S,M,c)}i=i.sibling}}function Io(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,a=i,c=a.flags;switch(a.tag){case 22:Io(r,a),c&2048&&gd(a.alternate,a);break;case 24:Io(r,a),c&2048&&md(a.alternate,a);break;default:Io(r,a)}i=i.sibling}}var qo=8192;function Al(e,i,r){if(e.subtreeFlags&qo)for(e=e.child;e!==null;)$p(e,i,r),e=e.sibling}function $p(e,i,r){switch(e.tag){case 26:Al(e,i,r),e.flags&qo&&e.memoizedState!==null&&Sy(r,_r,e.memoizedState,e.memoizedProps);break;case 5:Al(e,i,r);break;case 3:case 4:var a=_r;_r=Hh(e.stateNode.containerInfo),Al(e,i,r),_r=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=qo,qo=16777216,Al(e,i,r),qo=a):Al(e,i,r));break;default:Al(e,i,r)}}function Xp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Po(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var a=i[r];ki=a,Gp(a,e)}Xp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Vp(e),e=e.sibling}function Vp(e){switch(e.tag){case 0:case 11:case 15:Po(e),e.flags&2048&&$n(9,e,e.return);break;case 3:Po(e);break;case 12:Po(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,xh(e)):Po(e);break;default:Po(e)}}function xh(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var a=i[r];ki=a,Gp(a,e)}Xp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:$n(8,i,i.return),xh(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,xh(i));break;default:xh(i)}e=e.sibling}}function Gp(e,i){for(;ki!==null;){var r=ki;switch(r.tag){case 0:case 11:case 15:$n(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var a=r.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:gs(r.memoizedState.cache)}if(a=r.child,a!==null)a.return=r,ki=a;else e:for(r=e;ki!==null;){a=ki;var c=a.sibling,u=a.return;if(Ip(a),a===r){ki=null;break e}if(c!==null){c.return=u,ki=c;break e}ki=u}}}var zb={getCacheForType:function(e){var i=ri($t),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r},cacheSignal:function(){return ri($t).controller.signal}},Hb=typeof WeakMap=="function"?WeakMap:Map,gt=0,Tt=null,it=null,rt=0,St=0,Os=null,Xn=!1,Tl=!1,vd=!1,fn=0,Gt=0,Vn=0,Ia=0,bd=0,Rs=0,kl=0,Zo=null,ys=null,yd=!1,Eh=0,Qp=0,Ah=1/0,Th=null,Gn=null,pi=0,Qn=null,Dl=null,_n=0,Sd=0,wd=null,Jp=null,Ko=0,Cd=null;function Ns(){return(gt&2)!==0&&rt!==0?rt&-rt:L.T!==null?Dd():pa()}function eg(){if(Rs===0)if((rt&536870912)===0||Qe){var e=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),Rs=e}else Rs=536870912;return e=Lt.current,e!==null&&(e.flags|=32),Rs}function Ss(e,i,r){(e===Tt&&(St===2||St===9)||e.cancelPendingCommit!==null)&&(Ml(e,0),Jn(e,rt,Rs,!1)),Wr(e,r),((gt&2)===0||e!==Tt)&&(e===Tt&&((gt&2)===0&&(Ia|=r),Gt===4&&Jn(e,rt,Rs,!1)),Ur(e))}function tg(e,i,r){if((gt&6)!==0)throw Error(l(327));var a=!r&&(i&127)===0&&(i&e.expiredLanes)===0||Bi(e,i),c=a?Fb(e,i):Ed(e,i,!0),u=a;do{if(c===0){Tl&&!a&&Jn(e,i,0,!1);break}else{if(r=e.current.alternate,u&&!Ub(r)){c=Ed(e,i,!1),u=!1;continue}if(c===2){if(u=i,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){i=m;e:{var S=e;c=Zo;var M=S.current.memoizedState.isDehydrated;if(M&&(Ml(S,m).flags|=256),m=Ed(S,m,!1),m!==2){if(vd&&!M){S.errorRecoveryDisabledLanes|=u,Ia|=u,c=4;break e}u=ys,ys=c,u!==null&&(ys===null?ys=u:ys.push.apply(ys,u))}c=m}if(u=!1,c!==2)continue}}if(c===1){Ml(e,0),Jn(e,i,0,!0);break}e:{switch(a=e,u=c,u){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Jn(a,i,Rs,!Xn);break e;case 2:ys=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(c=Eh+300-Ct(),10<c)){if(Jn(a,i,Rs,!Xn),bi(a,0,!0)!==0)break e;_n=i,a.timeoutHandle=Rg(ig.bind(null,a,r,ys,Th,yd,i,Rs,Ia,kl,Xn,u,"Throttled",-0,0),c);break e}ig(a,r,ys,Th,yd,i,Rs,Ia,kl,Xn,u,null,-0,0)}}break}while(!0);Ur(e)}function ig(e,i,r,a,c,u,m,S,M,K,te,ne,$,Q){if(e.timeoutHandle=-1,ne=i.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},$p(i,u,ne);var ke=(u&62914560)===u?Eh-Ct():(u&4194048)===u?Qp-Ct():0;if(ke=wy(ne,ke),ke!==null){_n=u,e.cancelPendingCommit=ke(hg.bind(null,e,i,u,r,a,c,m,S,M,te,ne,null,$,Q)),Jn(e,u,m,!K);return}}hg(e,i,u,r,a,c,m,S,M)}function Ub(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var a=0;a<r.length;a++){var c=r[a],u=c.getSnapshot;c=c.value;try{if(!Hi(u(),c))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Jn(e,i,r,a){i&=~bd,i&=~Ia,e.suspendedLanes|=i,e.pingedLanes&=~i,a&&(e.warmLanes|=i),a=e.expirationTimes;for(var c=i;0<c;){var u=31-Re(c),m=1<<u;a[u]=-1,c&=~m}r!==0&&Ts(e,r,i)}function kh(){return(gt&6)===0?(Wo(0),!1):!0}function xd(){if(it!==null){if(St===0)var e=it.return;else e=it,ur=Jr=null,Sl(e),ve=null,xe=0,e=it;for(;e!==null;)Np(e.alternate,e),e=e.return;it=null}}function Ml(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,ry(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),_n=0,xd(),Tt=e,it=r=lr(e.current,null),rt=i,St=0,Os=null,Xn=!1,Tl=Bi(e,i),vd=!1,kl=Rs=bd=Ia=Vn=Gt=0,ys=Zo=null,yd=!1,(i&8)!==0&&(i|=i&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=i;0<a;){var c=31-Re(a),u=1<<c;i|=e[c],a&=~u}return fn=i,dl(),r}function sg(e,i){Ke=null,L.H=zo,i===Wn||i===b?(i=ee(),St=3):i===tn?(i=ee(),St=4):St=i===id?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Os=i,it===null&&(Gt=1,mh(e,Ei(i,e.current)))}function rg(){var e=Lt.current;return e===null?!0:(rt&4194048)===rt?qt===null:(rt&62914560)===rt||(rt&536870912)!==0?e===qt:!1}function ng(){var e=L.H;return L.H=zo,e===null?zo:e}function ag(){var e=L.A;return L.A=zb,e}function Dh(){Gt=4,Xn||(rt&4194048)!==rt&&Lt.current!==null||(Tl=!0),(Vn&134217727)===0&&(Ia&134217727)===0||Tt===null||Jn(Tt,rt,Rs,!1)}function Ed(e,i,r){var a=gt;gt|=2;var c=ng(),u=ag();(Tt!==e||rt!==i)&&(Th=null,Ml(e,i)),i=!1;var m=Gt;e:do try{if(St!==0&&it!==null){var S=it,M=Os;switch(St){case 8:xd(),m=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(i=!0);var K=St;if(St=0,Os=null,Ol(e,S,M,K),r&&Tl){m=0;break e}break;default:K=St,St=0,Os=null,Ol(e,S,M,K)}}jb(),m=Gt;break}catch(te){sg(e,te)}while(!0);return i&&e.shellSuspendCounter++,ur=Jr=null,gt=a,L.H=c,L.A=u,it===null&&(Tt=null,rt=0,dl()),m}function jb(){for(;it!==null;)lg(it)}function Fb(e,i){var r=gt;gt|=2;var a=ng(),c=ag();Tt!==e||rt!==i?(Th=null,Ah=Ct()+500,Ml(e,i)):Tl=Bi(e,i);e:do try{if(St!==0&&it!==null){i=it;var u=Os;t:switch(St){case 1:St=0,Os=null,Ol(e,i,u,1);break;case 2:case 9:if(g(u)){St=0,Os=null,og(i);break}i=function(){St!==2&&St!==9||Tt!==e||(St=7),Ur(e)},u.then(i,i);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:g(u)?(St=0,Os=null,og(i)):(St=0,Os=null,Ol(e,i,u,7));break;case 5:var m=null;switch(it.tag){case 26:m=it.memoizedState;case 5:case 27:var S=it;if(m?Yg(m):S.stateNode.complete){St=0,Os=null;var M=S.sibling;if(M!==null)it=M;else{var K=S.return;K!==null?(it=K,Mh(K)):it=null}break t}}St=0,Os=null,Ol(e,i,u,5);break;case 6:St=0,Os=null,Ol(e,i,u,6);break;case 8:xd(),Gt=6;break e;default:throw Error(l(462))}}Ib();break}catch(te){sg(e,te)}while(!0);return ur=Jr=null,L.H=a,L.A=c,gt=r,it!==null?0:(Tt=null,rt=0,dl(),Gt)}function Ib(){for(;it!==null&&!hi();)lg(it)}function lg(e){var i=Op(e.alternate,e,fn);e.memoizedProps=e.pendingProps,i===null?Mh(e):it=i}function og(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=Ep(r,i,i.pendingProps,i.type,void 0,rt);break;case 11:i=Ep(r,i,i.pendingProps,i.type.render,i.ref,rt);break;case 5:Sl(i);default:Np(r,i),i=it=nh(i,fn),i=Op(r,i,fn)}e.memoizedProps=e.pendingProps,i===null?Mh(e):it=i}function Ol(e,i,r,a){ur=Jr=null,Sl(i),ve=null,xe=0;var c=i.return;try{if(Db(e,c,i,r,rt)){Gt=1,mh(e,Ei(r,e.current)),it=null;return}}catch(u){if(c!==null)throw it=c,u;Gt=1,mh(e,Ei(r,e.current)),it=null;return}i.flags&32768?(Qe||a===1?e=!0:Tl||(rt&536870912)!==0?e=!1:(Xn=e=!0,(a===2||a===9||a===3||a===6)&&(a=Lt.current,a!==null&&a.tag===13&&(a.flags|=16384))),cg(i,e)):Mh(i)}function Mh(e){var i=e;do{if((i.flags&32768)!==0){cg(i,Xn);return}e=i.return;var r=Rb(i.alternate,i,fn);if(r!==null){it=r;return}if(i=i.sibling,i!==null){it=i;return}it=i=e}while(i!==null);Gt===0&&(Gt=5)}function cg(e,i){do{var r=Nb(e.alternate,e);if(r!==null){r.flags&=32767,it=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){it=e;return}it=e=r}while(e!==null);Gt=6,it=null}function hg(e,i,r,a,c,u,m,S,M){e.cancelPendingCommit=null;do Oh();while(pi!==0);if((gt&6)!==0)throw Error(l(327));if(i!==null){if(i===e.current)throw Error(l(177));if(u=i.lanes|i.childLanes,u|=vo,js(e,r,u,m,S,M),e===Tt&&(it=Tt=null,rt=0),Dl=i,Qn=e,_n=r,Sd=u,wd=c,Jp=a,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Kb(mr,function(){return pg(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||a){a=L.T,L.T=null,c=J.p,J.p=2,m=gt,gt|=4;try{Bb(e,i,r)}finally{gt=m,J.p=c,L.T=a}}pi=1,ug(),dg(),fg()}}function ug(){if(pi===1){pi=0;var e=Qn,i=Dl,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var a=J.p;J.p=2;var c=gt;gt|=4;try{Kp(i,e);var u=Hd,m=oo(e.containerInfo),S=u.focusedElem,M=u.selectionRange;if(m!==S&&S&&S.ownerDocument&&lo(S.ownerDocument.documentElement,S)){if(M!==null&&co(S)){var K=M.start,te=M.end;if(te===void 0&&(te=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(te,S.value.length);else{var ne=S.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var Q=$.getSelection(),ke=S.textContent.length,Ue=Math.min(M.start,ke),Et=M.end===void 0?Ue:Math.min(M.end,ke);!Q.extend&&Ue>Et&&(m=Et,Et=Ue,Ue=m);var q=Qc(S,Ue),B=Qc(S,Et);if(q&&B&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==B.node||Q.focusOffset!==B.offset)){var Z=ne.createRange();Z.setStart(q.node,q.offset),Q.removeAllRanges(),Ue>Et?(Q.addRange(Z),Q.extend(B.node,B.offset)):(Z.setEnd(B.node,B.offset),Q.addRange(Z))}}}}for(ne=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ne.length;S++){var se=ne[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ph=!!zd,Hd=zd=null}finally{gt=c,J.p=a,L.T=r}}e.current=i,pi=2}}function dg(){if(pi===2){pi=0;var e=Qn,i=Dl,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var a=J.p;J.p=2;var c=gt;gt|=4;try{Fp(e,i.alternate,i)}finally{gt=c,J.p=a,L.T=r}}pi=3}}function fg(){if(pi===4||pi===3){pi=0,Es();var e=Qn,i=Dl,r=_n,a=Jp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?pi=5:(pi=0,Dl=Qn=null,_g(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Gn=null),wn(r),i=i.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(Hs,i,void 0,(i.current.flags&128)===128)}catch{}if(a!==null){i=L.T,c=J.p,J.p=2,L.T=null;try{for(var u=e.onRecoverableError,m=0;m<a.length;m++){var S=a[m];u(S.value,{componentStack:S.stack})}}finally{L.T=i,J.p=c}}(_n&3)!==0&&Oh(),Ur(e),c=e.pendingLanes,(r&261930)!==0&&(c&42)!==0?e===Cd?Ko++:(Ko=0,Cd=e):Ko=0,Wo(0)}}function _g(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,gs(i)))}function Oh(){return ug(),dg(),fg(),pg()}function pg(){if(pi!==5)return!1;var e=Qn,i=Sd;Sd=0;var r=wn(_n),a=L.T,c=J.p;try{J.p=32>r?32:r,L.T=null,r=wd,wd=null;var u=Qn,m=_n;if(pi=0,Dl=Qn=null,_n=0,(gt&6)!==0)throw Error(l(331));var S=gt;if(gt|=4,Vp(u.current),Yp(u,u.current,m,r),gt=S,Wo(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(Hs,u)}catch{}return!0}finally{J.p=c,L.T=a,_g(e,i)}}function gg(e,i,r){i=Ei(r,i),i=td(e.stateNode,i,2),e=Ve(e,i,2),e!==null&&(Wr(e,2),Ur(e))}function wt(e,i,r){if(e.tag===3)gg(e,e,r);else for(;i!==null;){if(i.tag===3){gg(i,e,r);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Gn===null||!Gn.has(a))){e=Ei(r,e),r=mp(2),a=Ve(i,r,2),a!==null&&(vp(r,a,i,e),Wr(a,2),Ur(a));break}}i=i.return}}function Ad(e,i,r){var a=e.pingCache;if(a===null){a=e.pingCache=new Hb;var c=new Set;a.set(i,c)}else c=a.get(i),c===void 0&&(c=new Set,a.set(i,c));c.has(r)||(vd=!0,c.add(r),e=qb.bind(null,e,i,r),i.then(e,e))}function qb(e,i,r){var a=e.pingCache;a!==null&&a.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Tt===e&&(rt&r)===r&&(Gt===4||Gt===3&&(rt&62914560)===rt&&300>Ct()-Eh?(gt&2)===0&&Ml(e,0):bd|=r,kl===rt&&(kl=0)),Ur(e)}function mg(e,i){i===0&&(i=yi()),e=Ui(e,i),e!==null&&(Wr(e,i),Ur(e))}function Pb(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),mg(e,r)}function Zb(e,i){var r=0;switch(e.tag){case 31:case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(l(314))}a!==null&&a.delete(i),mg(e,r)}function Kb(e,i){return He(e,i)}var Rh=null,Rl=null,Td=!1,Nh=!1,kd=!1,ea=0;function Ur(e){e!==Rl&&e.next===null&&(Rl===null?Rh=Rl=e:Rl=Rl.next=e),Nh=!0,Td||(Td=!0,Yb())}function Wo(e,i){if(!kd&&Nh){kd=!0;do for(var r=!1,a=Rh;a!==null;){if(e!==0){var c=a.pendingLanes;if(c===0)var u=0;else{var m=a.suspendedLanes,S=a.pingedLanes;u=(1<<31-Re(42|e)+1)-1,u&=c&~(m&~S),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(r=!0,Sg(a,u))}else u=rt,u=bi(a,a===Tt?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||Bi(a,u)||(r=!0,Sg(a,u));a=a.next}while(r);kd=!1}}function Wb(){vg()}function vg(){Nh=Td=!1;var e=0;ea!==0&&sy()&&(e=ea);for(var i=Ct(),r=null,a=Rh;a!==null;){var c=a.next,u=bg(a,i);u===0?(a.next=null,r===null?Rh=c:r.next=c,c===null&&(Rl=r)):(r=a,(e!==0||(u&3)!==0)&&(Nh=!0)),a=c}pi!==0&&pi!==5||Wo(e),ea!==0&&(ea=0)}function bg(e,i){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-Re(u),S=1<<m,M=c[m];M===-1?((S&r)===0||(S&a)!==0)&&(c[m]=Kr(S,i)):M<=i&&(e.expiredLanes|=S),u&=~S}if(i=Tt,r=rt,r=bi(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,r===0||e===i&&(St===2||St===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&at(a),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Bi(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(a!==null&&at(a),wn(r)){case 2:case 8:r=Sn;break;case 32:r=mr;break;case 268435456:r=br;break;default:r=mr}return a=yg.bind(null,e),r=He(r,a),e.callbackPriority=i,e.callbackNode=r,i}return a!==null&&a!==null&&at(a),e.callbackPriority=2,e.callbackNode=null,2}function yg(e,i){if(pi!==0&&pi!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Oh()&&e.callbackNode!==r)return null;var a=rt;return a=bi(e,e===Tt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(tg(e,a,i),bg(e,Ct()),e.callbackNode!=null&&e.callbackNode===r?yg.bind(null,e):null)}function Sg(e,i){if(Oh())return null;tg(e,i,!0)}function Yb(){ny(function(){(gt&6)!==0?He(It,Wb):vg()})}function Dd(){if(ea===0){var e=Pn;e===0&&(e=qi,qi<<=1,(qi&261888)===0&&(qi=256)),ea=e}return ea}function wg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:il(""+e)}function Cg(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function $b(e,i,r,a,c){if(i==="submit"&&r&&r.stateNode===c){var u=wg((c[Pi]||null).action),m=a.submitter;m&&(i=(i=m[Pi]||null)?wg(i.formAction):m.getAttribute("formAction"),i!==null&&(u=i,m=null));var S=new Mn("action","action",null,a,c);e.push({event:S,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ea!==0){var M=m?Cg(c,m):new FormData(c);Xu(r,{pending:!0,data:M,method:c.method,action:u},null,M)}}else typeof u=="function"&&(S.preventDefault(),M=m?Cg(c,m):new FormData(c),Xu(r,{pending:!0,data:M,method:c.method,action:u},u,M))},currentTarget:c}]})}}for(var Md=0;Md<mo.length;Md++){var Od=mo[Md],Xb=Od.toLowerCase(),Vb=Od[0].toUpperCase()+Od.slice(1);Ms(Xb,"on"+Vb)}Ms(Zs,"onAnimationEnd"),Ms(po,"onAnimationIteration"),Ms(eh,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(th,"onTransitionRun"),Ms(ih,"onTransitionStart"),Ms(sh,"onTransitionCancel"),Ms(go,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yo));function xg(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var u=void 0;if(i)for(var m=a.length-1;0<=m;m--){var S=a[m],M=S.instance,K=S.currentTarget;if(S=S.listener,M!==u&&c.isPropagationStopped())break e;u=S,c.currentTarget=K;try{u(c)}catch(te){Ta(te)}c.currentTarget=null,u=M}else for(m=0;m<a.length;m++){if(S=a[m],M=S.instance,K=S.currentTarget,S=S.listener,M!==u&&c.isPropagationStopped())break e;u=S,c.currentTarget=K;try{u(c)}catch(te){Ta(te)}c.currentTarget=null,u=M}}}}function st(e,i){var r=i[Pl];r===void 0&&(r=i[Pl]=new Set);var a=e+"__bubble";r.has(a)||(Eg(i,e,2,!1),r.add(a))}function Rd(e,i,r){var a=0;i&&(a|=4),Eg(r,e,a,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Nd(e){if(!e[Bh]){e[Bh]=!0,Zl.forEach(function(r){r!=="selectionchange"&&(Gb.has(r)||Rd(r,!1,e),Rd(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,Rd("selectionchange",!1,i))}}function Eg(e,i,r,a){switch(em(i)){case 2:var c=Ey;break;case 8:c=Ay;break;default:c=$d}r=c.bind(null,i,r,e),c=void 0,!Ql||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(i,r,{capture:!0,passive:c}):e.addEventListener(i,r,!0):c!==void 0?e.addEventListener(i,r,{passive:c}):e.addEventListener(i,r,!1)}function Bd(e,i,r,a,c){var u=a;if((i&1)===0&&(i&2)===0&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var S=a.stateNode.containerInfo;if(S===c)break;if(m===4)for(m=a.return;m!==null;){var M=m.tag;if((M===3||M===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;S!==null;){if(m=Yt(S),m===null)return;if(M=m.tag,M===5||M===6||M===26||M===27){a=u=m;continue e}S=S.parentNode}}a=a.return}Gl(function(){var K=u,te=sl(r),ne=[];e:{var $=rh.get(e);if($!==void 0){var Q=Mn,ke=e;switch(e){case"keypress":if(Vr(r)===0)break e;case"keydown":case"keyup":Q=Hc;break;case"focusin":ke="focus",Q=ll;break;case"focusout":ke="blur",Q=ll;break;case"beforeblur":case"afterblur":Q=ll;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Uc;break;case Zs:case po:case eh:Q=eo;break;case go:Q=Du;break;case"scroll":case"scrollend":Q=Sa;break;case"wheel":Q=Ou;break;case"copy":case"cut":case"paste":Q=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cl;break;case"toggle":case"beforetoggle":Q=Fc}var Ue=(i&4)!==0,Et=!Ue&&(e==="scroll"||e==="scrollend"),q=Ue?$!==null?$+"Capture":null:$;Ue=[];for(var B=K,Z;B!==null;){var se=B;if(Z=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Z===null||q===null||(se=An(B,q),se!=null&&Ue.push($o(B,se,Z))),Et)break;B=B.return}0<Ue.length&&($=new Q($,ke,null,r,te),ne.push({event:$,listeners:Ue}))}}if((i&7)===0){e:{if($=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",$&&r!==xn&&(ke=r.relatedTarget||r.fromElement)&&(Yt(ke)||ke[wr]))break e;if((Q||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(ke=r.relatedTarget||r.toElement,Q=K,ke=ke?Yt(ke):null,ke!==null&&(Et=d(ke),Ue=ke.tag,ke!==Et||Ue!==5&&Ue!==27&&Ue!==6)&&(ke=null)):(Q=null,ke=K),Q!==ke)){if(Ue=Dc,se="onMouseLeave",q="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=cl,se="onPointerLeave",q="onPointerEnter",B="pointer"),Et=Q==null?$:Fs(Q),Z=ke==null?$:Fs(ke),$=new Ue(se,B+"leave",Q,r,te),$.target=Et,$.relatedTarget=Z,se=null,Yt(te)===K&&(Ue=new Ue(q,B+"enter",ke,r,te),Ue.target=Z,Ue.relatedTarget=Et,se=Ue),Et=se,Q&&ke)t:{for(Ue=Qb,q=Q,B=ke,Z=0,se=q;se;se=Ue(se))Z++;se=0;for(var Oe=B;Oe;Oe=Ue(Oe))se++;for(;0<Z-se;)q=Ue(q),Z--;for(;0<se-Z;)B=Ue(B),se--;for(;Z--;){if(q===B||B!==null&&q===B.alternate){Ue=q;break t}q=Ue(q),B=Ue(B)}Ue=null}else Ue=null;Q!==null&&Ag(ne,$,Q,Ue,!1),ke!==null&&Et!==null&&Ag(ne,Et,ke,Ue,!0)}}e:{if($=K?Fs(K):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var _t=so;else if(fs($))if(Ea)_t=ul;else{_t=$c;var Me=Yc}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&ya(K.elementType)&&(_t=so):_t=Xc;if(_t&&(_t=_t(e,K))){io(ne,_t,r,te);break e}Me&&Me(e,$,K),e==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&va($,"number",$.value)}switch(Me=K?Fs(K):window,e){case"focusin":(fs(Me)||Me.contentEditable==="true")&&(zn=Me,ho=K,Aa=null);break;case"focusout":Aa=ho=zn=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,fo(ne,r,te);break;case"selectionchange":if(Uu)break;case"keydown":case"keyup":fo(ne,r,te)}var Xe;if(Er)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Nn?Pc(e,r)&&(nt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(nt="onCompositionStart");nt&&(xa&&r.locale!=="ko"&&(Nn||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Nn&&(Xe=kc()):(Ps=te,kn="value"in Ps?Ps.value:Ps.textContent,Nn=!0)),Me=Lh(K,nt),0<Me.length&&(nt=new to(nt,e,null,r,te),ne.push({event:nt,listeners:Me}),Xe?nt.data=Xe:(Xe=Zc(r),Xe!==null&&(nt.data=Xe)))),(Xe=Nu?Bu(e,r):Lu(e,r))&&(nt=Lh(K,"onBeforeInput"),0<nt.length&&(Me=new to("onBeforeInput","beforeinput",null,r,te),ne.push({event:Me,listeners:nt}),Me.data=Xe)),$b(ne,e,K,r,te)}xg(ne,i)})}function $o(e,i,r){return{instance:e,listener:i,currentTarget:r}}function Lh(e,i){for(var r=i+"Capture",a=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=An(e,r),c!=null&&a.unshift($o(e,c,u)),c=An(e,i),c!=null&&a.push($o(e,c,u))),e.tag===3)return a;e=e.return}return[]}function Qb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ag(e,i,r,a,c){for(var u=i._reactName,m=[];r!==null&&r!==a;){var S=r,M=S.alternate,K=S.stateNode;if(S=S.tag,M!==null&&M===a)break;S!==5&&S!==26&&S!==27||K===null||(M=K,c?(K=An(r,u),K!=null&&m.unshift($o(r,K,M))):c||(K=An(r,u),K!=null&&m.push($o(r,K,M)))),r=r.return}m.length!==0&&e.push({event:i,listeners:m})}var Jb=/\r\n?/g,ey=/\u0000|\uFFFD/g;function Tg(e){return(typeof e=="string"?e:""+e).replace(Jb,`
`).replace(ey,"")}function kg(e,i){return i=Tg(i),Tg(e)===i}function xt(e,i,r,a,c,u){switch(r){case"children":typeof a=="string"?i==="body"||i==="textarea"&&a===""||ks(e,a):(typeof a=="number"||typeof a=="bigint")&&i!=="body"&&ks(e,""+a);break;case"className":ma(e,"class",a);break;case"tabIndex":ma(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ma(e,r,a);break;case"style":Xr(e,a,u);break;case"data":if(i!=="object"){ma(e,"data",a);break}case"src":case"href":if(a===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=il(""+a),e.setAttribute(r,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(r==="formAction"?(i!=="input"&&xt(e,i,"name",c.name,c,null),xt(e,i,"formEncType",c.formEncType,c,null),xt(e,i,"formMethod",c.formMethod,c,null),xt(e,i,"formTarget",c.formTarget,c,null)):(xt(e,i,"encType",c.encType,c,null),xt(e,i,"method",c.method,c,null),xt(e,i,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(r);break}a=il(""+a),e.setAttribute(r,a);break;case"onClick":a!=null&&(e.onclick=wi);break;case"onScroll":a!=null&&st("scroll",e);break;case"onScrollEnd":a!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}r=il(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""+a):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":a===!0?e.setAttribute(r,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(r,a):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(r,a):e.removeAttribute(r);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(r):e.setAttribute(r,a);break;case"popover":st("beforetoggle",e),st("toggle",e),ga(e,"popover",a);break;case"xlinkActuate":Is(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Is(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Is(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Is(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Is(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Is(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Is(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Is(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Is(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ga(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Tc.get(r)||r,ga(e,r,a))}}function Ld(e,i,r,a,c,u){switch(r){case"style":Xr(e,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"children":typeof a=="string"?ks(e,a):(typeof a=="number"||typeof a=="bigint")&&ks(e,""+a);break;case"onScroll":a!=null&&st("scroll",e);break;case"onScrollEnd":a!=null&&st("scrollend",e);break;case"onClick":a!=null&&(e.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qa.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),i=r.slice(2,c?r.length-7:void 0),u=e[Pi]||null,u=u!=null?u[r]:null,typeof u=="function"&&e.removeEventListener(i,u,c),typeof a=="function")){typeof u!="function"&&u!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,a,c);break e}r in e?e[r]=a:a===!0?e.setAttribute(r,""):ga(e,r,a)}}}function Fi(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var a=!1,c=!1,u;for(u in r)if(r.hasOwnProperty(u)){var m=r[u];if(m!=null)switch(u){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:xt(e,i,u,m,r,null)}}c&&xt(e,i,"srcSet",r.srcSet,r,null),a&&xt(e,i,"src",r.src,r,null);return;case"input":st("invalid",e);var S=u=m=c=null,M=null,K=null;for(a in r)if(r.hasOwnProperty(a)){var te=r[a];if(te!=null)switch(a){case"name":c=te;break;case"type":m=te;break;case"checked":M=te;break;case"defaultChecked":K=te;break;case"value":u=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(l(137,i));break;default:xt(e,i,a,te,r,null)}}tl(e,u,S,M,K,m,c,!1);return;case"select":st("invalid",e),a=m=u=null;for(c in r)if(r.hasOwnProperty(c)&&(S=r[c],S!=null))switch(c){case"value":u=S;break;case"defaultValue":m=S;break;case"multiple":a=S;default:xt(e,i,c,S,r,null)}i=u,r=m,e.multiple=!!a,i!=null?zi(e,!!a,i,!1):r!=null&&zi(e,!!a,r,!0);return;case"textarea":st("invalid",e),u=c=a=null;for(m in r)if(r.hasOwnProperty(m)&&(S=r[m],S!=null))switch(m){case"value":a=S;break;case"defaultValue":c=S;break;case"children":u=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:xt(e,i,m,S,r,null)}ba(e,a,c,u);return;case"option":for(M in r)r.hasOwnProperty(M)&&(a=r[M],a!=null)&&(M==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":xt(e,i,M,a,r,null));return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(a=0;a<Yo.length;a++)st(Yo[a],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(a=r[K],a!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:xt(e,i,K,a,r,null)}return;default:if(ya(i)){for(te in r)r.hasOwnProperty(te)&&(a=r[te],a!==void 0&&Ld(e,i,te,a,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(a=r[S],a!=null&&xt(e,i,S,a,r,null))}function ty(e,i,r,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,m=null,S=null,M=null,K=null,te=null;for(Q in r){var ne=r[Q];if(r.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":M=ne;default:a.hasOwnProperty(Q)||xt(e,i,Q,null,a,ne)}}for(var $ in a){var Q=a[$];if(ne=r[$],a.hasOwnProperty($)&&(Q!=null||ne!=null))switch($){case"type":u=Q;break;case"name":c=Q;break;case"checked":K=Q;break;case"defaultChecked":te=Q;break;case"value":m=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(l(137,i));break;default:Q!==ne&&xt(e,i,$,Q,a,ne)}}Zi(e,m,S,M,K,te,u,c);return;case"select":Q=m=S=$=null;for(u in r)if(M=r[u],r.hasOwnProperty(u)&&M!=null)switch(u){case"value":break;case"multiple":Q=M;default:a.hasOwnProperty(u)||xt(e,i,u,null,a,M)}for(c in a)if(u=a[c],M=r[c],a.hasOwnProperty(c)&&(u!=null||M!=null))switch(c){case"value":$=u;break;case"defaultValue":S=u;break;case"multiple":m=u;default:u!==M&&xt(e,i,c,u,a,M)}i=S,r=m,a=Q,$!=null?zi(e,!!r,$,!1):!!a!=!!r&&(i!=null?zi(e,!!r,i,!0):zi(e,!!r,r?[]:"",!1));return;case"textarea":Q=$=null;for(S in r)if(c=r[S],r.hasOwnProperty(S)&&c!=null&&!a.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:xt(e,i,S,null,a,c)}for(m in a)if(c=a[m],u=r[m],a.hasOwnProperty(m)&&(c!=null||u!=null))switch(m){case"value":$=c;break;case"defaultValue":Q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==u&&xt(e,i,m,c,a,u)}Cr(e,$,Q);return;case"option":for(var ke in r)$=r[ke],r.hasOwnProperty(ke)&&$!=null&&!a.hasOwnProperty(ke)&&(ke==="selected"?e.selected=!1:xt(e,i,ke,null,a,$));for(M in a)$=a[M],Q=r[M],a.hasOwnProperty(M)&&$!==Q&&($!=null||Q!=null)&&(M==="selected"?e.selected=$&&typeof $!="function"&&typeof $!="symbol":xt(e,i,M,$,a,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in r)$=r[Ue],r.hasOwnProperty(Ue)&&$!=null&&!a.hasOwnProperty(Ue)&&xt(e,i,Ue,null,a,$);for(K in a)if($=a[K],Q=r[K],a.hasOwnProperty(K)&&$!==Q&&($!=null||Q!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,i));break;default:xt(e,i,K,$,a,Q)}return;default:if(ya(i)){for(var Et in r)$=r[Et],r.hasOwnProperty(Et)&&$!==void 0&&!a.hasOwnProperty(Et)&&Ld(e,i,Et,void 0,a,$);for(te in a)$=a[te],Q=r[te],!a.hasOwnProperty(te)||$===Q||$===void 0&&Q===void 0||Ld(e,i,te,$,a,Q);return}}for(var q in r)$=r[q],r.hasOwnProperty(q)&&$!=null&&!a.hasOwnProperty(q)&&xt(e,i,q,null,a,$);for(ne in a)$=a[ne],Q=r[ne],!a.hasOwnProperty(ne)||$===Q||$==null&&Q==null||xt(e,i,ne,$,a,Q)}function Dg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,r=performance.getEntriesByType("resource"),a=0;a<r.length;a++){var c=r[a],u=c.transferSize,m=c.initiatorType,S=c.duration;if(u&&S&&Dg(m)){for(m=0,S=c.responseEnd,a+=1;a<r.length;a++){var M=r[a],K=M.startTime;if(K>S)break;var te=M.transferSize,ne=M.initiatorType;te&&Dg(ne)&&(M=M.responseEnd,m+=te*(M<S?1:(S-K)/(M-K)))}if(--a,i+=8*(u+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zd=null,Hd=null;function zh(e){return e.nodeType===9?e:e.ownerDocument}function Mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Og(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Ud(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var jd=null;function sy(){var e=window.event;return e&&e.type==="popstate"?e===jd?!1:(jd=e,!0):(jd=null,!1)}var Rg=typeof setTimeout=="function"?setTimeout:void 0,ry=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,ny=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(e){return Ng.resolve(null).then(e).catch(ay)}:Rg;function ay(e){setTimeout(function(){throw e})}function ta(e){return e==="head"}function Bg(e,i){var r=i,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"||r==="/&"){if(a===0){e.removeChild(c),zl(i);return}a--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")a++;else if(r==="html")Xo(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Xo(r);for(var u=r.firstChild;u;){var m=u.nextSibling,S=u.nodeName;u[fi]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&u.rel.toLowerCase()==="stylesheet"||r.removeChild(u),u=m}}else r==="body"&&Xo(e.ownerDocument.body);r=c}while(r);zl(i)}function Lg(e,i){var r=e;e=0;do{var a=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=a}while(r)}function Fd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Fd(r),Li(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function ly(e,i,r,a){for(;e.nodeType===1;){var c=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[fi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Xs(e.nextSibling),e===null)break}return null}function oy(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Xs(e.nextSibling),e===null))return null;return e}function zg(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Xs(e.nextSibling),e===null))return null;return e}function Id(e){return e.data==="$?"||e.data==="$~"}function qd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function cy(e,i){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||r.readyState!=="loading")i();else{var a=function(){i(),r.removeEventListener("DOMContentLoaded",a)};r.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Xs(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Pd=null;function Hg(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(i===0)return Xs(e.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}e=e.nextSibling}return null}function Ug(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return e;i--}else r!=="/$"&&r!=="/&"||i++}e=e.previousSibling}return null}function jg(e,i,r){switch(i=zh(r),e){case"html":if(e=i.documentElement,!e)throw Error(l(452));return e;case"head":if(e=i.head,!e)throw Error(l(453));return e;case"body":if(e=i.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Xo(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Li(e)}var Vs=new Map,Fg=new Set;function Hh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=J.d;J.d={f:hy,r:uy,D:dy,C:fy,L:_y,m:py,X:my,S:gy,M:vy};function hy(){var e=pn.f(),i=kh();return e||i}function uy(e){var i=sr(e);i!==null&&i.tag===5&&i.type==="form"?sp(i):pn.r(e)}var Nl=typeof document>"u"?null:document;function Ig(e,i,r){var a=Nl;if(a&&typeof i=="string"&&i){var c=ii(i);c='link[rel="'+e+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Fg.has(c)||(Fg.add(c),e={rel:e,crossOrigin:r,href:i},a.querySelector(c)===null&&(i=a.createElement("link"),Fi(i,"link",e),Mt(i),a.head.appendChild(i)))}}function dy(e){pn.D(e),Ig("dns-prefetch",e,null)}function fy(e,i){pn.C(e,i),Ig("preconnect",e,i)}function _y(e,i,r){pn.L(e,i,r);var a=Nl;if(a&&e&&i){var c='link[rel="preload"][as="'+ii(i)+'"]';i==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+ii(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+ii(r.imageSizes)+'"]')):c+='[href="'+ii(e)+'"]';var u=c;switch(i){case"style":u=Bl(e);break;case"script":u=Ll(e)}Vs.has(u)||(e=x({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),Vs.set(u,e),a.querySelector(c)!==null||i==="style"&&a.querySelector(Vo(u))||i==="script"&&a.querySelector(Go(u))||(i=a.createElement("link"),Fi(i,"link",e),Mt(i),a.head.appendChild(i)))}}function py(e,i){pn.m(e,i);var r=Nl;if(r&&e){var a=i&&typeof i.as=="string"?i.as:"script",c='link[rel="modulepreload"][as="'+ii(a)+'"][href="'+ii(e)+'"]',u=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ll(e)}if(!Vs.has(u)&&(e=x({rel:"modulepreload",href:e},i),Vs.set(u,e),r.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Go(u)))return}a=r.createElement("link"),Fi(a,"link",e),Mt(a),r.head.appendChild(a)}}}function gy(e,i,r){pn.S(e,i,r);var a=Nl;if(a&&e){var c=us(a).hoistableStyles,u=Bl(e);i=i||"default";var m=c.get(u);if(!m){var S={loading:0,preload:null};if(m=a.querySelector(Vo(u)))S.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},r),(r=Vs.get(u))&&Zd(e,r);var M=m=a.createElement("link");Mt(M),Fi(M,"link",e),M._p=new Promise(function(K,te){M.onload=K,M.onerror=te}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Uh(m,i,a)}m={type:"stylesheet",instance:m,count:1,state:S},c.set(u,m)}}}function my(e,i){pn.X(e,i);var r=Nl;if(r&&e){var a=us(r).hoistableScripts,c=Ll(e),u=a.get(c);u||(u=r.querySelector(Go(c)),u||(e=x({src:e,async:!0},i),(i=Vs.get(c))&&Kd(e,i),u=r.createElement("script"),Mt(u),Fi(u,"link",e),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(c,u))}}function vy(e,i){pn.M(e,i);var r=Nl;if(r&&e){var a=us(r).hoistableScripts,c=Ll(e),u=a.get(c);u||(u=r.querySelector(Go(c)),u||(e=x({src:e,async:!0,type:"module"},i),(i=Vs.get(c))&&Kd(e,i),u=r.createElement("script"),Mt(u),Fi(u,"link",e),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(c,u))}}function qg(e,i,r,a){var c=(c=ye.current)?Hh(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Bl(r.href),r=us(c).hoistableStyles,a=r.get(i),a||(a={type:"style",instance:null,count:0,state:null},r.set(i,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Bl(r.href);var u=us(c).hoistableStyles,m=u.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=c.querySelector(Vo(e)))&&!u._p&&(m.instance=u,m.state.loading=5),Vs.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Vs.set(e,r),u||by(c,e,r,m.state))),i&&a===null)throw Error(l(528,""));return m}if(i&&a!==null)throw Error(l(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ll(r),r=us(c).hoistableScripts,a=r.get(i),a||(a={type:"script",instance:null,count:0,state:null},r.set(i,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Bl(e){return'href="'+ii(e)+'"'}function Vo(e){return'link[rel="stylesheet"]['+e+"]"}function Pg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function by(e,i,r,a){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?a.loading=1:(i=e.createElement("link"),a.preload=i,i.addEventListener("load",function(){return a.loading|=1}),i.addEventListener("error",function(){return a.loading|=2}),Fi(i,"link",r),Mt(i),e.head.appendChild(i))}function Ll(e){return'[src="'+ii(e)+'"]'}function Go(e){return"script[async]"+e}function Zg(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var a=e.querySelector('style[data-href~="'+ii(r.href)+'"]');if(a)return i.instance=a,Mt(a),a;var c=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Mt(a),Fi(a,"style",c),Uh(a,r.precedence,e),i.instance=a;case"stylesheet":c=Bl(r.href);var u=e.querySelector(Vo(c));if(u)return i.state.loading|=4,i.instance=u,Mt(u),u;a=Pg(r),(c=Vs.get(c))&&Zd(a,c),u=(e.ownerDocument||e).createElement("link"),Mt(u);var m=u;return m._p=new Promise(function(S,M){m.onload=S,m.onerror=M}),Fi(u,"link",a),i.state.loading|=4,Uh(u,r.precedence,e),i.instance=u;case"script":return u=Ll(r.src),(c=e.querySelector(Go(u)))?(i.instance=c,Mt(c),c):(a=r,(c=Vs.get(u))&&(a=x({},r),Kd(a,c)),e=e.ownerDocument||e,c=e.createElement("script"),Mt(c),Fi(c,"link",a),e.head.appendChild(c),i.instance=c);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(a=i.instance,i.state.loading|=4,Uh(a,r.precedence,e));return i.instance}function Uh(e,i,r){for(var a=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,u=c,m=0;m<a.length;m++){var S=a[m];if(S.dataset.precedence===i)u=S;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function Zd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Kd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var jh=null;function Kg(e,i,r){if(jh===null){var a=new Map,c=jh=new Map;c.set(r,a)}else c=jh,a=c.get(r),a||(a=new Map,c.set(r,a));if(a.has(e))return a;for(a.set(e,null),r=r.getElementsByTagName(e),c=0;c<r.length;c++){var u=r[c];if(!(u[fi]||u[Wt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(i)||"";m=e+m;var S=a.get(m);S?S.push(u):a.set(m,[u])}}return a}function Wg(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function yy(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(e=i.disabled,typeof i.precedence=="string"&&e==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Yg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Sy(e,i,r,a){if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var c=Bl(a.href),u=i.querySelector(Vo(c));if(u){i=u._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Fh.bind(e),i.then(e,e)),r.state.loading|=4,r.instance=u,Mt(u);return}u=i.ownerDocument||i,a=Pg(a),(c=Vs.get(c))&&Zd(a,c),u=u.createElement("link"),Mt(u);var m=u;m._p=new Promise(function(S,M){m.onload=S,m.onerror=M}),Fi(u,"link",a),r.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Fh.bind(e),i.addEventListener("load",r),i.addEventListener("error",r))}}var Wd=0;function wy(e,i){return e.stylesheets&&e.count===0&&qh(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var a=setTimeout(function(){if(e.stylesheets&&qh(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+i);0<e.imgBytes&&Wd===0&&(Wd=62500*iy());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&qh(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Wd?50:800)+i);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Fh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ih=null;function qh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ih=new Map,i.forEach(Cy,e),Ih=null,Fh.call(e))}function Cy(e,i){if(!(i.state.loading&4)){var r=Ih.get(e);if(r)var a=r.get(null);else{r=new Map,Ih.set(e,r);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var m=c[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(r.set(m.dataset.precedence,m),a=m)}a&&r.set(null,a)}c=i.instance,m=c.getAttribute("data-precedence"),u=r.get(m)||a,u===a&&r.set(null,c),r.set(m,c),this.count++,a=Fh.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),i.state.loading|=4}}var Qo={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function xy(e,i,r,a,c,u,m,S,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function $g(e,i,r,a,c,u,m,S,M,K,te,ne){return e=new xy(e,i,r,m,M,K,te,ne,S),i=1,u===!0&&(i|=24),u=is(3,null,null,i),e.current=u,u.stateNode=e,i=dr(),i.refCount++,e.pooledCache=i,i.refCount++,u.memoizedState={element:a,isDehydrated:r,cache:i},ft(u),e}function Xg(e){return e?(e=Un,e):Un}function Vg(e,i,r,a,c,u){c=Xg(c),a.context===null?a.context=c:a.pendingContext=c,a=Ie(i),a.payload={element:r},u=u===void 0?null:u,u!==null&&(a.callback=u),r=Ve(e,a,i),r!==null&&(Ss(r,e,i),Ze(r,e,i))}function Gg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function Yd(e,i){Gg(e,i),(e=e.alternate)&&Gg(e,i)}function Qg(e){if(e.tag===13||e.tag===31){var i=Ui(e,67108864);i!==null&&Ss(i,e,67108864),Yd(e,67108864)}}function Jg(e){if(e.tag===13||e.tag===31){var i=Ns();i=ir(i);var r=Ui(e,i);r!==null&&Ss(r,e,i),Yd(e,i)}}var Ph=!0;function Ey(e,i,r,a){var c=L.T;L.T=null;var u=J.p;try{J.p=2,$d(e,i,r,a)}finally{J.p=u,L.T=c}}function Ay(e,i,r,a){var c=L.T;L.T=null;var u=J.p;try{J.p=8,$d(e,i,r,a)}finally{J.p=u,L.T=c}}function $d(e,i,r,a){if(Ph){var c=Xd(a);if(c===null)Bd(e,i,a,Zh,r),tm(e,a);else if(ky(c,e,i,r,a))a.stopPropagation();else if(tm(e,a),i&4&&-1<Ty.indexOf(e)){for(;c!==null;){var u=sr(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=di(u.pendingLanes);if(m!==0){var S=u;for(S.pendingLanes|=2,S.entangledLanes|=2;m;){var M=1<<31-Re(m);S.entanglements[1]|=M,m&=~M}Ur(u),(gt&6)===0&&(Ah=Ct()+500,Wo(0))}}break;case 31:case 13:S=Ui(u,2),S!==null&&Ss(S,u,2),kh(),Yd(u,2)}if(u=Xd(a),u===null&&Bd(e,i,a,Zh,r),u===c)break;c=u}c!==null&&a.stopPropagation()}else Bd(e,i,a,null,r)}}function Xd(e){return e=sl(e),Vd(e)}var Zh=null;function Vd(e){if(Zh=null,e=Yt(e),e!==null){var i=d(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=f(i),e!==null)return e;e=null}else if(r===31){if(e=p(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Zh=e,null}function em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ti()){case It:return 2;case Sn:return 8;case mr:case vr:return 32;case br:return 268435456;default:return 32}default:return 32}}var Gd=!1,ia=null,sa=null,ra=null,Jo=new Map,ec=new Map,na=[],Ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tm(e,i){switch(e){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":Jo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(i.pointerId)}}function tc(e,i,r,a,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:i,domEventName:r,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},i!==null&&(i=sr(i),i!==null&&Qg(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,c!==null&&i.indexOf(c)===-1&&i.push(c),e)}function ky(e,i,r,a,c){switch(i){case"focusin":return ia=tc(ia,e,i,r,a,c),!0;case"dragenter":return sa=tc(sa,e,i,r,a,c),!0;case"mouseover":return ra=tc(ra,e,i,r,a,c),!0;case"pointerover":var u=c.pointerId;return Jo.set(u,tc(Jo.get(u)||null,e,i,r,a,c)),!0;case"gotpointercapture":return u=c.pointerId,ec.set(u,tc(ec.get(u)||null,e,i,r,a,c)),!0}return!1}function im(e){var i=Yt(e.target);if(i!==null){var r=d(i);if(r!==null){if(i=r.tag,i===13){if(i=f(r),i!==null){e.blockedOn=i,Yr(e.priority,function(){Jg(r)});return}}else if(i===31){if(i=p(r),i!==null){e.blockedOn=i,Yr(e.priority,function(){Jg(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=Xd(e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);xn=a,r.target.dispatchEvent(a),xn=null}else return i=sr(r),i!==null&&Qg(i),e.blockedOn=r,!1;i.shift()}return!0}function sm(e,i,r){Kh(e)&&r.delete(i)}function Dy(){Gd=!1,ia!==null&&Kh(ia)&&(ia=null),sa!==null&&Kh(sa)&&(sa=null),ra!==null&&Kh(ra)&&(ra=null),Jo.forEach(sm),ec.forEach(sm)}function Wh(e,i){e.blockedOn===i&&(e.blockedOn=null,Gd||(Gd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Dy)))}var Yh=null;function rm(e){Yh!==e&&(Yh=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Yh===e&&(Yh=null);for(var i=0;i<e.length;i+=3){var r=e[i],a=e[i+1],c=e[i+2];if(typeof a!="function"){if(Vd(a||r)===null)continue;break}var u=sr(r);u!==null&&(e.splice(i,3),i-=3,Xu(u,{pending:!0,data:c,method:r.method,action:a},a,c))}}))}function zl(e){function i(M){return Wh(M,e)}ia!==null&&Wh(ia,e),sa!==null&&Wh(sa,e),ra!==null&&Wh(ra,e),Jo.forEach(i),ec.forEach(i);for(var r=0;r<na.length;r++){var a=na[r];a.blockedOn===e&&(a.blockedOn=null)}for(;0<na.length&&(r=na[0],r.blockedOn===null);)im(r),r.blockedOn===null&&na.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(a=0;a<r.length;a+=3){var c=r[a],u=r[a+1],m=c[Pi]||null;if(typeof u=="function")m||rm(r);else if(m){var S=null;if(u&&u.hasAttribute("formAction")){if(c=u,m=u[Pi]||null)S=m.formAction;else if(Vd(c)!==null)continue}else S=m.action;typeof S=="function"?r[a+1]=S:(r.splice(a,3),a-=3),rm(r)}}}function nm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function i(){c!==null&&(c(),c=null),a||setTimeout(r,20)}function r(){if(!a&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),c!==null&&(c(),c=null)}}}function Qd(e){this._internalRoot=e}$h.prototype.render=Qd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(l(409));var r=i.current,a=Ns();Vg(r,a,e,i,null,null)},$h.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Vg(e.current,2,null,e,null,null),kh(),i[wr]=null}};function $h(e){this._internalRoot=e}$h.prototype.unstable_scheduleHydration=function(e){if(e){var i=pa();e={blockedOn:null,target:e,priority:i};for(var r=0;r<na.length&&i!==0&&i<na[r].priority;r++);na.splice(r,0,e),r===0&&im(e)}};var am=s.version;if(am!=="19.2.3")throw Error(l(527,am,"19.2.3"));J.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=_(i),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var My={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{Hs=Xh.inject(My),ge=Xh}catch{}}return sc.createRoot=function(e,i){if(!o(e))throw Error(l(299));var r=!1,a="",c=fp,u=_p,m=pp;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(c=i.onUncaughtError),i.onCaughtError!==void 0&&(u=i.onCaughtError),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),i=$g(e,1,!1,null,null,r,a,null,c,u,m,nm),e[wr]=i.current,Nd(e),new Qd(i)},sc.hydrateRoot=function(e,i,r){if(!o(e))throw Error(l(299));var a=!1,c="",u=fp,m=_p,S=pp,M=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),i=$g(e,1,!0,i,r??null,a,c,M,u,m,S,nm),i.context=Xg(null),r=i.current,a=Ns(),a=ir(a),c=Ie(a),c.callback=null,Ve(r,c,a),r=a,i.current.lanes=r,Wr(i,r),Ur(i),e[wr]=i.current,Nd(e),new $h(i)},sc.version="19.2.3",sc}var mm;function Fy(){if(mm)return tf.exports;mm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),tf.exports=jy(),tf.exports}var Iy=Fy(),su={exports:{}};var qy=su.exports,vm;function Py(){return vm||(vm=1,(function(t,s){(function(n,l){t.exports=l()})(qy,function(){const n=new Map,l={set(b,h,g){n.has(b)||n.set(b,new Map);const w=n.get(b);w.has(h)||w.size===0?w.set(h,g):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(w.keys())[0]}.`)},get:(b,h)=>n.has(b)&&n.get(b).get(h)||null,remove(b,h){if(!n.has(b))return;const g=n.get(b);g.delete(h),g.size===0&&n.delete(b)}},o="transitionend",d=b=>(b&&window.CSS&&window.CSS.escape&&(b=b.replace(/#([^\s"#']+)/g,(h,g)=>`#${CSS.escape(g)}`)),b),f=b=>b==null?`${b}`:Object.prototype.toString.call(b).match(/\s([a-z]+)/i)[1].toLowerCase(),p=b=>{b.dispatchEvent(new Event(o))},v=b=>!(!b||typeof b!="object")&&(b.jquery!==void 0&&(b=b[0]),b.nodeType!==void 0),_=b=>v(b)?b.jquery?b[0]:b:typeof b=="string"&&b.length>0?document.querySelector(d(b)):null,T=b=>{if(!v(b)||b.getClientRects().length===0)return!1;const h=getComputedStyle(b).getPropertyValue("visibility")==="visible",g=b.closest("details:not([open])");if(!g)return h;if(g!==b){const w=b.closest("summary");if(w&&w.parentNode!==g||w===null)return!1}return h},x=b=>!b||b.nodeType!==Node.ELEMENT_NODE||!!b.classList.contains("disabled")||(b.disabled!==void 0?b.disabled:b.hasAttribute("disabled")&&b.getAttribute("disabled")!=="false"),E=b=>{if(!document.documentElement.attachShadow)return null;if(typeof b.getRootNode=="function"){const h=b.getRootNode();return h instanceof ShadowRoot?h:null}return b instanceof ShadowRoot?b:b.parentNode?E(b.parentNode):null},N=()=>{},D=b=>{b.offsetHeight},H=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],O=()=>document.documentElement.dir==="rtl",k=b=>{var h;h=()=>{const g=H();if(g){const w=b.NAME,z=g.fn[w];g.fn[w]=b.jQueryInterface,g.fn[w].Constructor=b,g.fn[w].noConflict=()=>(g.fn[w]=z,b.jQueryInterface)}},document.readyState==="loading"?(y.length||document.addEventListener("DOMContentLoaded",()=>{for(const g of y)g()}),y.push(h)):h()},A=(b,h=[],g=b)=>typeof b=="function"?b.call(...h):g,j=(b,h,g=!0)=>{if(!g)return void A(b);const w=(ee=>{if(!ee)return 0;let{transitionDuration:he,transitionDelay:ve}=window.getComputedStyle(ee);const xe=Number.parseFloat(he),Ae=Number.parseFloat(ve);return xe||Ae?(he=he.split(",")[0],ve=ve.split(",")[0],1e3*(Number.parseFloat(he)+Number.parseFloat(ve))):0})(h)+5;let z=!1;const F=({target:ee})=>{ee===h&&(z=!0,h.removeEventListener(o,F),A(b))};h.addEventListener(o,F),setTimeout(()=>{z||p(h)},w)},I=(b,h,g,w)=>{const z=b.length;let F=b.indexOf(h);return F===-1?!g&&w?b[z-1]:b[0]:(F+=g?1:-1,w&&(F=(F+z)%z),b[Math.max(0,Math.min(F,z-1))])},U=/[^.]*(?=\..*)\.|.*/,G=/\..*/,P=/::\d+$/,re={};let de=1;const pe={mouseenter:"mouseover",mouseleave:"mouseout"},ie=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Y(b,h){return h&&`${h}::${de++}`||b.uidEvent||de++}function fe(b){const h=Y(b);return b.uidEvent=h,re[h]=re[h]||{},re[h]}function me(b,h,g=null){return Object.values(b).find(w=>w.callable===h&&w.delegationSelector===g)}function L(b,h,g){const w=typeof h=="string",z=w?g:h||g;let F=Te(b);return ie.has(F)||(F=b),[w,z,F]}function J(b,h,g,w,z){if(typeof h!="string"||!b)return;let[F,ee,he]=L(h,g,w);h in pe&&(ee=(Le=>function(je){if(!je.relatedTarget||je.relatedTarget!==je.delegateTarget&&!je.delegateTarget.contains(je.relatedTarget))return Le.call(this,je)})(ee));const ve=fe(b),xe=ve[he]||(ve[he]={}),Ae=me(xe,ee,F?g:null);if(Ae)return void(Ae.oneOff=Ae.oneOff&&z);const Ce=Y(ee,h.replace(U,"")),Pe=F?(function(Be,Le,je){return function Ne(ft){const mt=Be.querySelectorAll(Le);for(let{target:Ie}=ft;Ie&&Ie!==this;Ie=Ie.parentNode)for(const Ve of mt)if(Ve===Ie)return V(ft,{delegateTarget:Ie}),Ne.oneOff&&C.off(Be,ft.type,Le,je),je.apply(Ie,[ft])}})(b,g,ee):(function(Be,Le){return function je(Ne){return V(Ne,{delegateTarget:Be}),je.oneOff&&C.off(Be,Ne.type,Le),Le.apply(Be,[Ne])}})(b,ee);Pe.delegationSelector=F?g:null,Pe.callable=ee,Pe.oneOff=z,Pe.uidEvent=Ce,xe[Ce]=Pe,b.addEventListener(he,Pe,F)}function X(b,h,g,w,z){const F=me(h[g],w,z);F&&(b.removeEventListener(g,F,!!z),delete h[g][F.uidEvent])}function Se(b,h,g,w){const z=h[g]||{};for(const[F,ee]of Object.entries(z))F.includes(w)&&X(b,h,g,ee.callable,ee.delegationSelector)}function Te(b){return b=b.replace(G,""),pe[b]||b}const C={on(b,h,g,w){J(b,h,g,w,!1)},one(b,h,g,w){J(b,h,g,w,!0)},off(b,h,g,w){if(typeof h!="string"||!b)return;const[z,F,ee]=L(h,g,w),he=ee!==h,ve=fe(b),xe=ve[ee]||{},Ae=h.startsWith(".");if(F===void 0){if(Ae)for(const Ce of Object.keys(ve))Se(b,ve,Ce,h.slice(1));for(const[Ce,Pe]of Object.entries(xe)){const Be=Ce.replace(P,"");he&&!h.includes(Be)||X(b,ve,ee,Pe.callable,Pe.delegationSelector)}}else{if(!Object.keys(xe).length)return;X(b,ve,ee,F,z?g:null)}},trigger(b,h,g){if(typeof h!="string"||!b)return null;const w=H();let z=null,F=!0,ee=!0,he=!1;h!==Te(h)&&w&&(z=w.Event(h,g),w(b).trigger(z),F=!z.isPropagationStopped(),ee=!z.isImmediatePropagationStopped(),he=z.isDefaultPrevented());const ve=V(new Event(h,{bubbles:F,cancelable:!0}),g);return he&&ve.preventDefault(),ee&&b.dispatchEvent(ve),ve.defaultPrevented&&z&&z.preventDefault(),ve}};function V(b,h={}){for(const[g,w]of Object.entries(h))try{b[g]=w}catch{Object.defineProperty(b,g,{configurable:!0,get:()=>w})}return b}function _e(b){if(b==="true")return!0;if(b==="false")return!1;if(b===Number(b).toString())return Number(b);if(b===""||b==="null")return null;if(typeof b!="string")return b;try{return JSON.parse(decodeURIComponent(b))}catch{return b}}function le(b){return b.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const we={setDataAttribute(b,h,g){b.setAttribute(`data-bs-${le(h)}`,g)},removeDataAttribute(b,h){b.removeAttribute(`data-bs-${le(h)}`)},getDataAttributes(b){if(!b)return{};const h={},g=Object.keys(b.dataset).filter(w=>w.startsWith("bs")&&!w.startsWith("bsConfig"));for(const w of g){let z=w.replace(/^bs/,"");z=z.charAt(0).toLowerCase()+z.slice(1),h[z]=_e(b.dataset[w])}return h},getDataAttribute:(b,h)=>_e(b.getAttribute(`data-bs-${le(h)}`))};class ye{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,g){const w=v(g)?we.getDataAttribute(g,"config"):{};return{...this.constructor.Default,...typeof w=="object"?w:{},...v(g)?we.getDataAttributes(g):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,g=this.constructor.DefaultType){for(const[w,z]of Object.entries(g)){const F=h[w],ee=v(F)?"element":f(F);if(!new RegExp(z).test(ee))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${w}" provided type "${ee}" but expected type "${z}".`)}}}class oe extends ye{constructor(h,g){super(),(h=_(h))&&(this._element=h,this._config=this._getConfig(g),l.set(this._element,this.constructor.DATA_KEY,this))}dispose(){l.remove(this._element,this.constructor.DATA_KEY),C.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,g,w=!0){j(h,g,w)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return l.get(_(h),this.DATA_KEY)}static getOrCreateInstance(h,g={}){return this.getInstance(h)||new this(h,typeof g=="object"?g:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const ce=b=>{let h=b.getAttribute("data-bs-target");if(!h||h==="#"){let g=b.getAttribute("href");if(!g||!g.includes("#")&&!g.startsWith("."))return null;g.includes("#")&&!g.startsWith("#")&&(g=`#${g.split("#")[1]}`),h=g&&g!=="#"?g.trim():null}return h?h.split(",").map(g=>d(g)).join(","):null},W={find:(b,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,b)),findOne:(b,h=document.documentElement)=>Element.prototype.querySelector.call(h,b),children:(b,h)=>[].concat(...b.children).filter(g=>g.matches(h)),parents(b,h){const g=[];let w=b.parentNode.closest(h);for(;w;)g.push(w),w=w.parentNode.closest(h);return g},prev(b,h){let g=b.previousElementSibling;for(;g;){if(g.matches(h))return[g];g=g.previousElementSibling}return[]},next(b,h){let g=b.nextElementSibling;for(;g;){if(g.matches(h))return[g];g=g.nextElementSibling}return[]},focusableChildren(b){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(g=>`${g}:not([tabindex^="-"])`).join(",");return this.find(h,b).filter(g=>!x(g)&&T(g))},getSelectorFromElement(b){const h=ce(b);return h&&W.findOne(h)?h:null},getElementFromSelector(b){const h=ce(b);return h?W.findOne(h):null},getMultipleElementsFromSelector(b){const h=ce(b);return h?W.find(h):[]}},De=(b,h="hide")=>{const g=`click.dismiss${b.EVENT_KEY}`,w=b.NAME;C.on(document,g,`[data-bs-dismiss="${w}"]`,function(z){if(["A","AREA"].includes(this.tagName)&&z.preventDefault(),x(this))return;const F=W.getElementFromSelector(this)||this.closest(`.${w}`);b.getOrCreateInstance(F)[h]()})},ze=".bs.alert",ot=`close${ze}`,Ye=`closed${ze}`;class Kt extends oe{static get NAME(){return"alert"}close(){if(C.trigger(this._element,ot).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),C.trigger(this._element,Ye),this.dispose()}static jQueryInterface(h){return this.each(function(){const g=Kt.getOrCreateInstance(this);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h](this)}})}}De(Kt,"close"),k(Kt);const gr='[data-bs-toggle="button"]';class cs extends oe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const g=cs.getOrCreateInstance(this);h==="toggle"&&g[h]()})}}C.on(document,"click.bs.button.data-api",gr,b=>{b.preventDefault();const h=b.target.closest(gr);cs.getOrCreateInstance(h).toggle()}),k(cs);const xs=".bs.swipe",yt=`touchstart${xs}`,ue=`touchmove${xs}`,He=`touchend${xs}`,at=`pointerdown${xs}`,hi=`pointerup${xs}`,Es={endCallback:null,leftCallback:null,rightCallback:null},Ct={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ti extends ye{constructor(h,g){super(),this._element=h,h&&ti.isSupported()&&(this._config=this._getConfig(g),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Es}static get DefaultType(){return Ct}static get NAME(){return"swipe"}dispose(){C.off(this._element,xs)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const g=h/this._deltaX;this._deltaX=0,g&&A(g>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(C.on(this._element,at,h=>this._start(h)),C.on(this._element,hi,h=>this._end(h)),this._element.classList.add("pointer-event")):(C.on(this._element,yt,h=>this._start(h)),C.on(this._element,ue,h=>this._move(h)),C.on(this._element,He,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const It=".bs.carousel",Sn=".data-api",mr="ArrowLeft",vr="ArrowRight",br="next",yr="prev",Sr="left",Hs="right",ge=`slide${It}`,$e=`slid${It}`,Re=`keydown${It}`,Ge=`mouseenter${It}`,Nt=`mouseleave${It}`,ui=`dragstart${It}`,qi=`load${It}${Sn}`,Us=`click${It}${Sn}`,As="carousel",di="active",bi=".active",Bi=".carousel-item",Kr=bi+Bi,yi={[mr]:Hs,[vr]:Sr},tr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Wr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class js extends oe{constructor(h,g){super(h,g),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===As&&this.cycle()}static get Default(){return tr}static get DefaultType(){return Wr}static get NAME(){return"carousel"}next(){this._slide(br)}nextWhenVisible(){!document.hidden&&T(this._element)&&this.next()}prev(){this._slide(yr)}pause(){this._isSliding&&p(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?C.one(this._element,$e,()=>this.cycle()):this.cycle())}to(h){const g=this._getItems();if(h>g.length-1||h<0)return;if(this._isSliding)return void C.one(this._element,$e,()=>this.to(h));const w=this._getItemIndex(this._getActive());if(w===h)return;const z=h>w?br:yr;this._slide(z,g[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&C.on(this._element,Re,h=>this._keydown(h)),this._config.pause==="hover"&&(C.on(this._element,Ge,()=>this.pause()),C.on(this._element,Nt,()=>this._maybeEnableCycle())),this._config.touch&&ti.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const g of W.find(".carousel-item img",this._element))C.on(g,ui,w=>w.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Sr)),rightCallback:()=>this._slide(this._directionToOrder(Hs)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ti(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const g=yi[h.key];g&&(h.preventDefault(),this._slide(this._directionToOrder(g)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const g=W.findOne(bi,this._indicatorsElement);g.classList.remove(di),g.removeAttribute("aria-current");const w=W.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);w&&(w.classList.add(di),w.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const g=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=g||this._config.defaultInterval}_slide(h,g=null){if(this._isSliding)return;const w=this._getActive(),z=h===br,F=g||I(this._getItems(),w,z,this._config.wrap);if(F===w)return;const ee=this._getItemIndex(F),he=Ce=>C.trigger(this._element,Ce,{relatedTarget:F,direction:this._orderToDirection(h),from:this._getItemIndex(w),to:ee});if(he(ge).defaultPrevented||!w||!F)return;const ve=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ee),this._activeElement=F;const xe=z?"carousel-item-start":"carousel-item-end",Ae=z?"carousel-item-next":"carousel-item-prev";F.classList.add(Ae),D(F),w.classList.add(xe),F.classList.add(xe),this._queueCallback(()=>{F.classList.remove(xe,Ae),F.classList.add(di),w.classList.remove(di,Ae,xe),this._isSliding=!1,he($e)},w,this._isAnimated()),ve&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return W.findOne(Kr,this._element)}_getItems(){return W.find(Bi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return O()?h===Sr?yr:br:h===Sr?br:yr}_orderToDirection(h){return O()?h===yr?Sr:Hs:h===yr?Hs:Sr}static jQueryInterface(h){return this.each(function(){const g=js.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}}else g.to(h)})}}C.on(document,Us,"[data-bs-slide], [data-bs-slide-to]",function(b){const h=W.getElementFromSelector(this);if(!h||!h.classList.contains(As))return;b.preventDefault();const g=js.getOrCreateInstance(h),w=this.getAttribute("data-bs-slide-to");return w?(g.to(w),void g._maybeEnableCycle()):we.getDataAttribute(this,"slide")==="next"?(g.next(),void g._maybeEnableCycle()):(g.prev(),void g._maybeEnableCycle())}),C.on(window,qi,()=>{const b=W.find('[data-bs-ride="carousel"]');for(const h of b)js.getOrCreateInstance(h)}),k(js);const Ts=".bs.collapse",_a=`show${Ts}`,hs=`shown${Ts}`,ir=`hide${Ts}`,wn=`hidden${Ts}`,pa=`click${Ts}.data-api`,Yr="show",Vi="collapse",Wt="collapsing",Pi=`:scope .${Vi} .${Vi}`,wr='[data-bs-toggle="collapse"]',Pl={parent:null,toggle:!0},wu={parent:"(null|element)",toggle:"boolean"};class Cn extends oe{constructor(h,g){super(h,g),this._isTransitioning=!1,this._triggerArray=[];const w=W.find(wr);for(const z of w){const F=W.getSelectorFromElement(z),ee=W.find(F).filter(he=>he===this._element);F!==null&&ee.length&&this._triggerArray.push(z)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Pl}static get DefaultType(){return wu}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(z=>z!==this._element).map(z=>Cn.getOrCreateInstance(z,{toggle:!1}))),h.length&&h[0]._isTransitioning||C.trigger(this._element,_a).defaultPrevented)return;for(const z of h)z.hide();const g=this._getDimension();this._element.classList.remove(Vi),this._element.classList.add(Wt),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const w=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Wt),this._element.classList.add(Vi,Yr),this._element.style[g]="",C.trigger(this._element,hs)},this._element,!0),this._element.style[g]=`${this._element[w]}px`}hide(){if(this._isTransitioning||!this._isShown()||C.trigger(this._element,ir).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,D(this._element),this._element.classList.add(Wt),this._element.classList.remove(Vi,Yr);for(const g of this._triggerArray){const w=W.getElementFromSelector(g);w&&!this._isShown(w)&&this._addAriaAndCollapsedClass([g],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Wt),this._element.classList.add(Vi),C.trigger(this._element,wn)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(Yr)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=_(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(wr);for(const g of h){const w=W.getElementFromSelector(g);w&&this._addAriaAndCollapsedClass([g],this._isShown(w))}}_getFirstLevelChildren(h){const g=W.find(Pi,this._config.parent);return W.find(h,this._config.parent).filter(w=>!g.includes(w))}_addAriaAndCollapsedClass(h,g){if(h.length)for(const w of h)w.classList.toggle("collapsed",!g),w.setAttribute("aria-expanded",g)}static jQueryInterface(h){const g={};return typeof h=="string"&&/show|hide/.test(h)&&(g.toggle=!1),this.each(function(){const w=Cn.getOrCreateInstance(this,g);if(typeof h=="string"){if(w[h]===void 0)throw new TypeError(`No method named "${h}"`);w[h]()}})}}C.on(document,pa,wr,function(b){(b.target.tagName==="A"||b.delegateTarget&&b.delegateTarget.tagName==="A")&&b.preventDefault();for(const h of W.getMultipleElementsFromSelector(this))Cn.getOrCreateInstance(h,{toggle:!1}).toggle()}),k(Cn);var Si="top",fi="bottom",Li="right",Yt="left",sr="auto",Fs=[Si,fi,Li,Yt],us="start",Mt="end",Zl="clippingParents",Qa="viewport",ds="popper",$r="reference",Kl=Fs.reduce(function(b,h){return b.concat([h+"-"+us,h+"-"+Mt])},[]),Ja=[].concat(Fs,[sr]).reduce(function(b,h){return b.concat([h,h+"-"+us,h+"-"+Mt])},[]),Wl="beforeRead",Ec="read",ga="afterRead",ma="beforeMain",Is="main",Gi="afterMain",Yl="beforeWrite",Ac="write",el="afterWrite",$l=[Wl,Ec,ga,ma,Is,Gi,Yl,Ac,el];function Qi(b){return b?(b.nodeName||"").toLowerCase():null}function Ji(b){if(b==null)return window;if(b.toString()!=="[object Window]"){var h=b.ownerDocument;return h&&h.defaultView||window}return b}function ii(b){return b instanceof Ji(b).Element||b instanceof Element}function Zi(b){return b instanceof Ji(b).HTMLElement||b instanceof HTMLElement}function tl(b){return typeof ShadowRoot<"u"&&(b instanceof Ji(b).ShadowRoot||b instanceof ShadowRoot)}const va={name:"applyStyles",enabled:!0,phase:"write",fn:function(b){var h=b.state;Object.keys(h.elements).forEach(function(g){var w=h.styles[g]||{},z=h.attributes[g]||{},F=h.elements[g];Zi(F)&&Qi(F)&&(Object.assign(F.style,w),Object.keys(z).forEach(function(ee){var he=z[ee];he===!1?F.removeAttribute(ee):F.setAttribute(ee,he===!0?"":he)}))})},effect:function(b){var h=b.state,g={popper:{position:h.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(h.elements.popper.style,g.popper),h.styles=g,h.elements.arrow&&Object.assign(h.elements.arrow.style,g.arrow),function(){Object.keys(h.elements).forEach(function(w){var z=h.elements[w],F=h.attributes[w]||{},ee=Object.keys(h.styles.hasOwnProperty(w)?h.styles[w]:g[w]).reduce(function(he,ve){return he[ve]="",he},{});Zi(z)&&Qi(z)&&(Object.assign(z.style,ee),Object.keys(F).forEach(function(he){z.removeAttribute(he)}))})}},requires:["computeStyles"]};function zi(b){return b.split("-")[0]}var Cr=Math.max,ba=Math.min,ks=Math.round;function Xl(){var b=navigator.userAgentData;return b!=null&&b.brands&&Array.isArray(b.brands)?b.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function Vl(){return!/^((?!chrome|android).)*safari/i.test(Xl())}function Xr(b,h,g){h===void 0&&(h=!1),g===void 0&&(g=!1);var w=b.getBoundingClientRect(),z=1,F=1;h&&Zi(b)&&(z=b.offsetWidth>0&&ks(w.width)/b.offsetWidth||1,F=b.offsetHeight>0&&ks(w.height)/b.offsetHeight||1);var ee=(ii(b)?Ji(b):window).visualViewport,he=!Vl()&&g,ve=(w.left+(he&&ee?ee.offsetLeft:0))/z,xe=(w.top+(he&&ee?ee.offsetTop:0))/F,Ae=w.width/z,Ce=w.height/F;return{width:Ae,height:Ce,top:xe,right:ve+Ae,bottom:xe+Ce,left:ve,x:ve,y:xe}}function ya(b){var h=Xr(b),g=b.offsetWidth,w=b.offsetHeight;return Math.abs(h.width-g)<=1&&(g=h.width),Math.abs(h.height-w)<=1&&(w=h.height),{x:b.offsetLeft,y:b.offsetTop,width:g,height:w}}function Tc(b,h){var g=h.getRootNode&&h.getRootNode();if(b.contains(h))return!0;if(g&&tl(g)){var w=h;do{if(w&&b.isSameNode(w))return!0;w=w.parentNode||w.host}while(w)}return!1}function rr(b){return Ji(b).getComputedStyle(b)}function il(b){return["table","td","th"].indexOf(Qi(b))>=0}function wi(b){return((ii(b)?b.ownerDocument:b.document)||window.document).documentElement}function xn(b){return Qi(b)==="html"?b:b.assignedSlot||b.parentNode||(tl(b)?b.host:null)||wi(b)}function sl(b){return Zi(b)&&rr(b).position!=="fixed"?b.offsetParent:null}function qs(b){for(var h=Ji(b),g=sl(b);g&&il(g)&&rr(g).position==="static";)g=sl(g);return g&&(Qi(g)==="html"||Qi(g)==="body"&&rr(g).position==="static")?h:g||(function(w){var z=/firefox/i.test(Xl());if(/Trident/i.test(Xl())&&Zi(w)&&rr(w).position==="fixed")return null;var F=xn(w);for(tl(F)&&(F=F.host);Zi(F)&&["html","body"].indexOf(Qi(F))<0;){var ee=rr(F);if(ee.transform!=="none"||ee.perspective!=="none"||ee.contain==="paint"||["transform","perspective"].indexOf(ee.willChange)!==-1||z&&ee.willChange==="filter"||z&&ee.filter&&ee.filter!=="none")return F;F=F.parentNode}return null})(b)||h}function xr(b){return["top","bottom"].indexOf(b)>=0?"x":"y"}function En(b,h,g){return Cr(b,ba(h,g))}function rl(b){return Object.assign({},{top:0,right:0,bottom:0,left:0},b)}function Gl(b,h){return h.reduce(function(g,w){return g[w]=b,g},{})}const An={name:"arrow",enabled:!0,phase:"main",fn:function(b){var h,g=b.state,w=b.name,z=b.options,F=g.elements.arrow,ee=g.modifiersData.popperOffsets,he=zi(g.placement),ve=xr(he),xe=[Yt,Li].indexOf(he)>=0?"height":"width";if(F&&ee){var Ae=(function(ct,lt){return rl(typeof(ct=typeof ct=="function"?ct(Object.assign({},lt.rects,{placement:lt.placement})):ct)!="number"?ct:Gl(ct,Fs))})(z.padding,g),Ce=ya(F),Pe=ve==="y"?Si:Yt,Be=ve==="y"?fi:Li,Le=g.rects.reference[xe]+g.rects.reference[ve]-ee[ve]-g.rects.popper[xe],je=ee[ve]-g.rects.reference[ve],Ne=qs(F),ft=Ne?ve==="y"?Ne.clientHeight||0:Ne.clientWidth||0:0,mt=Le/2-je/2,Ie=Ae[Pe],Ve=ft-Ce[xe]-Ae[Be],Ze=ft/2-Ce[xe]/2+mt,Je=En(Ie,Ze,Ve),ht=ve;g.modifiersData[w]=((h={})[ht]=Je,h.centerOffset=Je-Ze,h)}},effect:function(b){var h=b.state,g=b.options.element,w=g===void 0?"[data-popper-arrow]":g;w!=null&&(typeof w!="string"||(w=h.elements.popper.querySelector(w)))&&Tc(h.elements.popper,w)&&(h.elements.arrow=w)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ki(b){return b.split("-")[1]}var Ql={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Tn(b){var h,g=b.popper,w=b.popperRect,z=b.placement,F=b.variation,ee=b.offsets,he=b.position,ve=b.gpuAcceleration,xe=b.adaptive,Ae=b.roundOffsets,Ce=b.isFixed,Pe=ee.x,Be=Pe===void 0?0:Pe,Le=ee.y,je=Le===void 0?0:Le,Ne=typeof Ae=="function"?Ae({x:Be,y:je}):{x:Be,y:je};Be=Ne.x,je=Ne.y;var ft=ee.hasOwnProperty("x"),mt=ee.hasOwnProperty("y"),Ie=Yt,Ve=Si,Ze=window;if(xe){var Je=qs(g),ht="clientHeight",ct="clientWidth";Je===Ji(g)&&rr(Je=wi(g)).position!=="static"&&he==="absolute"&&(ht="scrollHeight",ct="scrollWidth"),(z===Si||(z===Yt||z===Li)&&F===Mt)&&(Ve=fi,je-=(Ce&&Je===Ze&&Ze.visualViewport?Ze.visualViewport.height:Je[ht])-w.height,je*=ve?1:-1),z!==Yt&&(z!==Si&&z!==fi||F!==Mt)||(Ie=Li,Be-=(Ce&&Je===Ze&&Ze.visualViewport?Ze.visualViewport.width:Je[ct])-w.width,Be*=ve?1:-1)}var lt,Bt=Object.assign({position:he},xe&&Ql),Wi=Ae===!0?(function(Ai,ni){var rs=Ai.x,Yi=Ai.y,kt=ni.devicePixelRatio||1;return{x:ks(rs*kt)/kt||0,y:ks(Yi*kt)/kt||0}})({x:Be,y:je},Ji(g)):{x:Be,y:je};return Be=Wi.x,je=Wi.y,ve?Object.assign({},Bt,((lt={})[Ve]=mt?"0":"",lt[Ie]=ft?"0":"",lt.transform=(Ze.devicePixelRatio||1)<=1?"translate("+Be+"px, "+je+"px)":"translate3d("+Be+"px, "+je+"px, 0)",lt)):Object.assign({},Bt,((h={})[Ve]=mt?je+"px":"",h[Ie]=ft?Be+"px":"",h.transform="",h))}const Ps={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(b){var h=b.state,g=b.options,w=g.gpuAcceleration,z=w===void 0||w,F=g.adaptive,ee=F===void 0||F,he=g.roundOffsets,ve=he===void 0||he,xe={placement:zi(h.placement),variation:Ki(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:z,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,Tn(Object.assign({},xe,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:ee,roundOffsets:ve})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,Tn(Object.assign({},xe,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ve})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})},data:{}};var kn={passive:!0};const Dn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(b){var h=b.state,g=b.instance,w=b.options,z=w.scroll,F=z===void 0||z,ee=w.resize,he=ee===void 0||ee,ve=Ji(h.elements.popper),xe=[].concat(h.scrollParents.reference,h.scrollParents.popper);return F&&xe.forEach(function(Ae){Ae.addEventListener("scroll",g.update,kn)}),he&&ve.addEventListener("resize",g.update,kn),function(){F&&xe.forEach(function(Ae){Ae.removeEventListener("scroll",g.update,kn)}),he&&ve.removeEventListener("resize",g.update,kn)}},data:{}};var kc={left:"right",right:"left",bottom:"top",top:"bottom"};function Vr(b){return b.replace(/left|right|bottom|top/g,function(h){return kc[h]})}var nl={start:"end",end:"start"};function Jl(b){return b.replace(/start|end/g,function(h){return nl[h]})}function Ci(b){var h=Ji(b);return{scrollLeft:h.pageXOffset,scrollTop:h.pageYOffset}}function nr(b){return Xr(wi(b)).left+Ci(b).scrollLeft}function Mn(b){var h=rr(b),g=h.overflow,w=h.overflowX,z=h.overflowY;return/auto|scroll|overlay|hidden/.test(g+z+w)}function On(b){return["html","body","#document"].indexOf(Qi(b))>=0?b.ownerDocument.body:Zi(b)&&Mn(b)?b:On(xn(b))}function Sa(b,h){var g;h===void 0&&(h=[]);var w=On(b),z=w===((g=b.ownerDocument)==null?void 0:g.body),F=Ji(w),ee=z?[F].concat(F.visualViewport||[],Mn(w)?w:[]):w,he=h.concat(ee);return z?he:he.concat(Sa(xn(ee)))}function wa(b){return Object.assign({},b,{left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height})}function al(b,h,g){return h===Qa?wa((function(w,z){var F=Ji(w),ee=wi(w),he=F.visualViewport,ve=ee.clientWidth,xe=ee.clientHeight,Ae=0,Ce=0;if(he){ve=he.width,xe=he.height;var Pe=Vl();(Pe||!Pe&&z==="fixed")&&(Ae=he.offsetLeft,Ce=he.offsetTop)}return{width:ve,height:xe,x:Ae+nr(w),y:Ce}})(b,g)):ii(h)?(function(w,z){var F=Xr(w,!1,z==="fixed");return F.top=F.top+w.clientTop,F.left=F.left+w.clientLeft,F.bottom=F.top+w.clientHeight,F.right=F.left+w.clientWidth,F.width=w.clientWidth,F.height=w.clientHeight,F.x=F.left,F.y=F.top,F})(h,g):wa((function(w){var z,F=wi(w),ee=Ci(w),he=(z=w.ownerDocument)==null?void 0:z.body,ve=Cr(F.scrollWidth,F.clientWidth,he?he.scrollWidth:0,he?he.clientWidth:0),xe=Cr(F.scrollHeight,F.clientHeight,he?he.scrollHeight:0,he?he.clientHeight:0),Ae=-ee.scrollLeft+nr(w),Ce=-ee.scrollTop;return rr(he||F).direction==="rtl"&&(Ae+=Cr(F.clientWidth,he?he.clientWidth:0)-ve),{width:ve,height:xe,x:Ae,y:Ce}})(wi(b)))}function Rn(b){var h,g=b.reference,w=b.element,z=b.placement,F=z?zi(z):null,ee=z?Ki(z):null,he=g.x+g.width/2-w.width/2,ve=g.y+g.height/2-w.height/2;switch(F){case Si:h={x:he,y:g.y-w.height};break;case fi:h={x:he,y:g.y+g.height};break;case Li:h={x:g.x+g.width,y:ve};break;case Yt:h={x:g.x-w.width,y:ve};break;default:h={x:g.x,y:g.y}}var xe=F?xr(F):null;if(xe!=null){var Ae=xe==="y"?"height":"width";switch(ee){case us:h[xe]=h[xe]-(g[Ae]/2-w[Ae]/2);break;case Mt:h[xe]=h[xe]+(g[Ae]/2-w[Ae]/2)}}return h}function ar(b,h){h===void 0&&(h={});var g=h,w=g.placement,z=w===void 0?b.placement:w,F=g.strategy,ee=F===void 0?b.strategy:F,he=g.boundary,ve=he===void 0?Zl:he,xe=g.rootBoundary,Ae=xe===void 0?Qa:xe,Ce=g.elementContext,Pe=Ce===void 0?ds:Ce,Be=g.altBoundary,Le=Be!==void 0&&Be,je=g.padding,Ne=je===void 0?0:je,ft=rl(typeof Ne!="number"?Ne:Gl(Ne,Fs)),mt=Pe===ds?$r:ds,Ie=b.rects.popper,Ve=b.elements[Le?mt:Pe],Ze=(function(ni,rs,Yi,kt){var Lt=rs==="clippingParents"?(function(vt){var zt=Sa(xn(vt)),Dt=["absolute","fixed"].indexOf(rr(vt).position)>=0&&Zi(vt)?qs(vt):vt;return ii(Dt)?zt.filter(function(bt){return ii(bt)&&Tc(bt,Dt)&&Qi(bt)!=="body"}):[]})(ni):[].concat(rs),qt=[].concat(Lt,[Yi]),ns=qt[0],Xt=qt.reduce(function(vt,zt){var Dt=al(ni,zt,kt);return vt.top=Cr(Dt.top,vt.top),vt.right=ba(Dt.right,vt.right),vt.bottom=ba(Dt.bottom,vt.bottom),vt.left=Cr(Dt.left,vt.left),vt},al(ni,ns,kt));return Xt.width=Xt.right-Xt.left,Xt.height=Xt.bottom-Xt.top,Xt.x=Xt.left,Xt.y=Xt.top,Xt})(ii(Ve)?Ve:Ve.contextElement||wi(b.elements.popper),ve,Ae,ee),Je=Xr(b.elements.reference),ht=Rn({reference:Je,element:Ie,placement:z}),ct=wa(Object.assign({},Ie,ht)),lt=Pe===ds?ct:Je,Bt={top:Ze.top-lt.top+ft.top,bottom:lt.bottom-Ze.bottom+ft.bottom,left:Ze.left-lt.left+ft.left,right:lt.right-Ze.right+ft.right},Wi=b.modifiersData.offset;if(Pe===ds&&Wi){var Ai=Wi[z];Object.keys(Bt).forEach(function(ni){var rs=[Li,fi].indexOf(ni)>=0?1:-1,Yi=[Si,fi].indexOf(ni)>=0?"y":"x";Bt[ni]+=Ai[Yi]*rs})}return Bt}function Dc(b,h){h===void 0&&(h={});var g=h,w=g.placement,z=g.boundary,F=g.rootBoundary,ee=g.padding,he=g.flipVariations,ve=g.allowedAutoPlacements,xe=ve===void 0?Ja:ve,Ae=Ki(w),Ce=Ae?he?Kl:Kl.filter(function(Le){return Ki(Le)===Ae}):Fs,Pe=Ce.filter(function(Le){return xe.indexOf(Le)>=0});Pe.length===0&&(Pe=Ce);var Be=Pe.reduce(function(Le,je){return Le[je]=ar(b,{placement:je,boundary:z,rootBoundary:F,padding:ee})[zi(je)],Le},{});return Object.keys(Be).sort(function(Le,je){return Be[Le]-Be[je]})}const Mc={name:"flip",enabled:!0,phase:"main",fn:function(b){var h=b.state,g=b.options,w=b.name;if(!h.modifiersData[w]._skip){for(var z=g.mainAxis,F=z===void 0||z,ee=g.altAxis,he=ee===void 0||ee,ve=g.fallbackPlacements,xe=g.padding,Ae=g.boundary,Ce=g.rootBoundary,Pe=g.altBoundary,Be=g.flipVariations,Le=Be===void 0||Be,je=g.allowedAutoPlacements,Ne=h.options.placement,ft=zi(Ne),mt=ve||(ft!==Ne&&Le?(function(vt){if(zi(vt)===sr)return[];var zt=Vr(vt);return[Jl(vt),zt,Jl(zt)]})(Ne):[Vr(Ne)]),Ie=[Ne].concat(mt).reduce(function(vt,zt){return vt.concat(zi(zt)===sr?Dc(h,{placement:zt,boundary:Ae,rootBoundary:Ce,padding:xe,flipVariations:Le,allowedAutoPlacements:je}):zt)},[]),Ve=h.rects.reference,Ze=h.rects.popper,Je=new Map,ht=!0,ct=Ie[0],lt=0;lt<Ie.length;lt++){var Bt=Ie[lt],Wi=zi(Bt),Ai=Ki(Bt)===us,ni=[Si,fi].indexOf(Wi)>=0,rs=ni?"width":"height",Yi=ar(h,{placement:Bt,boundary:Ae,rootBoundary:Ce,altBoundary:Pe,padding:xe}),kt=ni?Ai?Li:Yt:Ai?fi:Si;Ve[rs]>Ze[rs]&&(kt=Vr(kt));var Lt=Vr(kt),qt=[];if(F&&qt.push(Yi[Wi]<=0),he&&qt.push(Yi[kt]<=0,Yi[Lt]<=0),qt.every(function(vt){return vt})){ct=Bt,ht=!1;break}Je.set(Bt,qt)}if(ht)for(var ns=function(vt){var zt=Ie.find(function(Dt){var bt=Je.get(Dt);if(bt)return bt.slice(0,vt).every(function(sn){return sn})});if(zt)return ct=zt,"break"},Xt=Le?3:1;Xt>0&&ns(Xt)!=="break";Xt--);h.placement!==ct&&(h.modifiersData[w]._skip=!0,h.placement=ct,h.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Oc(b,h,g){return g===void 0&&(g={x:0,y:0}),{top:b.top-h.height-g.y,right:b.right-h.width+g.x,bottom:b.bottom-h.height+g.y,left:b.left-h.width-g.x}}function Rc(b){return[Si,Li,fi,Yt].some(function(h){return b[h]>=0})}const ll={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(b){var h=b.state,g=b.name,w=h.rects.reference,z=h.rects.popper,F=h.modifiersData.preventOverflow,ee=ar(h,{elementContext:"reference"}),he=ar(h,{altBoundary:!0}),ve=Oc(ee,w),xe=Oc(he,z,F),Ae=Rc(ve),Ce=Rc(xe);h.modifiersData[g]={referenceClippingOffsets:ve,popperEscapeOffsets:xe,isReferenceHidden:Ae,hasPopperEscaped:Ce},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":Ae,"data-popper-escaped":Ce})}},Nc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(b){var h=b.state,g=b.options,w=b.name,z=g.offset,F=z===void 0?[0,0]:z,ee=Ja.reduce(function(Ae,Ce){return Ae[Ce]=(function(Pe,Be,Le){var je=zi(Pe),Ne=[Yt,Si].indexOf(je)>=0?-1:1,ft=typeof Le=="function"?Le(Object.assign({},Be,{placement:Pe})):Le,mt=ft[0],Ie=ft[1];return mt=mt||0,Ie=(Ie||0)*Ne,[Yt,Li].indexOf(je)>=0?{x:Ie,y:mt}:{x:mt,y:Ie}})(Ce,h.rects,F),Ae},{}),he=ee[h.placement],ve=he.x,xe=he.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=ve,h.modifiersData.popperOffsets.y+=xe),h.modifiersData[w]=ee}},eo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(b){var h=b.state,g=b.name;h.modifiersData[g]=Rn({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})},data:{}},Bc={name:"preventOverflow",enabled:!0,phase:"main",fn:function(b){var h=b.state,g=b.options,w=b.name,z=g.mainAxis,F=z===void 0||z,ee=g.altAxis,he=ee!==void 0&&ee,ve=g.boundary,xe=g.rootBoundary,Ae=g.altBoundary,Ce=g.padding,Pe=g.tether,Be=Pe===void 0||Pe,Le=g.tetherOffset,je=Le===void 0?0:Le,Ne=ar(h,{boundary:ve,rootBoundary:xe,padding:Ce,altBoundary:Ae}),ft=zi(h.placement),mt=Ki(h.placement),Ie=!mt,Ve=xr(ft),Ze=Ve==="x"?"y":"x",Je=h.modifiersData.popperOffsets,ht=h.rects.reference,ct=h.rects.popper,lt=typeof je=="function"?je(Object.assign({},h.rects,{placement:h.placement})):je,Bt=typeof lt=="number"?{mainAxis:lt,altAxis:lt}:Object.assign({mainAxis:0,altAxis:0},lt),Wi=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,Ai={x:0,y:0};if(Je){if(F){var ni,rs=Ve==="y"?Si:Yt,Yi=Ve==="y"?fi:Li,kt=Ve==="y"?"height":"width",Lt=Je[Ve],qt=Lt+Ne[rs],ns=Lt-Ne[Yi],Xt=Be?-ct[kt]/2:0,vt=mt===us?ht[kt]:ct[kt],zt=mt===us?-ct[kt]:-ht[kt],Dt=h.elements.arrow,bt=Be&&Dt?ya(Dt):{width:0,height:0},sn=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$s=sn[rs],Ke=sn[Yi],ut=En(0,ht[kt],bt[kt]),Vt=Ie?ht[kt]/2-Xt-ut-$s-Bt.mainAxis:vt-ut-$s-Bt.mainAxis,bl=Ie?-ht[kt]/2+Xt+ut+Ke+Bt.mainAxis:zt+ut+Ke+Bt.mainAxis,zr=h.elements.arrow&&qs(h.elements.arrow),rn=zr?Ve==="y"?zr.clientTop||0:zr.clientLeft||0:0,Ba=(ni=Wi?.[Ve])!=null?ni:0,La=Lt+bl-Ba,nn=En(Be?ba(qt,Lt+Vt-Ba-rn):qt,Lt,Be?Cr(ns,La):ns);Je[Ve]=nn,Ai[Ve]=nn-Lt}if(he){var uh,Ht=Ve==="x"?Si:Yt,No=Ve==="x"?fi:Li,fr=Je[Ze],za=Ze==="y"?"height":"width",Bo=fr+Ne[Ht],dh=fr-Ne[No],Ha=[Si,Yt].indexOf(ft)!==-1,yl=(uh=Wi?.[Ze])!=null?uh:0,Sl=Ha?Bo:fr-ht[za]-ct[za]-yl+Bt.altAxis,Ti=Ha?fr+ht[za]+ct[za]-yl-Bt.altAxis:dh,Ut=Be&&Ha?(function(wl,Ua,Yn){var Cl=En(wl,Ua,Yn);return Cl>Yn?Yn:Cl})(Sl,fr,Ti):En(Be?Sl:Bo,fr,Be?Ti:dh);Je[Ze]=Ut,Ai[Ze]=Ut-fr}h.modifiersData[w]=Ai}},requiresIfExists:["offset"]};function Cu(b,h,g){g===void 0&&(g=!1);var w,z,F=Zi(h),ee=Zi(h)&&(function(Ce){var Pe=Ce.getBoundingClientRect(),Be=ks(Pe.width)/Ce.offsetWidth||1,Le=ks(Pe.height)/Ce.offsetHeight||1;return Be!==1||Le!==1})(h),he=wi(h),ve=Xr(b,ee,g),xe={scrollLeft:0,scrollTop:0},Ae={x:0,y:0};return(F||!F&&!g)&&((Qi(h)!=="body"||Mn(he))&&(xe=(w=h)!==Ji(w)&&Zi(w)?{scrollLeft:(z=w).scrollLeft,scrollTop:z.scrollTop}:Ci(w)),Zi(h)?((Ae=Xr(h,!0)).x+=h.clientLeft,Ae.y+=h.clientTop):he&&(Ae.x=nr(he))),{x:ve.left+xe.scrollLeft-Ae.x,y:ve.top+xe.scrollTop-Ae.y,width:ve.width,height:ve.height}}function xu(b){var h=new Map,g=new Set,w=[];function z(F){g.add(F.name),[].concat(F.requires||[],F.requiresIfExists||[]).forEach(function(ee){if(!g.has(ee)){var he=h.get(ee);he&&z(he)}}),w.push(F)}return b.forEach(function(F){h.set(F.name,F)}),b.forEach(function(F){g.has(F.name)||z(F)}),w}var to={placement:"bottom",modifiers:[],strategy:"absolute"};function Lc(){for(var b=arguments.length,h=new Array(b),g=0;g<b;g++)h[g]=arguments[g];return!h.some(function(w){return!(w&&typeof w.getBoundingClientRect=="function")})}function ol(b){b===void 0&&(b={});var h=b,g=h.defaultModifiers,w=g===void 0?[]:g,z=h.defaultOptions,F=z===void 0?to:z;return function(ee,he,ve){ve===void 0&&(ve=F);var xe,Ae,Ce={placement:"bottom",orderedModifiers:[],options:Object.assign({},to,F),modifiersData:{},elements:{reference:ee,popper:he},attributes:{},styles:{}},Pe=[],Be=!1,Le={state:Ce,setOptions:function(Ne){var ft=typeof Ne=="function"?Ne(Ce.options):Ne;je(),Ce.options=Object.assign({},F,Ce.options,ft),Ce.scrollParents={reference:ii(ee)?Sa(ee):ee.contextElement?Sa(ee.contextElement):[],popper:Sa(he)};var mt,Ie,Ve=(function(Ze){var Je=xu(Ze);return $l.reduce(function(ht,ct){return ht.concat(Je.filter(function(lt){return lt.phase===ct}))},[])})((mt=[].concat(w,Ce.options.modifiers),Ie=mt.reduce(function(Ze,Je){var ht=Ze[Je.name];return Ze[Je.name]=ht?Object.assign({},ht,Je,{options:Object.assign({},ht.options,Je.options),data:Object.assign({},ht.data,Je.data)}):Je,Ze},{}),Object.keys(Ie).map(function(Ze){return Ie[Ze]})));return Ce.orderedModifiers=Ve.filter(function(Ze){return Ze.enabled}),Ce.orderedModifiers.forEach(function(Ze){var Je=Ze.name,ht=Ze.options,ct=ht===void 0?{}:ht,lt=Ze.effect;if(typeof lt=="function"){var Bt=lt({state:Ce,name:Je,instance:Le,options:ct});Pe.push(Bt||function(){})}}),Le.update()},forceUpdate:function(){if(!Be){var Ne=Ce.elements,ft=Ne.reference,mt=Ne.popper;if(Lc(ft,mt)){Ce.rects={reference:Cu(ft,qs(mt),Ce.options.strategy==="fixed"),popper:ya(mt)},Ce.reset=!1,Ce.placement=Ce.options.placement,Ce.orderedModifiers.forEach(function(lt){return Ce.modifiersData[lt.name]=Object.assign({},lt.data)});for(var Ie=0;Ie<Ce.orderedModifiers.length;Ie++)if(Ce.reset!==!0){var Ve=Ce.orderedModifiers[Ie],Ze=Ve.fn,Je=Ve.options,ht=Je===void 0?{}:Je,ct=Ve.name;typeof Ze=="function"&&(Ce=Ze({state:Ce,options:ht,name:ct,instance:Le})||Ce)}else Ce.reset=!1,Ie=-1}}},update:(xe=function(){return new Promise(function(Ne){Le.forceUpdate(),Ne(Ce)})},function(){return Ae||(Ae=new Promise(function(Ne){Promise.resolve().then(function(){Ae=void 0,Ne(xe())})})),Ae}),destroy:function(){je(),Be=!0}};if(!Lc(ee,he))return Le;function je(){Pe.forEach(function(Ne){return Ne()}),Pe=[]}return Le.setOptions(ve).then(function(Ne){!Be&&ve.onFirstUpdate&&ve.onFirstUpdate(Ne)}),Le}}var Eu=ol(),Au=ol({defaultModifiers:[Dn,eo,Ps,va]}),Ca=ol({defaultModifiers:[Dn,eo,Ps,va,Nc,Mc,Bc,An,ll]});const zc=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Gi,afterRead:ga,afterWrite:el,applyStyles:va,arrow:An,auto:sr,basePlacements:Fs,beforeMain:ma,beforeRead:Wl,beforeWrite:Yl,bottom:fi,clippingParents:Zl,computeStyles:Ps,createPopper:Ca,createPopperBase:Eu,createPopperLite:Au,detectOverflow:ar,end:Mt,eventListeners:Dn,flip:Mc,hide:ll,left:Yt,main:Is,modifierPhases:$l,offset:Nc,placements:Ja,popper:ds,popperGenerator:ol,popperOffsets:eo,preventOverflow:Bc,read:Ec,reference:$r,right:Li,start:us,top:Si,variationPlacements:Kl,viewport:Qa,write:Ac},Symbol.toStringTag,{value:"Module"})),Hc="dropdown",Gr=".bs.dropdown",cl=".data-api",Tu="ArrowUp",Uc="ArrowDown",ku=`hide${Gr}`,Du=`hidden${Gr}`,Mu=`show${Gr}`,Ou=`shown${Gr}`,jc=`click${Gr}${cl}`,Fc=`keydown${Gr}${cl}`,Ru=`keyup${Gr}${cl}`,Er="show",Ds='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nu=`${Ds}.${Er}`,xa=".dropdown-menu",Ic=O()?"top-end":"top-start",qc=O()?"top-start":"top-end",Pc=O()?"bottom-end":"bottom-start",Zc=O()?"bottom-start":"bottom-end",Nn=O()?"left-start":"right-start",Bu=O()?"right-start":"left-start",Lu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},zu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fs extends oe{constructor(h,g){super(h,g),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,xa)[0]||W.prev(this._element,xa)[0]||W.findOne(xa,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Lu}static get DefaultType(){return zu}static get NAME(){return Hc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(x(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!C.trigger(this._element,Mu,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const g of[].concat(...document.body.children))C.on(g,"mouseover",N);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Er),this._element.classList.add(Er),C.trigger(this._element,Ou,h)}}hide(){if(x(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!C.trigger(this._element,ku,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))C.off(g,"mouseover",N);this._popper&&this._popper.destroy(),this._menu.classList.remove(Er),this._element.classList.remove(Er),this._element.setAttribute("aria-expanded","false"),we.removeDataAttribute(this._menu,"popper"),C.trigger(this._element,Du,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!v(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Hc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(zc===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let h=this._element;this._config.reference==="parent"?h=this._parent:v(this._config.reference)?h=_(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const g=this._getPopperConfig();this._popper=Ca(h,this._menu,g)}_isShown(){return this._menu.classList.contains(Er)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return Nn;if(h.classList.contains("dropstart"))return Bu;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const g=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?g?qc:Ic:g?Zc:Pc}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(g=>Number.parseInt(g,10)):typeof h=="function"?g=>h(g,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(we.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...A(this._config.popperConfig,[void 0,h])}}_selectMenuItem({key:h,target:g}){const w=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(z=>T(z));w.length&&I(w,g,h===Uc,!w.includes(g)).focus()}static jQueryInterface(h){return this.each(function(){const g=fs.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const g=W.find(Nu);for(const w of g){const z=fs.getInstance(w);if(!z||z._config.autoClose===!1)continue;const F=h.composedPath(),ee=F.includes(z._menu);if(F.includes(z._element)||z._config.autoClose==="inside"&&!ee||z._config.autoClose==="outside"&&ee||z._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const he={relatedTarget:z._element};h.type==="click"&&(he.clickEvent=h),z._completeHide(he)}}static dataApiKeydownHandler(h){const g=/input|textarea/i.test(h.target.tagName),w=h.key==="Escape",z=[Tu,Uc].includes(h.key);if(!z&&!w||g&&!w)return;h.preventDefault();const F=this.matches(Ds)?this:W.prev(this,Ds)[0]||W.next(this,Ds)[0]||W.findOne(Ds,h.delegateTarget.parentNode),ee=fs.getOrCreateInstance(F);if(z)return h.stopPropagation(),ee.show(),void ee._selectMenuItem(h);ee._isShown()&&(h.stopPropagation(),ee.hide(),F.focus())}}C.on(document,Fc,Ds,fs.dataApiKeydownHandler),C.on(document,Fc,xa,fs.dataApiKeydownHandler),C.on(document,jc,fs.clearMenus),C.on(document,Ru,fs.clearMenus),C.on(document,jc,Ds,function(b){b.preventDefault(),fs.getOrCreateInstance(this).toggle()}),k(fs);const io="backdrop",Bn="show",Ln=`mousedown.bs.${io}`,Hu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},hl={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class so extends ye{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return Hu}static get DefaultType(){return hl}static get NAME(){return io}show(h){if(!this._config.isVisible)return void A(h);this._append();const g=this._getElement();this._config.isAnimated&&D(g),g.classList.add(Bn),this._emulateAnimation(()=>{A(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(Bn),this._emulateAnimation(()=>{this.dispose(),A(h)})):A(h)}dispose(){this._isAppended&&(C.off(this._element,Ln),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=_(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),C.on(h,Ln,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){j(h,this._getElement(),this._config.isAnimated)}}const Ea=".bs.focustrap",ro=`focusin${Ea}`,no=`keydown.tab${Ea}`,ao="backward",Kc={autofocus:!0,trapElement:null},Wc={autofocus:"boolean",trapElement:"element"};class Yc extends ye{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Kc}static get DefaultType(){return Wc}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),C.off(document,Ea),C.on(document,ro,h=>this._handleFocusin(h)),C.on(document,no,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,C.off(document,Ea))}_handleFocusin(h){const{trapElement:g}=this._config;if(h.target===document||h.target===g||g.contains(h.target))return;const w=W.focusableChildren(g);w.length===0?g.focus():this._lastTabNavDirection===ao?w[w.length-1].focus():w[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?ao:"forward")}}const $c=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Xc=".sticky-top",ul="padding-right",Vc="margin-right";class Hi{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ul,g=>g+h),this._setElementAttributes($c,ul,g=>g+h),this._setElementAttributes(Xc,Vc,g=>g-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ul),this._resetElementAttributes($c,ul),this._resetElementAttributes(Xc,Vc)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,g,w){const z=this.getWidth();this._applyManipulationCallback(h,F=>{if(F!==this._element&&window.innerWidth>F.clientWidth+z)return;this._saveInitialAttribute(F,g);const ee=window.getComputedStyle(F).getPropertyValue(g);F.style.setProperty(g,`${w(Number.parseFloat(ee))}px`)})}_saveInitialAttribute(h,g){const w=h.style.getPropertyValue(g);w&&we.setDataAttribute(h,g,w)}_resetElementAttributes(h,g){this._applyManipulationCallback(h,w=>{const z=we.getDataAttribute(w,g);z!==null?(we.removeDataAttribute(w,g),w.style.setProperty(g,z)):w.style.removeProperty(g)})}_applyManipulationCallback(h,g){if(v(h))g(h);else for(const w of W.find(h,this._element))g(w)}}const xi=".bs.modal",Gc=`hide${xi}`,Qc=`hidePrevented${xi}`,lo=`hidden${xi}`,oo=`show${xi}`,co=`shown${xi}`,Uu=`resize${xi}`,zn=`click.dismiss${xi}`,ho=`mousedown.dismiss${xi}`,Aa=`keydown.dismiss${xi}`,uo=`click${xi}.data-api`,fo="modal-open",Ar="show",Tr="modal-static",_o={backdrop:!0,focus:!0,keyboard:!0},Jc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class es extends oe{constructor(h,g){super(h,g),this._dialog=W.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Hi,this._addEventListeners()}static get Default(){return _o}static get DefaultType(){return Jc}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||C.trigger(this._element,oo,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(fo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(C.trigger(this._element,Gc).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ar),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){C.off(window,xi),C.off(this._dialog,xi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new so({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Yc({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const g=W.findOne(".modal-body",this._dialog);g&&(g.scrollTop=0),D(this._element),this._element.classList.add(Ar),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,C.trigger(this._element,co,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){C.on(this._element,Aa,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),C.on(window,Uu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),C.on(this._element,ho,h=>{C.one(this._element,zn,g=>{this._element===h.target&&this._element===g.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(fo),this._resetAdjustments(),this._scrollBar.reset(),C.trigger(this._element,lo)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(C.trigger(this._element,Qc).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,g=this._element.style.overflowY;g==="hidden"||this._element.classList.contains(Tr)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Tr),this._queueCallback(()=>{this._element.classList.remove(Tr),this._queueCallback(()=>{this._element.style.overflowY=g},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,g=this._scrollBar.getWidth(),w=g>0;if(w&&!h){const z=O()?"paddingLeft":"paddingRight";this._element.style[z]=`${g}px`}if(!w&&h){const z=O()?"paddingRight":"paddingLeft";this._element.style[z]=`${g}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,g){return this.each(function(){const w=es.getOrCreateInstance(this,h);if(typeof h=="string"){if(w[h]===void 0)throw new TypeError(`No method named "${h}"`);w[h](g)}})}}C.on(document,uo,'[data-bs-toggle="modal"]',function(b){const h=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&b.preventDefault(),C.one(h,oo,w=>{w.defaultPrevented||C.one(h,lo,()=>{T(this)&&this.focus()})});const g=W.findOne(".modal.show");g&&es.getInstance(g).hide(),es.getOrCreateInstance(h).toggle(this)}),De(es),k(es);const Zs=".bs.offcanvas",po=".data-api",eh=`load${Zs}${po}`,th="show",ih="showing",sh="hiding",go=".offcanvas.show",rh=`show${Zs}`,mo=`shown${Zs}`,Ms=`hide${Zs}`,Ta=`hidePrevented${Zs}`,ts=`hidden${Zs}`,Hn=`resize${Zs}`,vo=`click${Zs}${po}`,dl=`keydown.dismiss${Zs}`,fl={backdrop:!0,keyboard:!0,scroll:!1},bo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ui extends oe{constructor(h,g){super(h,g),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return fl}static get DefaultType(){return bo}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||C.trigger(this._element,rh,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Hi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ih),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(th),this._element.classList.remove(ih),C.trigger(this._element,mo,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(C.trigger(this._element,Ms).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(sh),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(th,sh),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Hi().reset(),C.trigger(this._element,ts)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new so({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():C.trigger(this._element,Ta)}:null})}_initializeFocusTrap(){return new Yc({trapElement:this._element})}_addEventListeners(){C.on(this._element,dl,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():C.trigger(this._element,Ta))})}static jQueryInterface(h){return this.each(function(){const g=Ui.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h](this)}})}}C.on(document,vo,'[data-bs-toggle="offcanvas"]',function(b){const h=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&b.preventDefault(),x(this))return;C.one(h,ts,()=>{T(this)&&this.focus()});const g=W.findOne(go);g&&g!==h&&Ui.getInstance(g).hide(),Ui.getOrCreateInstance(h).toggle(this)}),C.on(window,eh,()=>{for(const b of W.find(go))Ui.getOrCreateInstance(b).show()}),C.on(window,Hn,()=>{for(const b of W.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(b).position!=="fixed"&&Ui.getOrCreateInstance(b).hide()}),De(Ui),k(Ui);const yo={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},_l=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Un=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ju=(b,h)=>{const g=b.nodeName.toLowerCase();return h.includes(g)?!_l.has(g)||!!Un.test(b.nodeValue):h.filter(w=>w instanceof RegExp).some(w=>w.test(g))},is={allowList:yo,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},So={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},lr={entry:"(string|element|function|null)",selector:"(string|element)"};class nh extends ye{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return is}static get DefaultType(){return So}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[z,F]of Object.entries(this._config.content))this._setContent(h,F,z);const g=h.children[0],w=this._resolvePossibleFunction(this._config.extraClass);return w&&g.classList.add(...w.split(" ")),g}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[g,w]of Object.entries(h))super._typeCheckConfig({selector:g,entry:w},lr)}_setContent(h,g,w){const z=W.findOne(w,h);z&&((g=this._resolvePossibleFunction(g))?v(g)?this._putElementInTemplate(_(g),z):this._config.html?z.innerHTML=this._maybeSanitize(g):z.textContent=g:z.remove())}_maybeSanitize(h){return this._config.sanitize?(function(g,w,z){if(!g.length)return g;if(z&&typeof z=="function")return z(g);const F=new window.DOMParser().parseFromString(g,"text/html"),ee=[].concat(...F.body.querySelectorAll("*"));for(const he of ee){const ve=he.nodeName.toLowerCase();if(!Object.keys(w).includes(ve)){he.remove();continue}const xe=[].concat(...he.attributes),Ae=[].concat(w["*"]||[],w[ve]||[]);for(const Ce of xe)ju(Ce,Ae)||he.removeAttribute(Ce.nodeName)}return F.body.innerHTML})(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return A(h,[void 0,this])}_putElementInTemplate(h,g){if(this._config.html)return g.innerHTML="",void g.append(h);g.textContent=h.textContent}}const pl=new Set(["sanitize","allowList","sanitizeFn"]),or="fade",jn="show",ah=".tooltip-inner",gl=".modal",wo="hide.bs.modal",Ei="hover",kr="focus",Dr="click",ml={AUTO:"auto",TOP:"top",RIGHT:O()?"left":"right",BOTTOM:"bottom",LEFT:O()?"right":"left"},ka={allowList:yo,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},_s={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class si extends oe{constructor(h,g){if(zc===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(h,g),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ka}static get DefaultType(){return _s}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),C.off(this._element.closest(gl),wo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=C.trigger(this._element,this.constructor.eventName("show")),g=(E(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!g)return;this._disposePopper();const w=this._getTipElement();this._element.setAttribute("aria-describedby",w.getAttribute("id"));const{container:z}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(z.append(w),C.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(w),w.classList.add(jn),"ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))C.on(F,"mouseover",N);this._queueCallback(()=>{C.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!C.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(jn),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))C.off(h,"mouseover",N);this._activeTrigger[Dr]=!1,this._activeTrigger[kr]=!1,this._activeTrigger[Ei]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),C.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const g=this._getTemplateFactory(h).toHtml();if(!g)return null;g.classList.remove(or,jn),g.classList.add(`bs-${this.constructor.NAME}-auto`);const w=(z=>{do z+=Math.floor(1e6*Math.random());while(document.getElementById(z));return z})(this.constructor.NAME).toString();return g.setAttribute("id",w),this._isAnimated()&&g.classList.add(or),g}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new nh({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ah]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(or)}_isShown(){return this.tip&&this.tip.classList.contains(jn)}_createPopper(h){const g=A(this._config.placement,[this,h,this._element]),w=ml[g.toUpperCase()];return Ca(this._element,h,this._getPopperConfig(w))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(g=>Number.parseInt(g,10)):typeof h=="function"?g=>h(g,this._element):h}_resolvePossibleFunction(h){return A(h,[this._element,this._element])}_getPopperConfig(h){const g={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:w=>{this._getTipElement().setAttribute("data-popper-placement",w.state.placement)}}]};return{...g,...A(this._config.popperConfig,[void 0,g])}}_setListeners(){const h=this._config.trigger.split(" ");for(const g of h)if(g==="click")C.on(this._element,this.constructor.eventName("click"),this._config.selector,w=>{const z=this._initializeOnDelegatedTarget(w);z._activeTrigger[Dr]=!(z._isShown()&&z._activeTrigger[Dr]),z.toggle()});else if(g!=="manual"){const w=g===Ei?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),z=g===Ei?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");C.on(this._element,w,this._config.selector,F=>{const ee=this._initializeOnDelegatedTarget(F);ee._activeTrigger[F.type==="focusin"?kr:Ei]=!0,ee._enter()}),C.on(this._element,z,this._config.selector,F=>{const ee=this._initializeOnDelegatedTarget(F);ee._activeTrigger[F.type==="focusout"?kr:Ei]=ee._element.contains(F.relatedTarget),ee._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},C.on(this._element.closest(gl),wo,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,g){clearTimeout(this._timeout),this._timeout=setTimeout(h,g)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const g=we.getDataAttributes(this._element);for(const w of Object.keys(g))pl.has(w)&&delete g[w];return h={...g,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:_(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[g,w]of Object.entries(this._config))this.constructor.Default[g]!==w&&(h[g]=w);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const g=si.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}}k(si);const Mr=".popover-header",Ks=".popover-body",Ws={...si.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},cr={...si.DefaultType,content:"(null|string|element|function)"};class Da extends si{static get Default(){return Ws}static get DefaultType(){return cr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Mr]:this._getTitle(),[Ks]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const g=Da.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}}k(Da);const Ma=".bs.scrollspy",Co=`activate${Ma}`,xo=`click${Ma}`,_i=`load${Ma}.data-api`,dt="active",Qe="[href]",hr=".nav-link",ps=`${hr}, .nav-item > ${hr}, .list-group-item`,Eo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Or={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Fn extends oe{constructor(h,g){super(h,g),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Eo}static get DefaultType(){return Or}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=_(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(g=>Number.parseFloat(g))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(C.off(this._config.target,xo),C.on(this._config.target,xo,Qe,h=>{const g=this._observableSections.get(h.target.hash);if(g){h.preventDefault();const w=this._rootElement||window,z=g.offsetTop-this._element.offsetTop;if(w.scrollTo)return void w.scrollTo({top:z,behavior:"smooth"});w.scrollTop=z}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(g=>this._observerCallback(g),h)}_observerCallback(h){const g=ee=>this._targetLinks.get(`#${ee.target.id}`),w=ee=>{this._previousScrollData.visibleEntryTop=ee.target.offsetTop,this._process(g(ee))},z=(this._rootElement||document.documentElement).scrollTop,F=z>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=z;for(const ee of h){if(!ee.isIntersecting){this._activeTarget=null,this._clearActiveClass(g(ee));continue}const he=ee.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(F&&he){if(w(ee),!z)return}else F||he||w(ee)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=W.find(Qe,this._config.target);for(const g of h){if(!g.hash||x(g))continue;const w=W.findOne(decodeURI(g.hash),this._element);T(w)&&(this._targetLinks.set(decodeURI(g.hash),g),this._observableSections.set(g.hash,w))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(dt),this._activateParents(h),C.trigger(this._element,Co,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))W.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(dt);else for(const g of W.parents(h,".nav, .list-group"))for(const w of W.prev(g,ps))w.classList.add(dt)}_clearActiveClass(h){h.classList.remove(dt);const g=W.find(`${Qe}.${dt}`,h);for(const w of g)w.classList.remove(dt)}static jQueryInterface(h){return this.each(function(){const g=Fn.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}})}}C.on(window,_i,()=>{for(const b of W.find('[data-bs-spy="scroll"]'))Fn.getOrCreateInstance(b)}),k(Fn);const Rr=".bs.tab",In=`hide${Rr}`,Qr=`hidden${Rr}`,Ao=`show${Rr}`,Oa=`shown${Rr}`,To=`click${Rr}`,Jr=`keydown${Rr}`,ur=`load${Rr}`,Nr="ArrowLeft",Ys="ArrowRight",ko="ArrowUp",vl="ArrowDown",Br="Home",Ra="End",ss="active",ri="fade",qn="show",Do=".dropdown-toggle",Mo=`:not(${Do})`,lh='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oo=`.nav-link${Mo}, .list-group-item${Mo}, [role="tab"]${Mo}, ${lh}`,$t=`.${ss}[data-bs-toggle="tab"], .${ss}[data-bs-toggle="pill"], .${ss}[data-bs-toggle="list"]`;class dr extends oe{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),C.on(this._element,Jr,g=>this._keydown(g)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const g=this._getActiveElem(),w=g?C.trigger(g,In,{relatedTarget:h}):null;C.trigger(h,Ao,{relatedTarget:g}).defaultPrevented||w&&w.defaultPrevented||(this._deactivate(g,h),this._activate(h,g))}_activate(h,g){h&&(h.classList.add(ss),this._activate(W.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),C.trigger(h,Oa,{relatedTarget:g})):h.classList.add(qn)},h,h.classList.contains(ri)))}_deactivate(h,g){h&&(h.classList.remove(ss),h.blur(),this._deactivate(W.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),C.trigger(h,Qr,{relatedTarget:g})):h.classList.remove(qn)},h,h.classList.contains(ri)))}_keydown(h){if(![Nr,Ys,ko,vl,Br,Ra].includes(h.key))return;h.stopPropagation(),h.preventDefault();const g=this._getChildren().filter(z=>!x(z));let w;if([Br,Ra].includes(h.key))w=g[h.key===Br?0:g.length-1];else{const z=[Ys,vl].includes(h.key);w=I(g,h.target,z,!0)}w&&(w.focus({preventScroll:!0}),dr.getOrCreateInstance(w).show())}_getChildren(){return W.find(Oo,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,g){this._setAttributeIfNotExists(h,"role","tablist");for(const w of g)this._setInitialAttributesOnChild(w)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const g=this._elemIsActive(h),w=this._getOuterElement(h);h.setAttribute("aria-selected",g),w!==h&&this._setAttributeIfNotExists(w,"role","presentation"),g||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const g=W.getElementFromSelector(h);g&&(this._setAttributeIfNotExists(g,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(g,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,g){const w=this._getOuterElement(h);if(!w.classList.contains("dropdown"))return;const z=(F,ee)=>{const he=W.findOne(F,w);he&&he.classList.toggle(ee,g)};z(Do,ss),z(".dropdown-menu",qn),w.setAttribute("aria-expanded",g)}_setAttributeIfNotExists(h,g,w){h.hasAttribute(g)||h.setAttribute(g,w)}_elemIsActive(h){return h.classList.contains(ss)}_getInnerElement(h){return h.matches(Oo)?h:W.findOne(Oo,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const g=dr.getOrCreateInstance(this);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}})}}C.on(document,To,lh,function(b){["A","AREA"].includes(this.tagName)&&b.preventDefault(),x(this)||dr.getOrCreateInstance(this).show()}),C.on(window,ur,()=>{for(const b of W.find($t))dr.getOrCreateInstance(b)}),k(dr);const gs=".bs.toast",Na=`mouseover${gs}`,Ro=`mouseout${gs}`,Pn=`focusin${gs}`,Zn=`focusout${gs}`,Fu=`hide${gs}`,oh=`hidden${gs}`,Iu=`show${gs}`,ch=`shown${gs}`,Lr="hide",Kn="show",en="showing",hh={animation:"boolean",autohide:"boolean",delay:"number"},Wn={animation:!0,autohide:!0,delay:5e3};class tn extends oe{constructor(h,g){super(h,g),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Wn}static get DefaultType(){return hh}static get NAME(){return"toast"}show(){C.trigger(this._element,Iu).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Lr),D(this._element),this._element.classList.add(Kn,en),this._queueCallback(()=>{this._element.classList.remove(en),C.trigger(this._element,ch),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(C.trigger(this._element,Fu).defaultPrevented||(this._element.classList.add(en),this._queueCallback(()=>{this._element.classList.add(Lr),this._element.classList.remove(en,Kn),C.trigger(this._element,oh)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Kn),super.dispose()}isShown(){return this._element.classList.contains(Kn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,g){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=g;break;case"focusin":case"focusout":this._hasKeyboardInteraction=g}if(g)return void this._clearTimeout();const w=h.relatedTarget;this._element===w||this._element.contains(w)||this._maybeScheduleHide()}_setListeners(){C.on(this._element,Na,h=>this._onInteraction(h,!0)),C.on(this._element,Ro,h=>this._onInteraction(h,!1)),C.on(this._element,Pn,h=>this._onInteraction(h,!0)),C.on(this._element,Zn,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const g=tn.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h](this)}})}}return De(tn),k(tn),{Alert:Kt,Button:cs,Carousel:js,Collapse:Cn,Dropdown:fs,Modal:es,Offcanvas:Ui,Popover:Da,ScrollSpy:Fn,Tab:dr,Toast:tn,Tooltip:si}})})(su)),su.exports}Py();class Zy{port=null;reader=null;writer=null;dataCallback=null;statusCallback=null;reading=!1;keepReading=!0;isSupported(){return"serial"in navigator}onData(s){this.dataCallback=s}onStatusChange(s){this.statusCallback=s,s(this.isConnected())}async connect(s){try{if(!this.isSupported())throw new Error("Web Serial API is not supported");return this.port&&await this.disconnect(),this.port=await navigator.serial.requestPort(),await this.port.open({baudRate:s.baudRate,dataBits:s.dataBits||8,stopBits:s.stopBits||1,parity:s.parity||"none",bufferSize:s.bufferSize||255,flowControl:s.flowControl||"none"}),this.port.writable&&this.port.readable?(this.writer=this.port.writable.getWriter(),this.reader=this.port.readable.getReader(),this.keepReading=!0,this.startReading(),this.statusCallback?.(!0),!0):!1}catch(n){return console.error("Serial connection failed:",n),this.statusCallback?.(!1),!1}}async startReading(){if(!(this.reading||!this.reader)){this.reading=!0;try{for(;this.keepReading&&this.reader;){const{value:s,done:n}=await this.reader.read();if(n)break;s&&this.dataCallback?.(s,"rx")}}catch(s){console.error("Serial read error:",s)}finally{this.reading=!1}}}async send(s){if(!this.writer)return!1;try{const n=typeof s=="string"?new TextEncoder().encode(s):s;return await this.writer.write(n),this.dataCallback?.(n,"tx"),!0}catch(n){return console.error("Serial send failed:",n),!1}}async disconnect(){this.keepReading=!1,this.reader&&(await this.reader.cancel().catch(()=>{}),this.reader.releaseLock(),this.reader=null),this.writer&&(await this.writer.close().catch(()=>{}),this.writer.releaseLock(),this.writer=null),this.port&&(await this.port.close().catch(()=>{}),this.port=null),this.statusCallback?.(!1)}isConnected(){return this.port!==null}async cleanup(){await this.disconnect()}}const qa=new Zy;class Ky{device=null;characteristic=null;dataCallback=null;statusCallback=null;writeQueue=Promise.resolve();isSupported(){return"bluetooth"in navigator}onData(s){this.dataCallback=s}onStatusChange(s){this.statusCallback=s,s(this.isConnected())}parseUUID(s){if(typeof s=="number")return s;if(!s)return"";const n=s.toString().toLowerCase().trim();return n.startsWith("0x")||/^[0-9a-f]{1,4}$/.test(n)?parseInt(n,16):n}async connect(s){try{if(!this.isSupported())throw new Error("Web Bluetooth API is not supported");const n=this.parseUUID(s.serviceUUID||""),l=this.parseUUID(s.characteristicUUID||""),o=[];n&&o.push(n),s.optionalServices&&s.optionalServices.forEach(v=>{const _=this.parseUUID(v);o.includes(_)||o.push(_)});let d;s.namePrefix?d={filters:[{namePrefix:s.namePrefix}],optionalServices:o}:s.acceptAllDevices?d={acceptAllDevices:!0,optionalServices:o}:n?d={filters:[{services:[n]}],optionalServices:o}:d={acceptAllDevices:!0,optionalServices:o},console.log("Requesting Bluetooth device...",d),this.device=await navigator.bluetooth.requestDevice(d),this.device.addEventListener("gattserverdisconnected",this.handleDisconnect.bind(this)),console.log("Connecting to GATT server...");const f=await this.device.gatt?.connect();if(!f)throw new Error("Failed to connect to GATT server");console.log("Accessing service:",n);const p=await f.getPrimaryService(n);return console.log("Accessing characteristic:",l),this.characteristic=await p.getCharacteristic(l),await this.characteristic.startNotifications(),this.characteristic.addEventListener("characteristicvaluechanged",v=>{const _=v.target;_.value&&this.dataCallback?.(new Uint8Array(_.value.buffer),"rx")}),this.statusCallback?.(!0),!0}catch(n){return console.error("Bluetooth connection failed:",n),this.statusCallback?.(!1),!1}}handleDisconnect(){console.log("Bluetooth device disconnected"),this.statusCallback?.(!1),this.characteristic=null,this.device=null,this.writeQueue=Promise.resolve()}async send(s){if(!this.characteristic)return!1;const n=typeof s=="string"?new TextEncoder().encode(s):s;return this.writeQueue=this.writeQueue.then(async()=>{try{if(!this.characteristic)return;for(let l=0;l<n.length;l+=127){const o=Math.min(n.length,l+127),d=new Uint8Array(n.buffer,n.byteOffset+l,o-l);await this.characteristic.writeValue(d)}this.dataCallback?.(n,"tx")}catch(l){console.error("Bluetooth send failed:",l)}}),await this.writeQueue,!0}async disconnect(){if(this.characteristic){try{await this.characteristic.stopNotifications()}catch{}this.characteristic=null}this.device?.gatt?.connected&&this.device.gatt.disconnect(),this.device=null,this.writeQueue=Promise.resolve(),this.statusCallback?.(!1)}isConnected(){return this.device?.gatt?.connected||!1}async cleanup(){await this.disconnect()}}const Pa=new Ky,mu={zh:{title:"Web Serial Assistant",connected:"",disconnected:"",connectionType:"",serial:"",ble:"BLE",serialConfig:"",baudRate:"",dataBits:"",stopBits:"",parity:"",openSerial:"",bleConfig:"BLE ",filterType:"",byService:" UUID",byName:"",showAll:"",namePrefix:"",serviceUUID:" UUID (Service)",charUUID:" UUID (Characteristic)",searchConnect:"",displaySettings:"",hexMode:"HEX ",shellMode:"Shell ",encoding:"",darkMode:"",sendData:"",inputHex:" HEX  (: 01 02 03 FF)",inputText:"",send:"",disconnect:"",terminal:"",noMessages:"",copyAll:"",clear:"",copied:"",notSupportedSerial:" Web Serial API",notSupportedBLE:" Web Bluetooth API",connectSerialFail:"",connectBLEFail:" UUID ",sendFail:"",ttyTitle:"Xterm.js  ( sz/rz)",auto:"",light:"",language:"",commonCommands:"",addCommand:"",commandName:"",commandContent:"",save:"",delete:"",edit:"",noCommands:"",typeText:"",typeHex:"HEX",statistics:"",rx:" (RX)",tx:" (TX)",reset:"",bytes:"",frameTimeout:" (ms)",maxHistory:"",protocolMode:"",protocolSettings:"",packFunc:" (Pack)",unpackFunc:" (Unpack)",toStringFunc:" (toString)",protocolEnabled:"",help:"",protocolHelp:" JavaScript utils  utils.hexToUint8Array, utils.uint8ArrayToHex, utils.crc16modbus ",presets:""},en:{title:"Web Serial Assistant",connected:"Connected",disconnected:"Disconnected",connectionType:"Connection Type",serial:"Serial",ble:"BLE",serialConfig:"Serial Config",baudRate:"Baud Rate",dataBits:"Data Bits",stopBits:"Stop Bits",parity:"Parity",openSerial:"Open Serial",bleConfig:"BLE Config",filterType:"Filter Type",byService:"By Service UUID",byName:"By Name Prefix",showAll:"Show All Devices",namePrefix:"Name Prefix",serviceUUID:"Service UUID",charUUID:"Characteristic UUID",searchConnect:"Search & Connect",displaySettings:"Display Settings",hexMode:"HEX Mode",shellMode:"Shell Mode",encoding:"Encoding",darkMode:"Dark Mode",sendData:"Send Data",inputHex:"Enter HEX data (e.g., 01 02 03 FF)",inputText:"Enter text data",send:"Send",disconnect:"Disconnect",terminal:"Terminal",noMessages:"No messages",copyAll:"Copy All",clear:"Clear",copied:"Copied to clipboard",notSupportedSerial:"Web Serial API is not supported in this browser",notSupportedBLE:"Web Bluetooth API is not supported in this browser",connectSerialFail:"Failed to connect serial port",connectBLEFail:"Failed to connect BLE, please check Service UUID",sendFail:"Failed to send data",ttyTitle:"Xterm.js Console (Supports sz/rz)",auto:"Auto",light:"Light",language:"Language",commonCommands:"Common Commands",addCommand:"Add Command",commandName:"Name",commandContent:"Content",save:"Save",delete:"Delete",edit:"Edit",noCommands:"No common commands",typeText:"Text",typeHex:"HEX",statistics:"Statistics",rx:"RX",tx:"TX",reset:"Reset",bytes:"Bytes",frameTimeout:"Frame Timeout (ms)",maxHistory:"Max History Lines",protocolMode:"Protocol Mode",protocolSettings:"Protocol Settings",packFunc:"Pack Function",unpackFunc:"Unpack Function",toStringFunc:"toString Function",protocolEnabled:"Enable Custom Protocol",help:"Help",protocolHelp:"Custom protocol scripts support JavaScript. You can access utility functions in the utils object, such as utils.hexToUint8Array, utils.uint8ArrayToHex, utils.crc16modbus, etc.",presets:"Presets"}},Wy=({messages:t,hexMode:s,onClear:n,onCopy:l,autoScroll:o=!0,lang:d})=>{const f=Fe.useRef(null),p=mu[d];Fe.useEffect(()=>{o&&f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t,o]);const v=E=>{if(s)try{return E.split("").map(N=>N.charCodeAt(0).toString(16).padStart(2,"0")).join(" ").toUpperCase()}catch{return E}return E},_=E=>E==="rx"?"message-rx":"message-tx",T=E=>E==="rx"?"bi-arrow-down":"bi-arrow-up",x=E=>E==="rx"?"RX":"TX";return R.jsxs("div",{className:"terminal-container",children:[R.jsxs("div",{className:"terminal-header",children:[R.jsxs("h6",{className:"mb-0",children:[R.jsx("i",{className:"bi bi-terminal me-2"}),p.terminal]}),R.jsxs("div",{className:"terminal-actions",children:[R.jsx("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:l,title:p.copyAll,children:R.jsx("i",{className:"bi bi-clipboard"})}),R.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:n,title:p.clear,children:R.jsx("i",{className:"bi bi-trash"})})]})]}),R.jsx("div",{ref:f,className:"terminal-content custom-scrollbar",children:t.length===0?R.jsxs("div",{className:"terminal-empty",children:[R.jsx("i",{className:"bi bi-chat-quote"}),R.jsx("p",{children:p.noMessages})]}):t.map(E=>R.jsxs("div",{className:`terminal-message ${_(E.direction)}`,children:[R.jsxs("div",{className:"message-meta",children:[R.jsxs("span",{className:"message-direction",children:[R.jsx("i",{className:`bi ${T(E.direction)}`}),x(E.direction)]}),R.jsxs("div",{className:"d-flex align-items-center gap-2",children:[R.jsx("span",{className:"message-timestamp",children:new Date(E.timestamp).toLocaleTimeString()}),E.count&&E.count>1&&R.jsxs("span",{className:"message-count",children:["x",E.count]})]})]}),R.jsx("div",{className:"message-data",children:v(E.data)})]},E.id))})]})};var Mv=Object.defineProperty,Yy=Object.getOwnPropertyDescriptor,$y=(t,s)=>{for(var n in s)Mv(t,n,{get:s[n],enumerable:!0})},Jt=(t,s,n,l)=>{for(var o=l>1?void 0:l?Yy(s,n):s,d=t.length-1,f;d>=0;d--)(f=t[d])&&(o=(l?f(s,n,o):f(o))||o);return l&&o&&Mv(s,n,o),o},Ee=(t,s)=>(n,l)=>s(n,l,t),bm="Terminal input",Nf={get:()=>bm,set:t=>bm=t},ym="Too much output to announce, navigate to rows manually to read",Bf={get:()=>ym,set:t=>ym=t};function Xy(t){return t.replace(/\r?\n/g,"\r")}function Vy(t,s){return s?"\x1B[200~"+t+"\x1B[201~":t}function Gy(t,s){t.clipboardData&&t.clipboardData.setData("text/plain",s.selectionText),t.preventDefault()}function Qy(t,s,n,l){if(t.stopPropagation(),t.clipboardData){let o=t.clipboardData.getData("text/plain");Ov(o,s,n,l)}}function Ov(t,s,n,l){t=Xy(t),t=Vy(t,n.decPrivateModes.bracketedPasteMode&&l.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(t,!0),s.value=""}function Rv(t,s,n){let l=n.getBoundingClientRect(),o=t.clientX-l.left-10,d=t.clientY-l.top-10;s.style.width="20px",s.style.height="20px",s.style.left=`${o}px`,s.style.top=`${d}px`,s.style.zIndex="1000",s.focus()}function Sm(t,s,n,l,o){Rv(t,s,n),o&&l.rightClickSelect(t),s.value=l.selectionText,s.select()}function ua(t){return t>65535?(t-=65536,String.fromCharCode((t>>10)+55296)+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)}function vu(t,s=0,n=t.length){let l="";for(let o=s;o<n;++o){let d=t[o];d>65535?(d-=65536,l+=String.fromCharCode((d>>10)+55296)+String.fromCharCode(d%1024+56320)):l+=String.fromCharCode(d)}return l}var Jy=class{constructor(){this._interim=0}clear(){this._interim=0}decode(t,s){let n=t.length;if(!n)return 0;let l=0,o=0;if(this._interim){let d=t.charCodeAt(o++);56320<=d&&d<=57343?s[l++]=(this._interim-55296)*1024+d-56320+65536:(s[l++]=this._interim,s[l++]=d),this._interim=0}for(let d=o;d<n;++d){let f=t.charCodeAt(d);if(55296<=f&&f<=56319){if(++d>=n)return this._interim=f,l;let p=t.charCodeAt(d);56320<=p&&p<=57343?s[l++]=(f-55296)*1024+p-56320+65536:(s[l++]=f,s[l++]=p);continue}f!==65279&&(s[l++]=f)}return l}},e0=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(t,s){let n=t.length;if(!n)return 0;let l=0,o,d,f,p,v=0,_=0;if(this.interim[0]){let E=!1,N=this.interim[0];N&=(N&224)===192?31:(N&240)===224?15:7;let D=0,H;for(;(H=this.interim[++D]&63)&&D<4;)N<<=6,N|=H;let y=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,O=y-D;for(;_<O;){if(_>=n)return 0;if(H=t[_++],(H&192)!==128){_--,E=!0;break}else this.interim[D++]=H,N<<=6,N|=H&63}E||(y===2?N<128?_--:s[l++]=N:y===3?N<2048||N>=55296&&N<=57343||N===65279||(s[l++]=N):N<65536||N>1114111||(s[l++]=N)),this.interim.fill(0)}let T=n-4,x=_;for(;x<n;){for(;x<T&&!((o=t[x])&128)&&!((d=t[x+1])&128)&&!((f=t[x+2])&128)&&!((p=t[x+3])&128);)s[l++]=o,s[l++]=d,s[l++]=f,s[l++]=p,x+=4;if(o=t[x++],o<128)s[l++]=o;else if((o&224)===192){if(x>=n)return this.interim[0]=o,l;if(d=t[x++],(d&192)!==128){x--;continue}if(v=(o&31)<<6|d&63,v<128){x--;continue}s[l++]=v}else if((o&240)===224){if(x>=n)return this.interim[0]=o,l;if(d=t[x++],(d&192)!==128){x--;continue}if(x>=n)return this.interim[0]=o,this.interim[1]=d,l;if(f=t[x++],(f&192)!==128){x--;continue}if(v=(o&15)<<12|(d&63)<<6|f&63,v<2048||v>=55296&&v<=57343||v===65279)continue;s[l++]=v}else if((o&248)===240){if(x>=n)return this.interim[0]=o,l;if(d=t[x++],(d&192)!==128){x--;continue}if(x>=n)return this.interim[0]=o,this.interim[1]=d,l;if(f=t[x++],(f&192)!==128){x--;continue}if(x>=n)return this.interim[0]=o,this.interim[1]=d,this.interim[2]=f,l;if(p=t[x++],(p&192)!==128){x--;continue}if(v=(o&7)<<18|(d&63)<<12|(f&63)<<6|p&63,v<65536||v>1114111)continue;s[l++]=v}}return l}},Nv="",da=" ",bc=class Bv{constructor(){this.fg=0,this.bg=0,this.extended=new hu}static toColorRGB(s){return[s>>>16&255,s>>>8&255,s&255]}static fromColorRGB(s){return(s[0]&255)<<16|(s[1]&255)<<8|s[2]&255}clone(){let s=new Bv;return s.fg=this.fg,s.bg=this.bg,s.extended=this.extended.clone(),s}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},hu=class Lv{constructor(s=0,n=0){this._ext=0,this._urlId=0,this._ext=s,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(s){this._ext=s}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(s){this._ext&=-469762049,this._ext|=s<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(s){this._ext&=-67108864,this._ext|=s&67108863}get urlId(){return this._urlId}set urlId(s){this._urlId=s}get underlineVariantOffset(){let s=(this._ext&3758096384)>>29;return s<0?s^4294967288:s}set underlineVariantOffset(s){this._ext&=536870911,this._ext|=s<<29&3758096384}clone(){return new Lv(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},er=class zv extends bc{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new hu,this.combinedData=""}static fromCharData(s){let n=new zv;return n.setFromCharData(s),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?ua(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(s){this.fg=s[0],this.bg=0;let n=!1;if(s[1].length>2)n=!0;else if(s[1].length===2){let l=s[1].charCodeAt(0);if(55296<=l&&l<=56319){let o=s[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(l-55296)*1024+o-56320+65536|s[2]<<22:n=!0}else n=!0}else this.content=s[1].charCodeAt(0)|s[2]<<22;n&&(this.combinedData=s[1],this.content=2097152|s[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},wm="di$target",Lf="di$dependencies",af=new Map;function t0(t){return t[Lf]||[]}function Ni(t){if(af.has(t))return af.get(t);let s=function(n,l,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i0(s,n,o)};return s._id=t,af.set(t,s),s}function i0(t,s,n){s[wm]===s?s[Lf].push({id:t,index:n}):(s[Lf]=[{id:t,index:n}],s[wm]=s)}var ls=Ni("BufferService"),Hv=Ni("CoreMouseService"),Ga=Ni("CoreService"),s0=Ni("CharsetService"),m_=Ni("InstantiationService"),Uv=Ni("LogService"),os=Ni("OptionsService"),jv=Ni("OscLinkService"),r0=Ni("UnicodeService"),yc=Ni("DecorationService"),zf=class{constructor(t,s,n){this._bufferService=t,this._optionsService=s,this._oscLinkService=n}provideLinks(t,s){let n=this._bufferService.buffer.lines.get(t-1);if(!n){s(void 0);return}let l=[],o=this._optionsService.rawOptions.linkHandler,d=new er,f=n.getTrimmedLength(),p=-1,v=-1,_=!1;for(let T=0;T<f;T++)if(!(v===-1&&!n.hasContent(T))){if(n.loadCell(T,d),d.hasExtendedAttrs()&&d.extended.urlId)if(v===-1){v=T,p=d.extended.urlId;continue}else _=d.extended.urlId!==p;else v!==-1&&(_=!0);if(_||v!==-1&&T===f-1){let x=this._oscLinkService.getLinkData(p)?.uri;if(x){let E={start:{x:v+1,y:t},end:{x:T+(!_&&T===f-1?1:0),y:t}},N=!1;if(!o?.allowNonHttpProtocols)try{let D=new URL(x);["http:","https:"].includes(D.protocol)||(N=!0)}catch{N=!0}N||l.push({text:x,range:E,activate:(D,H)=>o?o.activate(D,H,E):n0(D,H),hover:(D,H)=>o?.hover?.(D,H,E),leave:(D,H)=>o?.leave?.(D,H,E)})}_=!1,d.hasExtendedAttrs()&&d.extended.urlId?(v=T,p=d.extended.urlId):(v=-1,p=-1)}}s(l)}};zf=Jt([Ee(0,ls),Ee(1,os),Ee(2,jv)],zf);function n0(t,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}var bu=Ni("CharSizeService"),bn=Ni("CoreBrowserService"),v_=Ni("MouseService"),yn=Ni("RenderService"),a0=Ni("SelectionService"),Fv=Ni("CharacterJoinerService"),Il=Ni("ThemeService"),Iv=Ni("LinkProviderService"),l0=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?Cm.isErrorNoTelemetry(t)?new Cm(t.message+`

`+t.stack):new Error(t.message+`

`+t.stack):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(s=>{s(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}},o0=new l0;function ru(t){c0(t)||o0.onUnexpectedError(t)}var Hf="Canceled";function c0(t){return t instanceof h0?!0:t instanceof Error&&t.name===Hf&&t.message===Hf}var h0=class extends Error{constructor(){super(Hf),this.name=this.message}};function u0(t){return new Error(`Illegal argument: ${t}`)}var Cm=class Uf extends Error{constructor(s){super(s),this.name="CodeExpectedError"}static fromError(s){if(s instanceof Uf)return s;let n=new Uf;return n.message=s.message,n.stack=s.stack,n}static isErrorNoTelemetry(s){return s.name==="CodeExpectedError"}},jf=class qv extends Error{constructor(s){super(s||"An unexpected bug occurred."),Object.setPrototypeOf(this,qv.prototype)}};function Bs(t,s=0){return t[t.length-(1+s)]}var d0;(t=>{function s(d){return d<0}t.isLessThan=s;function n(d){return d<=0}t.isLessThanOrEqual=n;function l(d){return d>0}t.isGreaterThan=l;function o(d){return d===0}t.isNeitherLessOrGreaterThan=o,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(d0||={});function f0(t,s){let n=this,l=!1,o;return function(){return l||(l=!0,s||(o=t.apply(n,arguments))),o}}var Pv;(t=>{function s(j){return j&&typeof j=="object"&&typeof j[Symbol.iterator]=="function"}t.is=s;let n=Object.freeze([]);function l(){return n}t.empty=l;function*o(j){yield j}t.single=o;function d(j){return s(j)?j:o(j)}t.wrap=d;function f(j){return j||n}t.from=f;function*p(j){for(let I=j.length-1;I>=0;I--)yield j[I]}t.reverse=p;function v(j){return!j||j[Symbol.iterator]().next().done===!0}t.isEmpty=v;function _(j){return j[Symbol.iterator]().next().value}t.first=_;function T(j,I){let U=0;for(let G of j)if(I(G,U++))return!0;return!1}t.some=T;function x(j,I){for(let U of j)if(I(U))return U}t.find=x;function*E(j,I){for(let U of j)I(U)&&(yield U)}t.filter=E;function*N(j,I){let U=0;for(let G of j)yield I(G,U++)}t.map=N;function*D(j,I){let U=0;for(let G of j)yield*I(G,U++)}t.flatMap=D;function*H(...j){for(let I of j)yield*I}t.concat=H;function y(j,I,U){let G=U;for(let P of j)G=I(G,P);return G}t.reduce=y;function*O(j,I,U=j.length){for(I<0&&(I+=j.length),U<0?U+=j.length:U>j.length&&(U=j.length);I<U;I++)yield j[I]}t.slice=O;function k(j,I=Number.POSITIVE_INFINITY){let U=[];if(I===0)return[U,j];let G=j[Symbol.iterator]();for(let P=0;P<I;P++){let re=G.next();if(re.done)return[U,t.empty()];U.push(re.value)}return[U,{[Symbol.iterator](){return G}}]}t.consume=k;async function A(j){let I=[];for await(let U of j)I.push(U);return Promise.resolve(I)}t.asyncToArray=A})(Pv||={});function Xa(t){if(Pv.is(t)){let s=[];for(let n of t)if(n)try{n.dispose()}catch(l){s.push(l)}if(s.length===1)throw s[0];if(s.length>1)throw new AggregateError(s,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function _0(...t){return Ft(()=>Xa(t))}function Ft(t){return{dispose:f0(()=>{t()})}}var Zv=class Kv{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Xa(this._toDispose)}finally{this._toDispose.clear()}}add(s){if(!s)return s;if(s===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Kv.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(s),s}delete(s){if(s){if(s===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(s),s.dispose()}}deleteAndLeak(s){s&&this._toDispose.has(s)&&(this._toDispose.delete(s),void 0)}};Zv.DISABLE_DISPOSED_WARNING=!1;var fa=Zv,tt=class{constructor(){this._store=new fa,this._store}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}};tt.None=Object.freeze({dispose(){}});var Fl=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){this._isDisposed||t===this._value||(this._value?.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let t=this._value;return this._value=void 0,t}},vn=typeof window=="object"?window:globalThis,Ff=class If{constructor(s){this.element=s,this.next=If.Undefined,this.prev=If.Undefined}};Ff.Undefined=new Ff(void 0);var Pt=Ff,xm=class{constructor(){this._first=Pt.Undefined,this._last=Pt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Pt.Undefined}clear(){let t=this._first;for(;t!==Pt.Undefined;){let s=t.next;t.prev=Pt.Undefined,t.next=Pt.Undefined,t=s}this._first=Pt.Undefined,this._last=Pt.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,s){let n=new Pt(t);if(this._first===Pt.Undefined)this._first=n,this._last=n;else if(s){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let l=!1;return()=>{l||(l=!0,this._remove(n))}}shift(){if(this._first!==Pt.Undefined){let t=this._first.element;return this._remove(this._first),t}}pop(){if(this._last!==Pt.Undefined){let t=this._last.element;return this._remove(this._last),t}}_remove(t){if(t.prev!==Pt.Undefined&&t.next!==Pt.Undefined){let s=t.prev;s.next=t.next,t.next.prev=s}else t.prev===Pt.Undefined&&t.next===Pt.Undefined?(this._first=Pt.Undefined,this._last=Pt.Undefined):t.next===Pt.Undefined?(this._last=this._last.prev,this._last.next=Pt.Undefined):t.prev===Pt.Undefined&&(this._first=this._first.next,this._first.prev=Pt.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==Pt.Undefined;)yield t.element,t=t.next}},p0=globalThis.performance&&typeof globalThis.performance.now=="function",g0=class Wv{static create(s){return new Wv(s)}constructor(s){this._now=p0&&s===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Ii;(t=>{t.None=()=>tt.None;function s(ie,Y){return x(ie,()=>{},0,void 0,!0,void 0,Y)}t.defer=s;function n(ie){return(Y,fe=null,me)=>{let L=!1,J;return J=ie(X=>{if(!L)return J?J.dispose():L=!0,Y.call(fe,X)},null,me),L&&J.dispose(),J}}t.once=n;function l(ie,Y,fe){return _((me,L=null,J)=>ie(X=>me.call(L,Y(X)),null,J),fe)}t.map=l;function o(ie,Y,fe){return _((me,L=null,J)=>ie(X=>{Y(X),me.call(L,X)},null,J),fe)}t.forEach=o;function d(ie,Y,fe){return _((me,L=null,J)=>ie(X=>Y(X)&&me.call(L,X),null,J),fe)}t.filter=d;function f(ie){return ie}t.signal=f;function p(...ie){return(Y,fe=null,me)=>{let L=_0(...ie.map(J=>J(X=>Y.call(fe,X))));return T(L,me)}}t.any=p;function v(ie,Y,fe,me){let L=fe;return l(ie,J=>(L=Y(L,J),L),me)}t.reduce=v;function _(ie,Y){let fe,me={onWillAddFirstListener(){fe=ie(L.fire,L)},onDidRemoveLastListener(){fe?.dispose()}},L=new be(me);return Y?.add(L),L.event}function T(ie,Y){return Y instanceof Array?Y.push(ie):Y&&Y.add(ie),ie}function x(ie,Y,fe=100,me=!1,L=!1,J,X){let Se,Te,C,V=0,_e,le={leakWarningThreshold:J,onWillAddFirstListener(){Se=ie(ye=>{V++,Te=Y(Te,ye),me&&!C&&(we.fire(Te),Te=void 0),_e=()=>{let oe=Te;Te=void 0,C=void 0,(!me||V>1)&&we.fire(oe),V=0},typeof fe=="number"?(clearTimeout(C),C=setTimeout(_e,fe)):C===void 0&&(C=0,queueMicrotask(_e))})},onWillRemoveListener(){L&&V>0&&_e?.()},onDidRemoveLastListener(){_e=void 0,Se.dispose()}},we=new be(le);return X?.add(we),we.event}t.debounce=x;function E(ie,Y=0,fe){return t.debounce(ie,(me,L)=>me?(me.push(L),me):[L],Y,void 0,!0,void 0,fe)}t.accumulate=E;function N(ie,Y=(me,L)=>me===L,fe){let me=!0,L;return d(ie,J=>{let X=me||!Y(J,L);return me=!1,L=J,X},fe)}t.latch=N;function D(ie,Y,fe){return[t.filter(ie,Y,fe),t.filter(ie,me=>!Y(me),fe)]}t.split=D;function H(ie,Y=!1,fe=[],me){let L=fe.slice(),J=ie(Te=>{L?L.push(Te):Se.fire(Te)});me&&me.add(J);let X=()=>{L?.forEach(Te=>Se.fire(Te)),L=null},Se=new be({onWillAddFirstListener(){J||(J=ie(Te=>Se.fire(Te)),me&&me.add(J))},onDidAddFirstListener(){L&&(Y?setTimeout(X):X())},onDidRemoveLastListener(){J&&J.dispose(),J=null}});return me&&me.add(Se),Se.event}t.buffer=H;function y(ie,Y){return(fe,me,L)=>{let J=Y(new k);return ie(function(X){let Se=J.evaluate(X);Se!==O&&fe.call(me,Se)},void 0,L)}}t.chain=y;let O=Symbol("HaltChainable");class k{constructor(){this.steps=[]}map(Y){return this.steps.push(Y),this}forEach(Y){return this.steps.push(fe=>(Y(fe),fe)),this}filter(Y){return this.steps.push(fe=>Y(fe)?fe:O),this}reduce(Y,fe){let me=fe;return this.steps.push(L=>(me=Y(me,L),me)),this}latch(Y=(fe,me)=>fe===me){let fe=!0,me;return this.steps.push(L=>{let J=fe||!Y(L,me);return fe=!1,me=L,J?L:O}),this}evaluate(Y){for(let fe of this.steps)if(Y=fe(Y),Y===O)break;return Y}}function A(ie,Y,fe=me=>me){let me=(...Se)=>X.fire(fe(...Se)),L=()=>ie.on(Y,me),J=()=>ie.removeListener(Y,me),X=new be({onWillAddFirstListener:L,onDidRemoveLastListener:J});return X.event}t.fromNodeEventEmitter=A;function j(ie,Y,fe=me=>me){let me=(...Se)=>X.fire(fe(...Se)),L=()=>ie.addEventListener(Y,me),J=()=>ie.removeEventListener(Y,me),X=new be({onWillAddFirstListener:L,onDidRemoveLastListener:J});return X.event}t.fromDOMEventEmitter=j;function I(ie){return new Promise(Y=>n(ie)(Y))}t.toPromise=I;function U(ie){let Y=new be;return ie.then(fe=>{Y.fire(fe)},()=>{Y.fire(void 0)}).finally(()=>{Y.dispose()}),Y.event}t.fromPromise=U;function G(ie,Y){return ie(fe=>Y.fire(fe))}t.forward=G;function P(ie,Y,fe){return Y(fe),ie(me=>Y(me))}t.runAndSubscribe=P;class re{constructor(Y,fe){this._observable=Y,this._counter=0,this._hasChanged=!1;let me={onWillAddFirstListener:()=>{Y.addObserver(this)},onDidRemoveLastListener:()=>{Y.removeObserver(this)}};this.emitter=new be(me),fe&&fe.add(this.emitter)}beginUpdate(Y){this._counter++}handlePossibleChange(Y){}handleChange(Y,fe){this._hasChanged=!0}endUpdate(Y){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function de(ie,Y){return new re(ie,Y).emitter.event}t.fromObservable=de;function pe(ie){return(Y,fe,me)=>{let L=0,J=!1,X={beginUpdate(){L++},endUpdate(){L--,L===0&&(ie.reportChanges(),J&&(J=!1,Y.call(fe)))},handlePossibleChange(){},handleChange(){J=!0}};ie.addObserver(X),ie.reportChanges();let Se={dispose(){ie.removeObserver(X)}};return me instanceof fa?me.add(Se):Array.isArray(me)&&me.push(Se),Se}}t.fromObservableLight=pe})(Ii||={});var qf=class Pf{constructor(s){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${s}_${Pf._idPool++}`,Pf.all.add(this)}start(s){this._stopWatch=new g0,this.listenerCount=s}stop(){if(this._stopWatch){let s=this._stopWatch.elapsed();this.durations.push(s),this.elapsedOverall+=s,this.invocationCount+=1,this._stopWatch=void 0}}};qf.all=new Set,qf._idPool=0;var m0=qf,v0=-1,Yv=class $v{constructor(s,n,l=($v._idPool++).toString(16).padStart(3,"0")){this._errorHandler=s,this.threshold=n,this.name=l,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(s,n){let l=this.threshold;if(l<=0||n<l)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(s.value)||0;if(this._stacks.set(s.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=l*.5;let[d,f]=this.getMostFrequentStack(),p=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${f}):`;console.warn(p),console.warn(d);let v=new S0(p,d);this._errorHandler(v)}return()=>{let d=this._stacks.get(s.value)||0;this._stacks.set(s.value,d-1)}}getMostFrequentStack(){if(!this._stacks)return;let s,n=0;for(let[l,o]of this._stacks)(!s||n<o)&&(s=[l,o],n=o);return s}};Yv._idPool=1;var b0=Yv,y0=class Xv{constructor(s){this.value=s}static create(){let s=new Error;return new Xv(s.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},S0=class extends Error{constructor(t,s){super(t),this.name="ListenerLeakError",this.stack=s}},w0=class extends Error{constructor(t,s){super(t),this.name="ListenerRefusalError",this.stack=s}},C0=0,lf=class{constructor(t){this.value=t,this.id=C0++}},x0=2,E0,be=class{constructor(t){this._size=0,this._options=t,this._leakageMon=this._options?.leakWarningThreshold?new b0(t?.onListenerError??ru,this._options?.leakWarningThreshold??v0):void 0,this._perfMon=this._options?._profName?new m0(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(t,s,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let f=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(f);let p=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],v=new w0(`${f}. HINT: Stack shows most frequent listener (${p[1]}-times)`,p[0]);return(this._options?.onListenerError||ru)(v),tt.None}if(this._disposed)return tt.None;s&&(t=t.bind(s));let l=new lf(t),o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(l.stack=y0.create(),o=this._leakageMon.check(l.stack,this._size+1)),this._listeners?this._listeners instanceof lf?(this._deliveryQueue??=new A0,this._listeners=[this._listeners,l]):this._listeners.push(l):(this._options?.onWillAddFirstListener?.(this),this._listeners=l,this._options?.onDidAddFirstListener?.(this)),this._size++;let d=Ft(()=>{o?.(),this._removeListener(l)});return n instanceof fa?n.add(d):Array.isArray(n)&&n.push(d),d},this._event}_removeListener(t){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let s=this._listeners,n=s.indexOf(t);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,s[n]=void 0;let l=this._deliveryQueue.current===this;if(this._size*x0<=s.length){let o=0;for(let d=0;d<s.length;d++)s[d]?s[o++]=s[d]:l&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);s.length=o}}_deliver(t,s){if(!t)return;let n=this._options?.onListenerError||ru;if(!n){t.value(s);return}try{t.value(s)}catch(l){n(l)}}_deliverQueue(t){let s=t.current._listeners;for(;t.i<t.end;)this._deliver(s[t.i++],t.value);t.reset()}fire(t){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof lf)this._deliver(this._listeners,t);else{let s=this._deliveryQueue;s.enqueue(this,t,this._listeners.length),this._deliverQueue(s)}this._perfMon?.stop()}hasListeners(){return this._size>0}},A0=class{constructor(){this.i=-1,this.end=0}enqueue(t,s,n){this.i=0,this.end=n,this.current=t,this.value=s}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Zf=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new be,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new be,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(s){return this.mapWindowIdToZoomLevel.get(this.getWindowId(s))??0}setZoomLevel(s,n){if(this.getZoomLevel(n)===s)return;let l=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(l,s),this._onDidChangeZoomLevel.fire(l)}getZoomFactor(s){return this.mapWindowIdToZoomFactor.get(this.getWindowId(s))??1}setZoomFactor(s,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),s)}setFullscreen(s,n){if(this.isFullscreen(n)===s)return;let l=this.getWindowId(n);this.mapWindowIdToFullScreen.set(l,s),this._onDidChangeFullscreen.fire(l)}isFullscreen(s){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(s))}getWindowId(s){return s.vscodeWindowId}};Zf.INSTANCE=new Zf;var b_=Zf;function T0(t,s,n){typeof s=="string"&&(s=t.matchMedia(s)),s.addEventListener("change",n)}b_.INSTANCE.onDidChangeZoomLevel;function k0(t){return b_.INSTANCE.getZoomFactor(t)}b_.INSTANCE.onDidChangeFullscreen;var ql=typeof navigator=="object"?navigator.userAgent:"",Kf=ql.indexOf("Firefox")>=0,D0=ql.indexOf("AppleWebKit")>=0,y_=ql.indexOf("Chrome")>=0,M0=!y_&&ql.indexOf("Safari")>=0;ql.indexOf("Electron/")>=0;ql.indexOf("Android")>=0;var of=!1;if(typeof vn.matchMedia=="function"){let t=vn.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),s=vn.matchMedia("(display-mode: fullscreen)");of=t.matches,T0(vn,t,({matches:n})=>{of&&s.matches||(of=n)})}var jl="en",Wf=!1,Yf=!1,nu=!1,Vv=!1,Vh,au=jl,Em=jl,O0,mn,$a=globalThis,zs;typeof $a.vscode<"u"&&typeof $a.vscode.process<"u"?zs=$a.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(zs=process);var R0=typeof zs?.versions?.electron=="string",N0=R0&&zs?.type==="renderer";if(typeof zs=="object"){Wf=zs.platform==="win32",Yf=zs.platform==="darwin",nu=zs.platform==="linux",nu&&zs.env.SNAP&&zs.env.SNAP_REVISION,zs.env.CI||zs.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Vh=jl,au=jl;let t=zs.env.VSCODE_NLS_CONFIG;if(t)try{let s=JSON.parse(t);Vh=s.userLocale,Em=s.osLocale,au=s.resolvedLanguage||jl,O0=s.languagePack?.translationsConfigFile}catch{}Vv=!0}else typeof navigator=="object"&&!N0?(mn=navigator.userAgent,Wf=mn.indexOf("Windows")>=0,Yf=mn.indexOf("Macintosh")>=0,(mn.indexOf("Macintosh")>=0||mn.indexOf("iPad")>=0||mn.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,nu=mn.indexOf("Linux")>=0,mn?.indexOf("Mobi")>=0,au=globalThis._VSCODE_NLS_LANGUAGE||jl,Vh=navigator.language.toLowerCase(),Em=Vh):console.error("Unable to resolve platform.");var Gv=Wf,Pr=Yf,B0=nu,Am=Vv,Zr=mn,la=au,L0;(t=>{function s(){return la}t.value=s;function n(){return la.length===2?la==="en":la.length>=3?la[0]==="e"&&la[1]==="n"&&la[2]==="-":!1}t.isDefaultVariant=n;function l(){return la==="en"}t.isDefault=l})(L0||={});var z0=typeof $a.postMessage=="function"&&!$a.importScripts;(()=>{if(z0){let t=[];$a.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let l=0,o=t.length;l<o;l++){let d=t[l];if(d.id===n.data.vscodeScheduleAsyncWork){t.splice(l,1),d.callback();return}}});let s=0;return n=>{let l=++s;t.push({id:l,callback:n}),$a.postMessage({vscodeScheduleAsyncWork:l},"*")}}return t=>setTimeout(t)})();var H0=!!(Zr&&Zr.indexOf("Chrome")>=0);Zr&&Zr.indexOf("Firefox")>=0;!H0&&Zr&&Zr.indexOf("Safari")>=0;Zr&&Zr.indexOf("Edg/")>=0;Zr&&Zr.indexOf("Android")>=0;var Hl=typeof navigator=="object"?navigator:{};Am||document.queryCommandSupported&&document.queryCommandSupported("copy")||Hl&&Hl.clipboard&&Hl.clipboard.writeText,Am||Hl&&Hl.clipboard&&Hl.clipboard.readText;var S_=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,s){this._keyCodeToStr[t]=s,this._strToKeyCode[s.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}},cf=new S_,Tm=new S_,km=new S_,U0=new Array(230),Qv;(t=>{function s(p){return cf.keyCodeToStr(p)}t.toString=s;function n(p){return cf.strToKeyCode(p)}t.fromString=n;function l(p){return Tm.keyCodeToStr(p)}t.toUserSettingsUS=l;function o(p){return km.keyCodeToStr(p)}t.toUserSettingsGeneral=o;function d(p){return Tm.strToKeyCode(p)||km.strToKeyCode(p)}t.fromUserSettings=d;function f(p){if(p>=98&&p<=113)return null;switch(p){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return cf.keyCodeToStr(p)}t.toElectronAccelerator=f})(Qv||={});var j0=class Jv{constructor(s,n,l,o,d){this.ctrlKey=s,this.shiftKey=n,this.altKey=l,this.metaKey=o,this.keyCode=d}equals(s){return s instanceof Jv&&this.ctrlKey===s.ctrlKey&&this.shiftKey===s.shiftKey&&this.altKey===s.altKey&&this.metaKey===s.metaKey&&this.keyCode===s.keyCode}getHashCode(){let s=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",l=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${s}${n}${l}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new F0([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},F0=class{constructor(t){if(t.length===0)throw u0("chords");this.chords=t}getHashCode(){let t="";for(let s=0,n=this.chords.length;s<n;s++)s!==0&&(t+=";"),t+=this.chords[s].getHashCode();return t}equals(t){if(t===null||this.chords.length!==t.chords.length)return!1;for(let s=0;s<this.chords.length;s++)if(!this.chords[s].equals(t.chords[s]))return!1;return!0}};function I0(t){if(t.charCode){let n=String.fromCharCode(t.charCode).toUpperCase();return Qv.fromString(n)}let s=t.keyCode;if(s===3)return 7;if(Kf)switch(s){case 59:return 85;case 60:if(B0)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Pr)return 57;break}else if(D0&&(Pr&&s===93||!Pr&&s===92))return 57;return U0[s]||0}var q0=Pr?256:2048,P0=512,Z0=1024,K0=Pr?2048:256,Dm=class{constructor(t){this._standardKeyboardEventBrand=!0;let s=t;this.browserEvent=s,this.target=s.target,this.ctrlKey=s.ctrlKey,this.shiftKey=s.shiftKey,this.altKey=s.altKey,this.metaKey=s.metaKey,this.altGraphKey=s.getModifierState?.("AltGraph"),this.keyCode=I0(s),this.code=s.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let s=0;return this.ctrlKey&&(s|=q0),this.altKey&&(s|=P0),this.shiftKey&&(s|=Z0),this.metaKey&&(s|=K0),s|=t,s}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new j0(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}},Mm=new WeakMap;function W0(t){if(!t.parent||t.parent===t)return null;try{let s=t.location,n=t.parent.location;if(s.origin!=="null"&&n.origin!=="null"&&s.origin!==n.origin)return null}catch{return null}return t.parent}var Y0=class{static getSameOriginWindowChain(t){let s=Mm.get(t);if(!s){s=[],Mm.set(t,s);let n=t,l;do l=W0(n),l?s.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):s.push({window:new WeakRef(n),iframeElement:null}),n=l;while(n)}return s.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(t,s){if(!s||t===s)return{top:0,left:0};let n=0,l=0,o=this.getSameOriginWindowChain(t);for(let d of o){let f=d.window.deref();if(n+=f?.scrollY??0,l+=f?.scrollX??0,f===s||!d.iframeElement)break;let p=d.iframeElement.getBoundingClientRect();n+=p.top,l+=p.left}return{top:n,left:l}}},Gh=class{constructor(t,s){this.timestamp=Date.now(),this.browserEvent=s,this.leftButton=s.button===0,this.middleButton=s.button===1,this.rightButton=s.button===2,this.buttons=s.buttons,this.target=s.target,this.detail=s.detail||1,s.type==="dblclick"&&(this.detail=2),this.ctrlKey=s.ctrlKey,this.shiftKey=s.shiftKey,this.altKey=s.altKey,this.metaKey=s.metaKey,typeof s.pageX=="number"?(this.posx=s.pageX,this.posy=s.pageY):(this.posx=s.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=s.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Y0.getPositionOfChildWindowRelativeToAncestorWindow(t,s.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Om=class{constructor(t,s=0,n=0){this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=n,this.deltaX=s;let l=!1;if(y_){let o=navigator.userAgent.match(/Chrome\/(\d+)/);l=(o?parseInt(o[1]):123)<=122}if(t){let o=t,d=t,f=t.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")l?this.deltaY=o.wheelDeltaY/(120*f):this.deltaY=o.wheelDeltaY/120;else if(typeof d.VERTICAL_AXIS<"u"&&d.axis===d.VERTICAL_AXIS)this.deltaY=-d.detail/3;else if(t.type==="wheel"){let p=t;p.deltaMode===p.DOM_DELTA_LINE?Kf&&!Pr?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if(typeof o.wheelDeltaX<"u")M0&&Gv?this.deltaX=-(o.wheelDeltaX/120):l?this.deltaX=o.wheelDeltaX/(120*f):this.deltaX=o.wheelDeltaX/120;else if(typeof d.HORIZONTAL_AXIS<"u"&&d.axis===d.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){let p=t;p.deltaMode===p.DOM_DELTA_LINE?Kf&&!Pr?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(l?this.deltaY=t.wheelDelta/(120*f):this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},eb=Object.freeze(function(t,s){let n=setTimeout(t.bind(s),0);return{dispose(){clearTimeout(n)}}}),$0;(t=>{function s(n){return n===t.None||n===t.Cancelled||n instanceof X0?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}t.isCancellationToken=s,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ii.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:eb})})($0||={});var X0=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?eb:(this._emitter||(this._emitter=new be),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},w_=class{constructor(t,s){this._isDisposed=!1,this._token=-1,typeof t=="function"&&typeof s=="number"&&this.setIfNotSet(t,s)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,s){if(this._isDisposed)throw new jf("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},s)}setIfNotSet(t,s){if(this._isDisposed)throw new jf("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},s))}},V0=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(t,s,n=globalThis){if(this.isDisposed)throw new jf("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let l=n.setInterval(()=>{t()},s);this.disposable=Ft(()=>{n.clearInterval(l),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},G0;(t=>{async function s(l){let o,d=await Promise.all(l.map(f=>f.then(p=>p,p=>{o||(o=p)})));if(typeof o<"u")throw o;return d}t.settled=s;function n(l){return new Promise(async(o,d)=>{try{await l(o,d)}catch(f){d(f)}})}t.withAsyncBody=n})(G0||={});var Rm=class Qs{static fromArray(s){return new Qs(n=>{n.emitMany(s)})}static fromPromise(s){return new Qs(async n=>{n.emitMany(await s)})}static fromPromises(s){return new Qs(async n=>{await Promise.all(s.map(async l=>n.emitOne(await l)))})}static merge(s){return new Qs(async n=>{await Promise.all(s.map(async l=>{for await(let o of l)n.emitOne(o)}))})}constructor(s,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new be,queueMicrotask(async()=>{let l={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(s(l)),this.resolve()}catch(o){this.reject(o)}finally{l.emitOne=void 0,l.emitMany=void 0,l.reject=void 0}})}[Symbol.asyncIterator](){let s=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(s<this._results.length)return{done:!1,value:this._results[s++]};if(this._state===1)return{done:!0,value:void 0};await Ii.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(s,n){return new Qs(async l=>{for await(let o of s)l.emitOne(n(o))})}map(s){return Qs.map(this,s)}static filter(s,n){return new Qs(async l=>{for await(let o of s)n(o)&&l.emitOne(o)})}filter(s){return Qs.filter(this,s)}static coalesce(s){return Qs.filter(s,n=>!!n)}coalesce(){return Qs.coalesce(this)}static async toPromise(s){let n=[];for await(let l of s)n.push(l);return n}toPromise(){return Qs.toPromise(this)}emitOne(s){this._state===0&&(this._results.push(s),this._onStateChanged.fire())}emitMany(s){this._state===0&&(this._results=this._results.concat(s),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(s){this._state===0&&(this._state=2,this._error=s,this._onStateChanged.fire())}};Rm.EMPTY=Rm.fromArray([]);var{getWindow:qr,getWindowId:Q0,onDidRegisterWindow:J0}=(function(){let t=new Map,s={window:vn,disposables:new fa};t.set(vn.vscodeWindowId,s);let n=new be,l=new be,o=new be;function d(f,p){return(typeof f=="number"?t.get(f):void 0)??(p?s:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:l.event,registerWindow(f){if(t.has(f.vscodeWindowId))return tt.None;let p=new fa,v={window:f,disposables:p.add(new fa)};return t.set(f.vscodeWindowId,v),p.add(Ft(()=>{t.delete(f.vscodeWindowId),l.fire(f)})),p.add(qe(f,Di.BEFORE_UNLOAD,()=>{o.fire(f)})),n.fire(v),p},getWindows(){return t.values()},getWindowsCount(){return t.size},getWindowId(f){return f.vscodeWindowId},hasWindow(f){return t.has(f)},getWindowById:d,getWindow(f){let p=f;if(p?.ownerDocument?.defaultView)return p.ownerDocument.defaultView.window;let v=f;return v?.view?v.view.window:vn},getDocument(f){return qr(f).document}}})(),eS=class{constructor(t,s,n,l){this._node=t,this._type=s,this._handler=n,this._options=l||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function qe(t,s,n,l){return new eS(t,s,n,l)}var Nm=function(t,s,n,l){return qe(t,s,n,l)},C_,tS=class extends V0{constructor(t){super(),this.defaultTarget=t&&qr(t)}cancelAndSet(t,s,n){return super.cancelAndSet(t,s,n??this.defaultTarget)}},Bm=class{constructor(t,s=0){this._runner=t,this.priority=s,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(t){ru(t)}}static sort(t,s){return s.priority-t.priority}};(function(){let t=new Map,s=new Map,n=new Map,l=new Map,o=d=>{n.set(d,!1);let f=t.get(d)??[];for(s.set(d,f),t.set(d,[]),l.set(d,!0);f.length>0;)f.sort(Bm.sort),f.shift().execute();l.set(d,!1)};C_=(d,f,p=0)=>{let v=Q0(d),_=new Bm(f,p),T=t.get(v);return T||(T=[],t.set(v,T)),T.push(_),n.get(v)||(n.set(v,!0),d.requestAnimationFrame(()=>o(v))),_}})();function iS(t){let s=t.getBoundingClientRect(),n=qr(t);return{left:s.left+n.scrollX,top:s.top+n.scrollY,width:s.width,height:s.height}}var Di={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},sS=class{constructor(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(t){let s=ws(t);this._maxWidth!==s&&(this._maxWidth=s,this.domNode.style.maxWidth=this._maxWidth)}setWidth(t){let s=ws(t);this._width!==s&&(this._width=s,this.domNode.style.width=this._width)}setHeight(t){let s=ws(t);this._height!==s&&(this._height=s,this.domNode.style.height=this._height)}setTop(t){let s=ws(t);this._top!==s&&(this._top=s,this.domNode.style.top=this._top)}setLeft(t){let s=ws(t);this._left!==s&&(this._left=s,this.domNode.style.left=this._left)}setBottom(t){let s=ws(t);this._bottom!==s&&(this._bottom=s,this.domNode.style.bottom=this._bottom)}setRight(t){let s=ws(t);this._right!==s&&(this._right=s,this.domNode.style.right=this._right)}setPaddingTop(t){let s=ws(t);this._paddingTop!==s&&(this._paddingTop=s,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(t){let s=ws(t);this._paddingLeft!==s&&(this._paddingLeft=s,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(t){let s=ws(t);this._paddingBottom!==s&&(this._paddingBottom=s,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(t){let s=ws(t);this._paddingRight!==s&&(this._paddingRight=s,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(t){let s=ws(t);this._fontSize!==s&&(this._fontSize=s,this.domNode.style.fontSize=this._fontSize)}setFontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(t){let s=ws(t);this._lineHeight!==s&&(this._lineHeight=s,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(t){let s=ws(t);this._letterSpacing!==s&&(this._letterSpacing=s,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)}toggleClassName(t,s){this.domNode.classList.toggle(t,s),this._className=this.domNode.className}setDisplay(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)}setPosition(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)}setColor(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)}setBackgroundColor(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)}setContain(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)}setAttribute(t,s){this.domNode.setAttribute(t,s)}removeAttribute(t){this.domNode.removeAttribute(t)}appendChild(t){this.domNode.appendChild(t.domNode)}removeChild(t){this.domNode.removeChild(t.domNode)}};function ws(t){return typeof t=="number"?`${t}px`:t}function pc(t){return new sS(t)}var tb=class{constructor(){this._hooks=new fa,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(t,s){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,t&&n&&n(s)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(t,s,n,l,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=l,this._onStopCallback=o;let d=t;try{t.setPointerCapture(s),this._hooks.add(Ft(()=>{try{t.releasePointerCapture(s)}catch{}}))}catch{d=qr(t)}this._hooks.add(qe(d,Di.POINTER_MOVE,f=>{if(f.buttons!==n){this.stopMonitoring(!0);return}f.preventDefault(),this._pointerMoveCallback(f)})),this._hooks.add(qe(d,Di.POINTER_UP,f=>this.stopMonitoring(!0)))}};function rS(t,s,n){let l=null,o=null;if(typeof n.value=="function"?(l="value",o=n.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(l="get",o=n.get),!o)throw new Error("not supported");let d=`$memoize$${s}`;n[l]=function(...f){return this.hasOwnProperty(d)||Object.defineProperty(this,d,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,f)}),this[d]}}var Ir;(t=>(t.Tap="-xterm-gesturetap",t.Change="-xterm-gesturechange",t.Start="-xterm-gesturestart",t.End="-xterm-gesturesend",t.Contextmenu="-xterm-gesturecontextmenu"))(Ir||={});var hc=class Xi extends tt{constructor(){super(),this.dispatched=!1,this.targets=new xm,this.ignoreTargets=new xm,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Ii.runAndSubscribe(J0,({window:s,disposables:n})=>{n.add(qe(s.document,"touchstart",l=>this.onTouchStart(l),{passive:!1})),n.add(qe(s.document,"touchend",l=>this.onTouchEnd(s,l))),n.add(qe(s.document,"touchmove",l=>this.onTouchMove(l),{passive:!1}))},{window:vn,disposables:this._store}))}static addTarget(s){if(!Xi.isTouchDevice())return tt.None;Xi.INSTANCE||(Xi.INSTANCE=new Xi);let n=Xi.INSTANCE.targets.push(s);return Ft(n)}static ignoreTarget(s){if(!Xi.isTouchDevice())return tt.None;Xi.INSTANCE||(Xi.INSTANCE=new Xi);let n=Xi.INSTANCE.ignoreTargets.push(s);return Ft(n)}static isTouchDevice(){return"ontouchstart"in vn||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(s){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let l=0,o=s.targetTouches.length;l<o;l++){let d=s.targetTouches.item(l);this.activeTouches[d.identifier]={id:d.identifier,initialTarget:d.target,initialTimeStamp:n,initialPageX:d.pageX,initialPageY:d.pageY,rollingTimestamps:[n],rollingPageX:[d.pageX],rollingPageY:[d.pageY]};let f=this.newGestureEvent(Ir.Start,d.target);f.pageX=d.pageX,f.pageY=d.pageY,this.dispatchEvent(f)}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}onTouchEnd(s,n){let l=Date.now(),o=Object.keys(this.activeTouches).length;for(let d=0,f=n.changedTouches.length;d<f;d++){let p=n.changedTouches.item(d);if(!this.activeTouches.hasOwnProperty(String(p.identifier))){console.warn("move of an UNKNOWN touch",p);continue}let v=this.activeTouches[p.identifier],_=Date.now()-v.initialTimeStamp;if(_<Xi.HOLD_DELAY&&Math.abs(v.initialPageX-Bs(v.rollingPageX))<30&&Math.abs(v.initialPageY-Bs(v.rollingPageY))<30){let T=this.newGestureEvent(Ir.Tap,v.initialTarget);T.pageX=Bs(v.rollingPageX),T.pageY=Bs(v.rollingPageY),this.dispatchEvent(T)}else if(_>=Xi.HOLD_DELAY&&Math.abs(v.initialPageX-Bs(v.rollingPageX))<30&&Math.abs(v.initialPageY-Bs(v.rollingPageY))<30){let T=this.newGestureEvent(Ir.Contextmenu,v.initialTarget);T.pageX=Bs(v.rollingPageX),T.pageY=Bs(v.rollingPageY),this.dispatchEvent(T)}else if(o===1){let T=Bs(v.rollingPageX),x=Bs(v.rollingPageY),E=Bs(v.rollingTimestamps)-v.rollingTimestamps[0],N=T-v.rollingPageX[0],D=x-v.rollingPageY[0],H=[...this.targets].filter(y=>v.initialTarget instanceof Node&&y.contains(v.initialTarget));this.inertia(s,H,l,Math.abs(N)/E,N>0?1:-1,T,Math.abs(D)/E,D>0?1:-1,x)}this.dispatchEvent(this.newGestureEvent(Ir.End,v.initialTarget)),delete this.activeTouches[p.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(s,n){let l=document.createEvent("CustomEvent");return l.initEvent(s,!1,!0),l.initialTarget=n,l.tapCount=0,l}dispatchEvent(s){if(s.type===Ir.Tap){let n=new Date().getTime(),l=0;n-this._lastSetTapCountTime>Xi.CLEAR_TAP_COUNT_TIME?l=1:l=2,this._lastSetTapCountTime=n,s.tapCount=l}else(s.type===Ir.Change||s.type===Ir.Contextmenu)&&(this._lastSetTapCountTime=0);if(s.initialTarget instanceof Node){for(let l of this.ignoreTargets)if(l.contains(s.initialTarget))return;let n=[];for(let l of this.targets)if(l.contains(s.initialTarget)){let o=0,d=s.initialTarget;for(;d&&d!==l;)o++,d=d.parentElement;n.push([o,l])}n.sort((l,o)=>l[0]-o[0]);for(let[l,o]of n)o.dispatchEvent(s),this.dispatched=!0}}inertia(s,n,l,o,d,f,p,v,_){this.handle=C_(s,()=>{let T=Date.now(),x=T-l,E=0,N=0,D=!0;o+=Xi.SCROLL_FRICTION*x,p+=Xi.SCROLL_FRICTION*x,o>0&&(D=!1,E=d*o*x),p>0&&(D=!1,N=v*p*x);let H=this.newGestureEvent(Ir.Change);H.translationX=E,H.translationY=N,n.forEach(y=>y.dispatchEvent(H)),D||this.inertia(s,n,T,o,d,f+E,p,v,_+N)})}onTouchMove(s){let n=Date.now();for(let l=0,o=s.changedTouches.length;l<o;l++){let d=s.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(d.identifier))){console.warn("end of an UNKNOWN touch",d);continue}let f=this.activeTouches[d.identifier],p=this.newGestureEvent(Ir.Change,f.initialTarget);p.translationX=d.pageX-Bs(f.rollingPageX),p.translationY=d.pageY-Bs(f.rollingPageY),p.pageX=d.pageX,p.pageY=d.pageY,this.dispatchEvent(p),f.rollingPageX.length>3&&(f.rollingPageX.shift(),f.rollingPageY.shift(),f.rollingTimestamps.shift()),f.rollingPageX.push(d.pageX),f.rollingPageY.push(d.pageY),f.rollingTimestamps.push(n)}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}};hc.SCROLL_FRICTION=-.005,hc.HOLD_DELAY=700,hc.CLEAR_TAP_COUNT_TIME=400,Jt([rS],hc,"isTouchDevice",1);var nS=hc,x_=class extends tt{onclick(t,s){this._register(qe(t,Di.CLICK,n=>s(new Gh(qr(t),n))))}onmousedown(t,s){this._register(qe(t,Di.MOUSE_DOWN,n=>s(new Gh(qr(t),n))))}onmouseover(t,s){this._register(qe(t,Di.MOUSE_OVER,n=>s(new Gh(qr(t),n))))}onmouseleave(t,s){this._register(qe(t,Di.MOUSE_LEAVE,n=>s(new Gh(qr(t),n))))}onkeydown(t,s){this._register(qe(t,Di.KEY_DOWN,n=>s(new Dm(n))))}onkeyup(t,s){this._register(qe(t,Di.KEY_UP,n=>s(new Dm(n))))}oninput(t,s){this._register(qe(t,Di.INPUT,s))}onblur(t,s){this._register(qe(t,Di.BLUR,s))}onfocus(t,s){this._register(qe(t,Di.FOCUS,s))}onchange(t,s){this._register(qe(t,Di.CHANGE,s))}ignoreGesture(t){return nS.ignoreTarget(t)}},Lm=11,aS=class extends x_{constructor(t){super(),this._onActivate=t.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=t.bgWidth+"px",this.bgDomNode.style.height=t.bgHeight+"px",typeof t.top<"u"&&(this.bgDomNode.style.top="0px"),typeof t.left<"u"&&(this.bgDomNode.style.left="0px"),typeof t.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof t.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=t.className,this.domNode.style.position="absolute",this.domNode.style.width=Lm+"px",this.domNode.style.height=Lm+"px",typeof t.top<"u"&&(this.domNode.style.top=t.top+"px"),typeof t.left<"u"&&(this.domNode.style.left=t.left+"px"),typeof t.bottom<"u"&&(this.domNode.style.bottom=t.bottom+"px"),typeof t.right<"u"&&(this.domNode.style.right=t.right+"px"),this._pointerMoveMonitor=this._register(new tb),this._register(Nm(this.bgDomNode,Di.POINTER_DOWN,s=>this._arrowPointerDown(s))),this._register(Nm(this.domNode,Di.POINTER_DOWN,s=>this._arrowPointerDown(s))),this._pointerdownRepeatTimer=this._register(new tS),this._pointerdownScheduleRepeatTimer=this._register(new w_)}_arrowPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let s=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,qr(t))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(s,200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),t.preventDefault()}},lS=class $f{constructor(s,n,l,o,d,f,p){this._forceIntegerValues=s,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,l=l|0,o=o|0,d=d|0,f=f|0,p=p|0),this.rawScrollLeft=o,this.rawScrollTop=p,n<0&&(n=0),o+n>l&&(o=l-n),o<0&&(o=0),d<0&&(d=0),p+d>f&&(p=f-d),p<0&&(p=0),this.width=n,this.scrollWidth=l,this.scrollLeft=o,this.height=d,this.scrollHeight=f,this.scrollTop=p}equals(s){return this.rawScrollLeft===s.rawScrollLeft&&this.rawScrollTop===s.rawScrollTop&&this.width===s.width&&this.scrollWidth===s.scrollWidth&&this.scrollLeft===s.scrollLeft&&this.height===s.height&&this.scrollHeight===s.scrollHeight&&this.scrollTop===s.scrollTop}withScrollDimensions(s,n){return new $f(this._forceIntegerValues,typeof s.width<"u"?s.width:this.width,typeof s.scrollWidth<"u"?s.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof s.height<"u"?s.height:this.height,typeof s.scrollHeight<"u"?s.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(s){return new $f(this._forceIntegerValues,this.width,this.scrollWidth,typeof s.scrollLeft<"u"?s.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof s.scrollTop<"u"?s.scrollTop:this.rawScrollTop)}createScrollEvent(s,n){let l=this.width!==s.width,o=this.scrollWidth!==s.scrollWidth,d=this.scrollLeft!==s.scrollLeft,f=this.height!==s.height,p=this.scrollHeight!==s.scrollHeight,v=this.scrollTop!==s.scrollTop;return{inSmoothScrolling:n,oldWidth:s.width,oldScrollWidth:s.scrollWidth,oldScrollLeft:s.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:s.height,oldScrollHeight:s.scrollHeight,oldScrollTop:s.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:l,scrollWidthChanged:o,scrollLeftChanged:d,heightChanged:f,scrollHeightChanged:p,scrollTopChanged:v}}},oS=class extends tt{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new lS(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,s){let n=this._state.withScrollDimensions(t,s);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){let s=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(s,!1)}setScrollPositionSmooth(t,s){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};let n=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let l;s?l=new Hm(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):l=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=l}else{let n=this._state.withScrollPosition(t);this._smoothScrolling=Hm.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let t=this._smoothScrolling.tick(),s=this._state.withScrollPosition(t);if(this._setState(s,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,s){let n=this._state;n.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(n,s)))}},zm=class{constructor(t,s,n){this.scrollLeft=t,this.scrollTop=s,this.isDone=n}};function hf(t,s){let n=s-t;return function(l){return t+n*uS(l)}}function cS(t,s,n){return function(l){return l<n?t(l/n):s((l-n)/(1-n))}}var Hm=class Xf{constructor(s,n,l,o){this.from=s,this.to=n,this.duration=o,this.startTime=l,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(s,n,l){if(Math.abs(s-n)>2.5*l){let o,d;return s<n?(o=s+.75*l,d=n-.75*l):(o=s-.75*l,d=n+.75*l),cS(hf(s,o),hf(d,n),.33)}return hf(s,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(s){this.to=s.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(s){let n=(s-this.startTime)/this.duration;if(n<1){let l=this.scrollLeft(n),o=this.scrollTop(n);return new zm(l,o,!1)}return new zm(this.to.scrollLeft,this.to.scrollTop,!0)}combine(s,n,l){return Xf.start(s,n,l)}static start(s,n,l){l=l+10;let o=Date.now()-10;return new Xf(s,n,o,l)}};function hS(t){return Math.pow(t,3)}function uS(t){return 1-hS(1-t)}var dS=class extends tt{constructor(t,s,n){super(),this._visibility=t,this._visibleClassName=s,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new w_)}setVisibility(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())}setShouldBeVisible(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())}setDomNode(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(t){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(t?" fade":"")))}},fS=140,ib=class extends x_{constructor(t){super(),this._lazyRender=t.lazyRender,this._host=t.host,this._scrollable=t.scrollable,this._scrollByPage=t.scrollByPage,this._scrollbarState=t.scrollbarState,this._visibilityController=this._register(new dS(t.visibility,"visible scrollbar "+t.extraScrollbarClassName,"invisible scrollbar "+t.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new tb),this._shouldRender=!0,this.domNode=pc(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(qe(this.domNode.domNode,Di.POINTER_DOWN,s=>this._domNodePointerDown(s)))}_createArrow(t){let s=this._register(new aS(t));this.domNode.domNode.appendChild(s.bgDomNode),this.domNode.domNode.appendChild(s.domNode)}_createSlider(t,s,n,l){this.slider=pc(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(s),typeof n=="number"&&this.slider.setWidth(n),typeof l=="number"&&this.slider.setHeight(l),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(qe(this.slider.domNode,Di.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(t){t.target===this.domNode.domNode&&this._onPointerDown(t)}delegatePointerDown(t){let s=this.domNode.domNode.getClientRects()[0].top,n=s+this._scrollbarState.getSliderPosition(),l=s+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(t);n<=o&&o<=l?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)}_onPointerDown(t){let s,n;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")s=t.offsetX,n=t.offsetY;else{let o=iS(this.domNode.domNode);s=t.pageX-o.left,n=t.pageY-o.top}let l=this._pointerDownRelativePosition(s,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(l):this._scrollbarState.getDesiredScrollPositionFromOffset(l)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))}_sliderPointerDown(t){if(!t.target||!(t.target instanceof Element))return;let s=this._sliderPointerPosition(t),n=this._sliderOrthogonalPointerPosition(t),l=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,o=>{let d=this._sliderOrthogonalPointerPosition(o),f=Math.abs(d-n);if(Gv&&f>fS){this._setDesiredScrollPositionNow(l.getScrollPosition());return}let p=this._sliderPointerPosition(o)-s;this._setDesiredScrollPositionNow(l.getDesiredScrollPositionFromDelta(p))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(t){let s={};this.writeScrollPosition(s,t),this._scrollable.setScrollPositionNow(s)}updateScrollbarSize(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},sb=class Vf{constructor(s,n,l,o,d,f){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(l),this._arrowSize=Math.round(s),this._visibleSize=o,this._scrollSize=d,this._scrollPosition=f,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Vf(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(s){let n=Math.round(s);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(s){let n=Math.round(s);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(s){let n=Math.round(s);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(s){this._scrollbarSize=Math.round(s)}setOppositeScrollbarSize(s){this._oppositeScrollbarSize=Math.round(s)}static _computeValues(s,n,l,o,d){let f=Math.max(0,l-s),p=Math.max(0,f-2*n),v=o>0&&o>l;if(!v)return{computedAvailableSize:Math.round(f),computedIsNeeded:v,computedSliderSize:Math.round(p),computedSliderRatio:0,computedSliderPosition:0};let _=Math.round(Math.max(20,Math.floor(l*p/o))),T=(p-_)/(o-l),x=d*T;return{computedAvailableSize:Math.round(f),computedIsNeeded:v,computedSliderSize:Math.round(_),computedSliderRatio:T,computedSliderPosition:Math.round(x)}}_refreshComputedValues(){let s=Vf._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=s.computedAvailableSize,this._computedIsNeeded=s.computedIsNeeded,this._computedSliderSize=s.computedSliderSize,this._computedSliderRatio=s.computedSliderRatio,this._computedSliderPosition=s.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(s){if(!this._computedIsNeeded)return 0;let n=s-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(s){if(!this._computedIsNeeded)return 0;let n=s-this._arrowSize,l=this._scrollPosition;return n<this._computedSliderPosition?l-=this._visibleSize:l+=this._visibleSize,l}getDesiredScrollPositionFromDelta(s){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+s;return Math.round(n/this._computedSliderRatio)}},_S=class extends ib{constructor(t,s,n){let l=t.getScrollDimensions(),o=t.getCurrentScrollPosition();if(super({lazyRender:s.lazyRender,host:n,scrollbarState:new sb(s.horizontalHasArrows?s.arrowSize:0,s.horizontal===2?0:s.horizontalScrollbarSize,s.vertical===2?0:s.verticalScrollbarSize,l.width,l.scrollWidth,o.scrollLeft),visibility:s.horizontal,extraScrollbarClassName:"horizontal",scrollable:t,scrollByPage:s.scrollByPage}),s.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((s.horizontalScrollbarSize-s.horizontalSliderSize)/2),0,void 0,s.horizontalSliderSize)}_updateSlider(t,s){this.slider.setWidth(t),this.slider.setLeft(s)}_renderDomNode(t,s){this.domNode.setWidth(t),this.domNode.setHeight(s),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,s){return t}_sliderPointerPosition(t){return t.pageX}_sliderOrthogonalPointerPosition(t){return t.pageY}_updateScrollbarSize(t){this.slider.setHeight(t)}writeScrollPosition(t,s){t.scrollLeft=s}updateOptions(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage}},pS=class extends ib{constructor(t,s,n){let l=t.getScrollDimensions(),o=t.getCurrentScrollPosition();if(super({lazyRender:s.lazyRender,host:n,scrollbarState:new sb(s.verticalHasArrows?s.arrowSize:0,s.vertical===2?0:s.verticalScrollbarSize,0,l.height,l.scrollHeight,o.scrollTop),visibility:s.vertical,extraScrollbarClassName:"vertical",scrollable:t,scrollByPage:s.scrollByPage}),s.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((s.verticalScrollbarSize-s.verticalSliderSize)/2),s.verticalSliderSize,void 0)}_updateSlider(t,s){this.slider.setHeight(t),this.slider.setTop(s)}_renderDomNode(t,s){this.domNode.setWidth(s),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(t,s){return s}_sliderPointerPosition(t){return t.pageY}_sliderOrthogonalPointerPosition(t){return t.pageX}_updateScrollbarSize(t){this.slider.setWidth(t)}writeScrollPosition(t,s){t.scrollTop=s}updateOptions(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage}},gS=500,Um=50,mS=class{constructor(t,s,n){this.timestamp=t,this.deltaX=s,this.deltaY=n,this.score=0}},Gf=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let s=1,n=0,l=1,o=this._rear;do{let d=o===this._front?s:Math.pow(2,-l);if(s-=d,n+=this._memory[o].score*d,o===this._front)break;o=(this._capacity+o-1)%this._capacity,l++}while(!0);return n<=.5}acceptStandardWheelEvent(s){if(y_){let n=qr(s.browserEvent),l=k0(n);this.accept(Date.now(),s.deltaX*l,s.deltaY*l)}else this.accept(Date.now(),s.deltaX,s.deltaY)}accept(s,n,l){let o=null,d=new mS(s,n,l);this._front===-1&&this._rear===-1?(this._memory[0]=d,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=d),d.score=this._computeScore(d,o)}_computeScore(s,n){if(Math.abs(s.deltaX)>0&&Math.abs(s.deltaY)>0)return 1;let l=.5;if((!this._isAlmostInt(s.deltaX)||!this._isAlmostInt(s.deltaY))&&(l+=.25),n){let o=Math.abs(s.deltaX),d=Math.abs(s.deltaY),f=Math.abs(n.deltaX),p=Math.abs(n.deltaY),v=Math.max(Math.min(o,f),1),_=Math.max(Math.min(d,p),1),T=Math.max(o,f),x=Math.max(d,p);T%v===0&&x%_===0&&(l-=.5)}return Math.min(Math.max(l,0),1)}_isAlmostInt(s){return Math.abs(Math.round(s)-s)<.01}};Gf.INSTANCE=new Gf;var vS=Gf,bS=class extends x_{constructor(t,s,n){super(),this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new be),this.onWillScroll=this._onWillScroll.event,this._options=SS(s),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let l={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new pS(this._scrollable,this._options,l)),this._horizontalScrollbar=this._register(new _S(this._scrollable,this._options,l)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(t),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=pc(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=pc(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=pc(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new w_),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Xa(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(t){this._verticalScrollbar.delegatePointerDown(t)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(t){this._scrollable.setScrollDimensions(t,!1)}updateClassName(t){this._options.className=t,Pr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(t){typeof t.handleMouseWheel<"u"&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof t.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),typeof t.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),typeof t.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),typeof t.horizontal<"u"&&(this._options.horizontal=t.horizontal),typeof t.vertical<"u"&&(this._options.vertical=t.vertical),typeof t.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),typeof t.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),typeof t.scrollByPage<"u"&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(t){this._revealOnScroll=t}delegateScrollFromMouseWheelEvent(t){this._onMouseWheel(new Om(t))}_setListeningToMouseWheel(t){if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=Xa(this._mouseWheelToDispose),t)){let s=n=>{this._onMouseWheel(new Om(n))};this._mouseWheelToDispose.push(qe(this._listenOnDomNode,Di.MOUSE_WHEEL,s,{passive:!1}))}}_onMouseWheel(t){if(t.browserEvent?.defaultPrevented)return;let s=vS.INSTANCE;s.acceptStandardWheelEvent(t);let n=!1;if(t.deltaY||t.deltaX){let o=t.deltaY*this._options.mouseWheelScrollSensitivity,d=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&d+o===0?d=o=0:Math.abs(o)>=Math.abs(d)?d=0:o=0),this._options.flipAxes&&([o,d]=[d,o]);let f=!Pr&&t.browserEvent&&t.browserEvent.shiftKey;(this._options.scrollYToX||f)&&!d&&(d=o,o=0),t.browserEvent&&t.browserEvent.altKey&&(d=d*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let p=this._scrollable.getFutureScrollPosition(),v={};if(o){let _=Um*o,T=p.scrollTop-(_<0?Math.floor(_):Math.ceil(_));this._verticalScrollbar.writeScrollPosition(v,T)}if(d){let _=Um*d,T=p.scrollLeft-(_<0?Math.floor(_):Math.ceil(_));this._horizontalScrollbar.writeScrollPosition(v,T)}v=this._scrollable.validateScrollPosition(v),(p.scrollLeft!==v.scrollLeft||p.scrollTop!==v.scrollTop)&&(this._options.mouseWheelSmoothScroll&&s.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(v):this._scrollable.setScrollPositionNow(v),n=!0)}let l=n;!l&&this._options.alwaysConsumeMouseWheel&&(l=!0),!l&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(l=!0),l&&(t.preventDefault(),t.stopPropagation())}_onDidScroll(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let t=this._scrollable.getCurrentScrollPosition(),s=t.scrollTop>0,n=t.scrollLeft>0,l=n?" left":"",o=s?" top":"",d=n||s?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${l}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${d}${o}${l}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(t){this._mouseIsOver=!1,this._hide()}_onMouseOver(t){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),gS)}},yS=class extends bS{constructor(t,s,n){super(t,s,n)}setScrollPosition(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function SS(t){let s={lazyRender:typeof t.lazyRender<"u"?t.lazyRender:!1,className:typeof t.className<"u"?t.className:"",useShadows:typeof t.useShadows<"u"?t.useShadows:!0,handleMouseWheel:typeof t.handleMouseWheel<"u"?t.handleMouseWheel:!0,flipAxes:typeof t.flipAxes<"u"?t.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof t.consumeMouseWheelIfScrollbarIsNeeded<"u"?t.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof t.alwaysConsumeMouseWheel<"u"?t.alwaysConsumeMouseWheel:!1,scrollYToX:typeof t.scrollYToX<"u"?t.scrollYToX:!1,mouseWheelScrollSensitivity:typeof t.mouseWheelScrollSensitivity<"u"?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof t.fastScrollSensitivity<"u"?t.fastScrollSensitivity:5,scrollPredominantAxis:typeof t.scrollPredominantAxis<"u"?t.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof t.mouseWheelSmoothScroll<"u"?t.mouseWheelSmoothScroll:!0,arrowSize:typeof t.arrowSize<"u"?t.arrowSize:11,listenOnDomNode:typeof t.listenOnDomNode<"u"?t.listenOnDomNode:null,horizontal:typeof t.horizontal<"u"?t.horizontal:1,horizontalScrollbarSize:typeof t.horizontalScrollbarSize<"u"?t.horizontalScrollbarSize:10,horizontalSliderSize:typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:0,horizontalHasArrows:typeof t.horizontalHasArrows<"u"?t.horizontalHasArrows:!1,vertical:typeof t.vertical<"u"?t.vertical:1,verticalScrollbarSize:typeof t.verticalScrollbarSize<"u"?t.verticalScrollbarSize:10,verticalHasArrows:typeof t.verticalHasArrows<"u"?t.verticalHasArrows:!1,verticalSliderSize:typeof t.verticalSliderSize<"u"?t.verticalSliderSize:0,scrollByPage:typeof t.scrollByPage<"u"?t.scrollByPage:!1};return s.horizontalSliderSize=typeof t.horizontalSliderSize<"u"?t.horizontalSliderSize:s.horizontalScrollbarSize,s.verticalSliderSize=typeof t.verticalSliderSize<"u"?t.verticalSliderSize:s.verticalScrollbarSize,Pr&&(s.className+=" mac"),s}var Qf=class extends tt{constructor(t,s,n,l,o,d,f,p){super(),this._bufferService=n,this._optionsService=f,this._renderService=p,this._onRequestScrollLines=this._register(new be),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let v=this._register(new oS({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:_=>C_(l.window,_)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{v.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new yS(s,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},v)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(_=>{this._scrollableElement.updateOptions({handleMouseWheel:!(_&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Ii.runAndSubscribe(d.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=d.colors.background.css})),t.appendChild(this._scrollableElement.getDomNode()),this._register(Ft(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=l.mainDocument.createElement("style"),s.appendChild(this._styleElement),this._register(Ft(()=>this._styleElement.remove())),this._register(Ii.runAndSubscribe(d.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${d.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${d.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${d.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(_=>this._handleScroll(_)))}scrollLines(t){let s=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:s.scrollTop+t*this._renderService.dimensions.css.cell.height})}scrollToLine(t,s){s&&(this._latestYDisp=t),this._scrollableElement.setScrollPosition({reuseAnimation:!s,scrollTop:t*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(t){t!==void 0&&(this._latestYDisp=t),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(t=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,t!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:t*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(t){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let s=Math.round(t.scrollTop/this._renderService.dimensions.css.cell.height),n=s-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=s,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};Qf=Jt([Ee(2,ls),Ee(3,bn),Ee(4,Hv),Ee(5,Il),Ee(6,os),Ee(7,yn)],Qf);var Jf=class extends tt{constructor(t,s,n,l,o){super(),this._screenElement=t,this._bufferService=s,this._coreBrowserService=n,this._decorationService=l,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(d=>this._removeDecoration(d))),this._register(Ft(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){let s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",t?.options?.layer==="top"),s.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,s.style.top=`${(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=t.options.x??0;return n&&n>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(t,s),s}_refreshStyle(t){let s=t.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let n=this._decorationElements.get(t);n||(n=this._createElement(t),t.element=n,this._decorationElements.set(t,n),this._container.appendChild(n),t.onDispose(()=>{this._decorationElements.delete(t),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(t.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${s*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),t.onRenderEmitter.fire(n)}}_refreshXPosition(t,s=t.element){if(!s)return;let n=t.options.x??0;(t.options.anchor||"left")==="right"?s.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":s.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(t){this._decorationElements.get(t)?.remove(),this._decorationElements.delete(t),t.dispose()}};Jf=Jt([Ee(1,ls),Ee(2,bn),Ee(3,yc),Ee(4,yn)],Jf);var wS=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(t){if(t.options.overviewRulerOptions){for(let s of this._zones)if(s.color===t.options.overviewRulerOptions.color&&s.position===t.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,t.marker.line))return;if(this._lineAdjacentToZone(s,t.marker.line,t.options.overviewRulerOptions.position)){this._addLineToZone(s,t.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=t.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=t.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=t.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=t.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:t.options.overviewRulerOptions.color,position:t.options.overviewRulerOptions.position,startBufferLine:t.marker.line,endBufferLine:t.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(t){this._linePadding=t}_lineIntersectsZone(t,s){return s>=t.startBufferLine&&s<=t.endBufferLine}_lineAdjacentToZone(t,s,n){return s>=t.startBufferLine-this._linePadding[n||"full"]&&s<=t.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(t,s){t.startBufferLine=Math.min(t.startBufferLine,s),t.endBufferLine=Math.max(t.endBufferLine,s)}},jr={full:0,left:0,center:0,right:0},oa={full:0,left:0,center:0,right:0},rc={full:0,left:0,center:0,right:0},uu=class extends tt{constructor(t,s,n,l,o,d,f,p){super(),this._viewportElement=t,this._screenElement=s,this._bufferService=n,this._decorationService=l,this._renderService=o,this._optionsService=d,this._themeService=f,this._coreBrowserService=p,this._colorZoneStore=new wS,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(Ft(()=>this._canvas?.remove()));let v=this._canvas.getContext("2d");if(v)this._ctx=v;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let t=Math.floor((this._canvas.width-1)/3),s=Math.ceil((this._canvas.width-1)/3);oa.full=this._canvas.width,oa.left=t,oa.center=s,oa.right=t,this._refreshDrawHeightConstants(),rc.full=1,rc.left=1,rc.center=1+oa.left,rc.right=1+oa.left+oa.center}_refreshDrawHeightConstants(){jr.full=Math.round(2*this._coreBrowserService.dpr);let t=this._canvas.height/this._bufferService.buffer.lines.length,s=Math.round(Math.max(Math.min(t,12),6)*this._coreBrowserService.dpr);jr.left=s,jr.center=s,jr.right=s}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*jr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*jr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*jr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*jr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let s of this._decorationService.decorations)this._colorZoneStore.addDecoration(s);this._ctx.lineWidth=1,this._renderRulerOutline();let t=this._colorZoneStore.zones;for(let s of t)s.position!=="full"&&this._renderColorZone(s);for(let s of t)s.position==="full"&&this._renderColorZone(s);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(t){this._ctx.fillStyle=t.color,this._ctx.fillRect(rc[t.position||"full"],Math.round((this._canvas.height-1)*(t.startBufferLine/this._bufferService.buffers.active.lines.length)-jr[t.position||"full"]/2),oa[t.position||"full"],Math.round((this._canvas.height-1)*((t.endBufferLine-t.startBufferLine)/this._bufferService.buffers.active.lines.length)+jr[t.position||"full"]))}_queueRefresh(t,s){this._shouldUpdateDimensions=t||this._shouldUpdateDimensions,this._shouldUpdateAnchor=s||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};uu=Jt([Ee(2,ls),Ee(3,yc),Ee(4,yn),Ee(5,os),Ee(6,Il),Ee(7,bn)],uu);var ae;(t=>(t.NUL="\0",t.SOH="",t.STX="",t.ETX="",t.EOT="",t.ENQ="",t.ACK="",t.BEL="\x07",t.BS="\b",t.HT="	",t.LF=`
`,t.VT="\v",t.FF="\f",t.CR="\r",t.SO="",t.SI="",t.DLE="",t.DC1="",t.DC2="",t.DC3="",t.DC4="",t.NAK="",t.SYN="",t.ETB="",t.CAN="",t.EM="",t.SUB="",t.ESC="\x1B",t.FS="",t.GS="",t.RS="",t.US="",t.SP=" ",t.DEL=""))(ae||={});var lu;(t=>(t.PAD="",t.HOP="",t.BPH="",t.NBH="",t.IND="",t.NEL="",t.SSA="",t.ESA="",t.HTS="",t.HTJ="",t.VTS="",t.PLD="",t.PLU="",t.RI="",t.SS2="",t.SS3="",t.DCS="",t.PU1="",t.PU2="",t.STS="",t.CCH="",t.MW="",t.SPA="",t.EPA="",t.SOS="",t.SGCI="",t.SCI="",t.CSI="",t.ST="",t.OSC="",t.PM="",t.APC=""))(lu||={});var rb;(t=>t.ST=`${ae.ESC}\\`)(rb||={});var e_=class{constructor(t,s,n,l,o,d){this._textarea=t,this._compositionView=s,this._bufferService=n,this._optionsService=l,this._coreService=o,this._renderService=d,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(t){this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===20||t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(t){if(this._compositionView.classList.remove("active"),this._isComposing=!1,t){let s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;s.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(s.start,this._compositionPosition.start):n=this._textarea.value.substring(s.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){let t=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let s=this._textarea.value,n=s.replace(t,"");this._dataAlreadySent=n,s.length>t.length?this._coreService.triggerDataEvent(n,!0):s.length<t.length?this._coreService.triggerDataEvent(`${ae.DEL}`,!0):s.length===t.length&&s!==t&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(t){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let d=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(d.width,1)+"px",this._textarea.style.height=Math.max(d.height,1)+"px",this._textarea.style.lineHeight=d.height+"px"}t||setTimeout(()=>this.updateCompositionElements(!0),0)}}};e_=Jt([Ee(2,ls),Ee(3,os),Ee(4,Ga),Ee(5,yn)],e_);var Mi=0,Oi=0,Ri=0,Qt=0,jm={css:"#00000000",rgba:0},ci;(t=>{function s(o,d,f,p){return p!==void 0?`#${Za(o)}${Za(d)}${Za(f)}${Za(p)}`:`#${Za(o)}${Za(d)}${Za(f)}`}t.toCss=s;function n(o,d,f,p=255){return(o<<24|d<<16|f<<8|p)>>>0}t.toRgba=n;function l(o,d,f,p){return{css:t.toCss(o,d,f,p),rgba:t.toRgba(o,d,f,p)}}t.toColor=l})(ci||={});var Rt;(t=>{function s(v,_){if(Qt=(_.rgba&255)/255,Qt===1)return{css:_.css,rgba:_.rgba};let T=_.rgba>>24&255,x=_.rgba>>16&255,E=_.rgba>>8&255,N=v.rgba>>24&255,D=v.rgba>>16&255,H=v.rgba>>8&255;Mi=N+Math.round((T-N)*Qt),Oi=D+Math.round((x-D)*Qt),Ri=H+Math.round((E-H)*Qt);let y=ci.toCss(Mi,Oi,Ri),O=ci.toRgba(Mi,Oi,Ri);return{css:y,rgba:O}}t.blend=s;function n(v){return(v.rgba&255)===255}t.isOpaque=n;function l(v,_,T){let x=ou.ensureContrastRatio(v.rgba,_.rgba,T);if(x)return ci.toColor(x>>24&255,x>>16&255,x>>8&255)}t.ensureContrastRatio=l;function o(v){let _=(v.rgba|255)>>>0;return[Mi,Oi,Ri]=ou.toChannels(_),{css:ci.toCss(Mi,Oi,Ri),rgba:_}}t.opaque=o;function d(v,_){return Qt=Math.round(_*255),[Mi,Oi,Ri]=ou.toChannels(v.rgba),{css:ci.toCss(Mi,Oi,Ri,Qt),rgba:ci.toRgba(Mi,Oi,Ri,Qt)}}t.opacity=d;function f(v,_){return Qt=v.rgba&255,d(v,Qt*_/255)}t.multiplyOpacity=f;function p(v){return[v.rgba>>24&255,v.rgba>>16&255,v.rgba>>8&255]}t.toColorRGB=p})(Rt||={});var Zt;(t=>{let s,n;try{let o=document.createElement("canvas");o.width=1,o.height=1;let d=o.getContext("2d",{willReadFrequently:!0});d&&(s=d,s.globalCompositeOperation="copy",n=s.createLinearGradient(0,0,1,1))}catch{}function l(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return Mi=parseInt(o.slice(1,2).repeat(2),16),Oi=parseInt(o.slice(2,3).repeat(2),16),Ri=parseInt(o.slice(3,4).repeat(2),16),ci.toColor(Mi,Oi,Ri);case 5:return Mi=parseInt(o.slice(1,2).repeat(2),16),Oi=parseInt(o.slice(2,3).repeat(2),16),Ri=parseInt(o.slice(3,4).repeat(2),16),Qt=parseInt(o.slice(4,5).repeat(2),16),ci.toColor(Mi,Oi,Ri,Qt);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let d=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(d)return Mi=parseInt(d[1]),Oi=parseInt(d[2]),Ri=parseInt(d[3]),Qt=Math.round((d[5]===void 0?1:parseFloat(d[5]))*255),ci.toColor(Mi,Oi,Ri,Qt);if(!s||!n)throw new Error("css.toColor: Unsupported css format");if(s.fillStyle=n,s.fillStyle=o,typeof s.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(s.fillRect(0,0,1,1),[Mi,Oi,Ri,Qt]=s.getImageData(0,0,1,1).data,Qt!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:ci.toRgba(Mi,Oi,Ri,Qt),css:o}}t.toColor=l})(Zt||={});var as;(t=>{function s(l){return n(l>>16&255,l>>8&255,l&255)}t.relativeLuminance=s;function n(l,o,d){let f=l/255,p=o/255,v=d/255,_=f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4),T=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4),x=v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4);return _*.2126+T*.7152+x*.0722}t.relativeLuminance2=n})(as||={});var ou;(t=>{function s(f,p){if(Qt=(p&255)/255,Qt===1)return p;let v=p>>24&255,_=p>>16&255,T=p>>8&255,x=f>>24&255,E=f>>16&255,N=f>>8&255;return Mi=x+Math.round((v-x)*Qt),Oi=E+Math.round((_-E)*Qt),Ri=N+Math.round((T-N)*Qt),ci.toRgba(Mi,Oi,Ri)}t.blend=s;function n(f,p,v){let _=as.relativeLuminance(f>>8),T=as.relativeLuminance(p>>8);if(gn(_,T)<v){if(T<_){let N=l(f,p,v),D=gn(_,as.relativeLuminance(N>>8));if(D<v){let H=o(f,p,v),y=gn(_,as.relativeLuminance(H>>8));return D>y?N:H}return N}let x=o(f,p,v),E=gn(_,as.relativeLuminance(x>>8));if(E<v){let N=l(f,p,v),D=gn(_,as.relativeLuminance(N>>8));return E>D?x:N}return x}}t.ensureContrastRatio=n;function l(f,p,v){let _=f>>24&255,T=f>>16&255,x=f>>8&255,E=p>>24&255,N=p>>16&255,D=p>>8&255,H=gn(as.relativeLuminance2(E,N,D),as.relativeLuminance2(_,T,x));for(;H<v&&(E>0||N>0||D>0);)E-=Math.max(0,Math.ceil(E*.1)),N-=Math.max(0,Math.ceil(N*.1)),D-=Math.max(0,Math.ceil(D*.1)),H=gn(as.relativeLuminance2(E,N,D),as.relativeLuminance2(_,T,x));return(E<<24|N<<16|D<<8|255)>>>0}t.reduceLuminance=l;function o(f,p,v){let _=f>>24&255,T=f>>16&255,x=f>>8&255,E=p>>24&255,N=p>>16&255,D=p>>8&255,H=gn(as.relativeLuminance2(E,N,D),as.relativeLuminance2(_,T,x));for(;H<v&&(E<255||N<255||D<255);)E=Math.min(255,E+Math.ceil((255-E)*.1)),N=Math.min(255,N+Math.ceil((255-N)*.1)),D=Math.min(255,D+Math.ceil((255-D)*.1)),H=gn(as.relativeLuminance2(E,N,D),as.relativeLuminance2(_,T,x));return(E<<24|N<<16|D<<8|255)>>>0}t.increaseLuminance=o;function d(f){return[f>>24&255,f>>16&255,f>>8&255,f&255]}t.toChannels=d})(ou||={});function Za(t){let s=t.toString(16);return s.length<2?"0"+s:s}function gn(t,s){return t<s?(s+.05)/(t+.05):(t+.05)/(s+.05)}var CS=class extends bc{constructor(t,s,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=s,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},du=class{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new er}register(t){let s={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(s),s.id}deregister(t){for(let s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===t)return this._characterJoiners.splice(s,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];let s=this._bufferService.buffer.lines.get(t);if(!s||s.length===0)return[];let n=[],l=s.translateToString(!0),o=0,d=0,f=0,p=s.getFg(0),v=s.getBg(0);for(let _=0;_<s.getTrimmedLength();_++)if(s.loadCell(_,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==p||this._workCell.bg!==v){if(_-o>1){let T=this._getJoinedRanges(l,f,d,s,o);for(let x=0;x<T.length;x++)n.push(T[x])}o=_,f=d,p=this._workCell.fg,v=this._workCell.bg}d+=this._workCell.getChars().length||da.length}if(this._bufferService.cols-o>1){let _=this._getJoinedRanges(l,f,d,s,o);for(let T=0;T<_.length;T++)n.push(_[T])}return n}_getJoinedRanges(t,s,n,l,o){let d=t.substring(s,n),f=[];try{f=this._characterJoiners[0].handler(d)}catch(p){console.error(p)}for(let p=1;p<this._characterJoiners.length;p++)try{let v=this._characterJoiners[p].handler(d);for(let _=0;_<v.length;_++)du._mergeRanges(f,v[_])}catch(v){console.error(v)}return this._stringRangesToCellRanges(f,l,o),f}_stringRangesToCellRanges(t,s,n){let l=0,o=!1,d=0,f=t[l];if(f){for(let p=n;p<this._bufferService.cols;p++){let v=s.getWidth(p),_=s.getString(p).length||da.length;if(v!==0){if(!o&&f[0]<=d&&(f[0]=p,o=!0),f[1]<=d){if(f[1]=p,f=t[++l],!f)break;f[0]<=d?(f[0]=p,o=!0):o=!1}d+=_}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(t,s){let n=!1;for(let l=0;l<t.length;l++){let o=t[l];if(n){if(s[1]<=o[0])return t[l-1][1]=s[1],t;if(s[1]<=o[1])return t[l-1][1]=Math.max(s[1],o[1]),t.splice(l,1),t;t.splice(l,1),l--}else{if(s[1]<=o[0])return t.splice(l,0,s),t;if(s[1]<=o[1])return o[0]=Math.min(s[0],o[0]),t;s[0]<o[1]&&(o[0]=Math.min(s[0],o[0]),n=!0);continue}}return n?t[t.length-1][1]=s[1]:t.push(s),t}};du=Jt([Ee(0,ls)],du);function xS(t){return 57508<=t&&t<=57558}function ES(t){return 9472<=t&&t<=9631}function AS(t){return xS(t)||ES(t)}function TS(){return{css:{canvas:Qh(),cell:Qh()},device:{canvas:Qh(),cell:Qh(),char:{width:0,height:0,left:0,top:0}}}}function Qh(){return{width:0,height:0}}var t_=class{constructor(t,s,n,l,o,d,f){this._document=t,this._characterJoinerService=s,this._optionsService=n,this._coreBrowserService=l,this._coreService=o,this._decorationService=d,this._themeService=f,this._workCell=new er,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(t,s,n){this._selectionStart=t,this._selectionEnd=s,this._columnSelectMode=n}createRow(t,s,n,l,o,d,f,p,v,_,T){let x=[],E=this._characterJoinerService.getJoinedCharacters(s),N=this._themeService.colors,D=t.getNoBgTrimmedLength();n&&D<d+1&&(D=d+1);let H,y=0,O="",k=0,A=0,j=0,I=0,U=!1,G=0,P=!1,re=0,de=0,pe=[],ie=_!==-1&&T!==-1;for(let Y=0;Y<D;Y++){t.loadCell(Y,this._workCell);let fe=this._workCell.getWidth();if(fe===0)continue;let me=!1,L=Y>=de,J=Y,X=this._workCell;if(E.length>0&&Y===E[0][0]&&L){let Ye=E.shift(),Kt=this._isCellInSelection(Ye[0],s);for(k=Ye[0]+1;k<Ye[1];k++)L&&=Kt===this._isCellInSelection(k,s);L&&=!n||d<Ye[0]||d>=Ye[1],L?(me=!0,X=new CS(this._workCell,t.translateToString(!0,Ye[0],Ye[1]),Ye[1]-Ye[0]),J=Ye[1]-1,fe=X.getWidth()):de=Ye[1]}let Se=this._isCellInSelection(Y,s),Te=n&&Y===d,C=ie&&Y>=_&&Y<=T,V=!1;this._decorationService.forEachDecorationAtCell(Y,s,void 0,Ye=>{V=!0});let _e=X.getChars()||da;if(_e===" "&&(X.isUnderline()||X.isOverline())&&(_e=""),re=fe*p-v.get(_e,X.isBold(),X.isItalic()),!H)H=this._document.createElement("span");else if(y&&(Se&&P||!Se&&!P&&X.bg===A)&&(Se&&P&&N.selectionForeground||X.fg===j)&&X.extended.ext===I&&C===U&&re===G&&!Te&&!me&&!V&&L){X.isInvisible()?O+=da:O+=_e,y++;continue}else y&&(H.textContent=O),H=this._document.createElement("span"),y=0,O="";if(A=X.bg,j=X.fg,I=X.extended.ext,U=C,G=re,P=Se,me&&d>=Y&&d<=J&&(d=Y),!this._coreService.isCursorHidden&&Te&&this._coreService.isCursorInitialized){if(pe.push("xterm-cursor"),this._coreBrowserService.isFocused)f&&pe.push("xterm-cursor-blink"),pe.push(l==="bar"?"xterm-cursor-bar":l==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":pe.push("xterm-cursor-outline");break;case"block":pe.push("xterm-cursor-block");break;case"bar":pe.push("xterm-cursor-bar");break;case"underline":pe.push("xterm-cursor-underline");break}}if(X.isBold()&&pe.push("xterm-bold"),X.isItalic()&&pe.push("xterm-italic"),X.isDim()&&pe.push("xterm-dim"),X.isInvisible()?O=da:O=X.getChars()||da,X.isUnderline()&&(pe.push(`xterm-underline-${X.extended.underlineStyle}`),O===" "&&(O=""),!X.isUnderlineColorDefault()))if(X.isUnderlineColorRGB())H.style.textDecorationColor=`rgb(${bc.toColorRGB(X.getUnderlineColor()).join(",")})`;else{let Ye=X.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&X.isBold()&&Ye<8&&(Ye+=8),H.style.textDecorationColor=N.ansi[Ye].css}X.isOverline()&&(pe.push("xterm-overline"),O===" "&&(O="")),X.isStrikethrough()&&pe.push("xterm-strikethrough"),C&&(H.style.textDecoration="underline");let le=X.getFgColor(),we=X.getFgColorMode(),ye=X.getBgColor(),oe=X.getBgColorMode(),ce=!!X.isInverse();if(ce){let Ye=le;le=ye,ye=Ye;let Kt=we;we=oe,oe=Kt}let W,De,ze=!1;this._decorationService.forEachDecorationAtCell(Y,s,void 0,Ye=>{Ye.options.layer!=="top"&&ze||(Ye.backgroundColorRGB&&(oe=50331648,ye=Ye.backgroundColorRGB.rgba>>8&16777215,W=Ye.backgroundColorRGB),Ye.foregroundColorRGB&&(we=50331648,le=Ye.foregroundColorRGB.rgba>>8&16777215,De=Ye.foregroundColorRGB),ze=Ye.options.layer==="top")}),!ze&&Se&&(W=this._coreBrowserService.isFocused?N.selectionBackgroundOpaque:N.selectionInactiveBackgroundOpaque,ye=W.rgba>>8&16777215,oe=50331648,ze=!0,N.selectionForeground&&(we=50331648,le=N.selectionForeground.rgba>>8&16777215,De=N.selectionForeground)),ze&&pe.push("xterm-decoration-top");let ot;switch(oe){case 16777216:case 33554432:ot=N.ansi[ye],pe.push(`xterm-bg-${ye}`);break;case 50331648:ot=ci.toColor(ye>>16,ye>>8&255,ye&255),this._addStyle(H,`background-color:#${Fm((ye>>>0).toString(16),"0",6)}`);break;default:ce?(ot=N.foreground,pe.push("xterm-bg-257")):ot=N.background}switch(W||X.isDim()&&(W=Rt.multiplyOpacity(ot,.5)),we){case 16777216:case 33554432:X.isBold()&&le<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(le+=8),this._applyMinimumContrast(H,ot,N.ansi[le],X,W,void 0)||pe.push(`xterm-fg-${le}`);break;case 50331648:let Ye=ci.toColor(le>>16&255,le>>8&255,le&255);this._applyMinimumContrast(H,ot,Ye,X,W,De)||this._addStyle(H,`color:#${Fm(le.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(H,ot,N.foreground,X,W,De)||ce&&pe.push("xterm-fg-257")}pe.length&&(H.className=pe.join(" "),pe.length=0),!Te&&!me&&!V&&L?y++:H.textContent=O,re!==this.defaultSpacing&&(H.style.letterSpacing=`${re}px`),x.push(H),Y=J}return H&&y&&(H.textContent=O),x}_applyMinimumContrast(t,s,n,l,o,d){if(this._optionsService.rawOptions.minimumContrastRatio===1||AS(l.getCode()))return!1;let f=this._getContrastCache(l),p;if(!o&&!d&&(p=f.getColor(s.rgba,n.rgba)),p===void 0){let v=this._optionsService.rawOptions.minimumContrastRatio/(l.isDim()?2:1);p=Rt.ensureContrastRatio(o||s,d||n,v),f.setColor((o||s).rgba,(d||n).rgba,p??null)}return p?(this._addStyle(t,`color:${p.css}`),!0):!1}_getContrastCache(t){return t.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(t,s){t.setAttribute("style",`${t.getAttribute("style")||""}${s};`)}_isCellInSelection(t,s){let n=this._selectionStart,l=this._selectionEnd;return!n||!l?!1:this._columnSelectMode?n[0]<=l[0]?t>=n[0]&&s>=n[1]&&t<l[0]&&s<=l[1]:t<n[0]&&s>=n[1]&&t>=l[0]&&s<=l[1]:s>n[1]&&s<l[1]||n[1]===l[1]&&s===n[1]&&t>=n[0]&&t<l[0]||n[1]<l[1]&&s===l[1]&&t<l[0]||n[1]<l[1]&&s===n[1]&&t>=n[0]}};t_=Jt([Ee(1,Fv),Ee(2,os),Ee(3,bn),Ee(4,Ga),Ee(5,yc),Ee(6,Il)],t_);function Fm(t,s,n){for(;t.length<n;)t=s+t;return t}var kS=class{constructor(t,s){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=t.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=t.createElement("span");n.classList.add("xterm-char-measure-element");let l=t.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";let o=t.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let d=t.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold",d.style.fontStyle="italic",this._measureElements=[n,l,o,d],this._container.appendChild(n),this._container.appendChild(l),this._container.appendChild(o),this._container.appendChild(d),s.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(t,s,n,l){t===this._font&&s===this._fontSize&&n===this._weight&&l===this._weightBold||(this._font=t,this._fontSize=s,this._weight=n,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(t,s,n){let l=0;if(!s&&!n&&t.length===1&&(l=t.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];let f=this._measure(t,0);return f>0&&(this._flat[l]=f),f}let o=t;s&&(o+="B"),n&&(o+="I");let d=this._holey.get(o);if(d===void 0){let f=0;s&&(f|=1),n&&(f|=2),d=this._measure(t,f),d>0&&this._holey.set(o,d)}return d}_measure(t,s){let n=this._measureElements[s];return n.textContent=t.repeat(32),n.offsetWidth/32}},DS=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(t,s,n,l=!1){if(this.selectionStart=s,this.selectionEnd=n,!s||!n||s[0]===n[0]&&s[1]===n[1]){this.clear();return}let o=t.buffers.active.ydisp,d=s[1]-o,f=n[1]-o,p=Math.max(d,0),v=Math.min(f,t.rows-1);if(p>=t.rows||v<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=l,this.viewportStartRow=d,this.viewportEndRow=f,this.viewportCappedStartRow=p,this.viewportCappedEndRow=v,this.startCol=s[0],this.endCol=n[0]}isCellSelected(t,s,n){return this.hasSelection?(n-=t.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?s>=this.startCol&&n>=this.viewportCappedStartRow&&s<this.endCol&&n<=this.viewportCappedEndRow:s<this.startCol&&n>=this.viewportCappedStartRow&&s>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&s>=this.startCol&&s<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&s<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&s>=this.startCol):!1}};function MS(){return new DS}var uf="xterm-dom-renderer-owner-",Gs="xterm-rows",Jh="xterm-fg-",Im="xterm-bg-",nc="xterm-focus",eu="xterm-selection",OS=1,i_=class extends tt{constructor(t,s,n,l,o,d,f,p,v,_,T,x,E,N){super(),this._terminal=t,this._document=s,this._element=n,this._screenElement=l,this._viewportElement=o,this._helperContainer=d,this._linkifier2=f,this._charSizeService=v,this._optionsService=_,this._bufferService=T,this._coreService=x,this._coreBrowserService=E,this._themeService=N,this._terminalClass=OS++,this._rowElements=[],this._selectionRenderModel=MS(),this.onRequestRedraw=this._register(new be).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(Gs),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(eu),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=TS(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(D=>this._injectCss(D))),this._injectCss(this._themeService.colors),this._rowFactory=p.createInstance(t_,document),this._element.classList.add(uf+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(D=>this._handleLinkHover(D))),this._register(this._linkifier2.onHideLinkUnderline(D=>this._handleLinkLeave(D))),this._register(Ft(()=>{this._element.classList.remove(uf+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new kS(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let t=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*t,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*t),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/t),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/t),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let s=`${this._terminalSelector} .${Gs} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=s,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(t){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let s=`${this._terminalSelector} .${Gs} { pointer-events: none; color: ${t.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;s+=`${this._terminalSelector} .${Gs} .xterm-dim { color: ${Rt.multiplyOpacity(t.foreground,.5).css};}`,s+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,l=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;s+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,s+=`@keyframes ${l} { 50% {  box-shadow: none; }}`,s+=`@keyframes ${o} { 0% {  background-color: ${t.cursor.css};  color: ${t.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${t.cursor.css}; }}`,s+=`${this._terminalSelector} .${Gs}.${nc} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Gs}.${nc} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${l} 1s step-end infinite;}${this._terminalSelector} .${Gs}.${nc} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${Gs} .xterm-cursor.xterm-cursor-block { background-color: ${t.cursor.css}; color: ${t.cursorAccent.css};}${this._terminalSelector} .${Gs} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${t.cursor.css} !important; color: ${t.cursorAccent.css} !important;}${this._terminalSelector} .${Gs} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${t.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Gs} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${t.cursor.css} inset;}${this._terminalSelector} .${Gs} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${t.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,s+=`${this._terminalSelector} .${eu} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${eu} div { position: absolute; background-color: ${t.selectionBackgroundOpaque.css};}${this._terminalSelector} .${eu} div { position: absolute; background-color: ${t.selectionInactiveBackgroundOpaque.css};}`;for(let[d,f]of t.ansi.entries())s+=`${this._terminalSelector} .${Jh}${d} { color: ${f.css}; }${this._terminalSelector} .${Jh}${d}.xterm-dim { color: ${Rt.multiplyOpacity(f,.5).css}; }${this._terminalSelector} .${Im}${d} { background-color: ${f.css}; }`;s+=`${this._terminalSelector} .${Jh}257 { color: ${Rt.opaque(t.background).css}; }${this._terminalSelector} .${Jh}257.xterm-dim { color: ${Rt.multiplyOpacity(Rt.opaque(t.background),.5).css}; }${this._terminalSelector} .${Im}257 { background-color: ${t.foreground.css}; }`,this._themeStyleElement.textContent=s}_setDefaultSpacing(){let t=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${t}px`,this._rowFactory.defaultSpacing=t}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(t,s){for(let n=this._rowElements.length;n<=s;n++){let l=this._document.createElement("div");this._rowContainer.appendChild(l),this._rowElements.push(l)}for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(t,s){this._refreshRowElements(t,s),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(nc),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(nc),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(t,s,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(t,s,n),this.renderRows(0,this._bufferService.rows-1),!t||!s||(this._selectionRenderModel.update(this._terminal,t,s,n),!this._selectionRenderModel.hasSelection))return;let l=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,d=this._selectionRenderModel.viewportCappedStartRow,f=this._selectionRenderModel.viewportCappedEndRow,p=this._document.createDocumentFragment();if(n){let v=t[0]>s[0];p.appendChild(this._createSelectionElement(d,v?s[0]:t[0],v?t[0]:s[0],f-d+1))}else{let v=l===d?t[0]:0,_=d===o?s[0]:this._bufferService.cols;p.appendChild(this._createSelectionElement(d,v,_));let T=f-d-1;if(p.appendChild(this._createSelectionElement(d+1,0,this._bufferService.cols,T)),d!==f){let x=o===f?s[0]:this._bufferService.cols;p.appendChild(this._createSelectionElement(f,0,x))}}this._selectionContainer.appendChild(p)}_createSelectionElement(t,s,n,l=1){let o=this._document.createElement("div"),d=s*this.dimensions.css.cell.width,f=this.dimensions.css.cell.width*(n-s);return d+f>this.dimensions.css.canvas.width&&(f=this.dimensions.css.canvas.width-d),o.style.height=`${l*this.dimensions.css.cell.height}px`,o.style.top=`${t*this.dimensions.css.cell.height}px`,o.style.left=`${d}px`,o.style.width=`${f}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let t of this._rowElements)t.replaceChildren()}renderRows(t,s){let n=this._bufferService.buffer,l=n.ybase+n.y,o=Math.min(n.x,this._bufferService.cols-1),d=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,f=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,p=this._optionsService.rawOptions.cursorInactiveStyle;for(let v=t;v<=s;v++){let _=v+n.ydisp,T=this._rowElements[v],x=n.lines.get(_);if(!T||!x)break;T.replaceChildren(...this._rowFactory.createRow(x,_,_===l,f,p,o,d,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${uf}${this._terminalClass}`}_handleLinkHover(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!0)}_handleLinkLeave(t){this._setCellUnderline(t.x1,t.x2,t.y1,t.y2,t.cols,!1)}_setCellUnderline(t,s,n,l,o,d){n<0&&(t=0),l<0&&(s=0);let f=this._bufferService.rows-1;n=Math.max(Math.min(n,f),0),l=Math.max(Math.min(l,f),0),o=Math.min(o,this._bufferService.cols);let p=this._bufferService.buffer,v=p.ybase+p.y,_=Math.min(p.x,o-1),T=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,E=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=n;N<=l;++N){let D=N+p.ydisp,H=this._rowElements[N],y=p.lines.get(D);if(!H||!y)break;H.replaceChildren(...this._rowFactory.createRow(y,D,D===v,x,E,_,T,this.dimensions.css.cell.width,this._widthCache,d?N===n?t:0:-1,d?(N===l?s:o)-1:-1))}}};i_=Jt([Ee(7,m_),Ee(8,bu),Ee(9,os),Ee(10,ls),Ee(11,Ga),Ee(12,bn),Ee(13,Il)],i_);var s_=class extends tt{constructor(t,s,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new be),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new NS(this._optionsService))}catch{this._measureStrategy=this._register(new RS(t,s,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();(t.width!==this.width||t.height!==this.height)&&(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};s_=Jt([Ee(2,os)],s_);var nb=class extends tt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(t,s){t!==void 0&&t>0&&s!==void 0&&s>0&&(this._result.width=t,this._result.height=s)}},RS=class extends nb{constructor(t,s,n){super(),this._document=t,this._parentElement=s,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},NS=class extends nb{constructor(t){super(),this._optionsService=t,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let s=this._ctx.measureText("W");if(!("width"in s&&"fontBoundingBoxAscent"in s&&"fontBoundingBoxDescent"in s))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let t=this._ctx.measureText("W");return this._validateAndSet(t.width,t.fontBoundingBoxAscent+t.fontBoundingBoxDescent),this._result}},BS=class extends tt{constructor(t,s,n){super(),this._textarea=t,this._window=s,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new LS(this._window)),this._onDprChange=this._register(new be),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new be),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this._register(Ii.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(qe(this._textarea,"focus",()=>this._isFocused=!0)),this._register(qe(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(t){this._window!==t&&(this._window=t,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},LS=class extends tt{constructor(t){super(),this._parentWindow=t,this._windowResizeListener=this._register(new Fl),this._onDprChange=this._register(new be),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ft(()=>this.clearListener()))}setWindow(t){this._parentWindow=t,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=qe(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},zS=class extends tt{constructor(){super(),this.linkProviders=[],this._register(Ft(()=>this.linkProviders.length=0))}registerLinkProvider(t){return this.linkProviders.push(t),{dispose:()=>{let s=this.linkProviders.indexOf(t);s!==-1&&this.linkProviders.splice(s,1)}}}};function E_(t,s,n){let l=n.getBoundingClientRect(),o=t.getComputedStyle(n),d=parseInt(o.getPropertyValue("padding-left")),f=parseInt(o.getPropertyValue("padding-top"));return[s.clientX-l.left-d,s.clientY-l.top-f]}function HS(t,s,n,l,o,d,f,p,v){if(!d)return;let _=E_(t,s,n);if(_)return _[0]=Math.ceil((_[0]+(v?f/2:0))/f),_[1]=Math.ceil(_[1]/p),_[0]=Math.min(Math.max(_[0],1),l+(v?1:0)),_[1]=Math.min(Math.max(_[1],1),o),_}var r_=class{constructor(t,s){this._renderService=t,this._charSizeService=s}getCoords(t,s,n,l,o){return HS(window,t,s,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(t,s){let n=E_(window,t,s);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};r_=Jt([Ee(0,yn),Ee(1,bu)],r_);var US=class{constructor(t,s){this._renderCallback=t,this._coreBrowserService=s,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(t){return this._refreshCallbacks.push(t),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(t,s,n){this._rowCount=n,t=t!==void 0?t:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let t=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,s),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let t of this._refreshCallbacks)t(0);this._refreshCallbacks=[]}},ab={};$y(ab,{getSafariVersion:()=>FS,isChromeOS:()=>hb,isFirefox:()=>lb,isIpad:()=>IS,isIphone:()=>qS,isLegacyEdge:()=>jS,isLinux:()=>A_,isMac:()=>fu,isNode:()=>yu,isSafari:()=>ob,isWindows:()=>cb});var yu=typeof process<"u"&&"title"in process,Sc=yu?"node":navigator.userAgent,wc=yu?"node":navigator.platform,lb=Sc.includes("Firefox"),jS=Sc.includes("Edge"),ob=/^((?!chrome|android).)*safari/i.test(Sc);function FS(){if(!ob)return 0;let t=Sc.match(/Version\/(\d+)/);return t===null||t.length<2?0:parseInt(t[1])}var fu=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(wc),IS=wc==="iPad",qS=wc==="iPhone",cb=["Windows","Win16","Win32","WinCE"].includes(wc),A_=wc.indexOf("Linux")>=0,hb=/\bCrOS\b/.test(Sc),ub=class{constructor(){this._tasks=[],this._i=0}enqueue(t){this._tasks.push(t),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(t){this._idleCallback=void 0;let s=0,n=0,l=t.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(s=performance.now(),this._tasks[this._i]()||this._i++,s=Math.max(1,performance.now()-s),n=Math.max(s,n),o=t.timeRemaining(),n*1.5>o){l-s<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-s))}ms`),this._start();return}l=o}this.clear()}},PS=class extends ub{_requestCallback(t){return setTimeout(()=>t(this._createDeadline(16)))}_cancelCallback(t){clearTimeout(t)}_createDeadline(t){let s=performance.now()+t;return{timeRemaining:()=>Math.max(0,s-performance.now())}}},ZS=class extends ub{_requestCallback(t){return requestIdleCallback(t)}_cancelCallback(t){cancelIdleCallback(t)}},_u=!yu&&"requestIdleCallback"in window?ZS:PS,KS=class{constructor(){this._queue=new _u}set(t){this._queue.clear(),this._queue.enqueue(t)}flush(){this._queue.flush()}},n_=class extends tt{constructor(t,s,n,l,o,d,f,p,v){super(),this._rowCount=t,this._optionsService=n,this._charSizeService=l,this._coreService=o,this._coreBrowserService=p,this._renderer=this._register(new Fl),this._pausedResizeTask=new KS,this._observerDisposable=this._register(new Fl),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new be),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new be),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new be),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new be),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new US((_,T)=>this._renderRows(_,T),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new WS(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ft(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(f.onResize(()=>this._fullRefresh())),this._register(f.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(d.onDecorationRegistered(()=>this._fullRefresh())),this._register(d.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(f.cols,f.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(f.buffer.y,f.buffer.y,!0))),this._register(v.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,s),this._register(this._coreBrowserService.onWindowChange(_=>this._registerIntersectionObserver(_,s)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(t,s){if("IntersectionObserver"in t){let n=new t.IntersectionObserver(l=>this._handleIntersectionChange(l[l.length-1]),{threshold:0});n.observe(s),this._observerDisposable.value=Ft(()=>n.disconnect())}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,s,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,s);return}let l=this._syncOutputHandler.flush();l&&(t=Math.min(t,l.start),s=Math.max(s,l.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,s,this._rowCount)}_renderRows(t,s){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(t,s);return}t=Math.min(t,this._rowCount-1),s=Math.min(s,this._rowCount-1),this._renderer.value.renderRows(t,s),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:s}),this._onRender.fire({start:t,end:s}),this._isNextRenderRedrawOnly=!0}}resize(t,s){this._rowCount=s,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw(s=>this.refreshRows(s.start,s.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,s){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(t,s)):this._renderer.value.handleResize(t,s),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,s,n){this._selectionState.start=t,this._selectionState.end=s,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,s,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};n_=Jt([Ee(2,os),Ee(3,bu),Ee(4,Ga),Ee(5,yc),Ee(6,ls),Ee(7,bn),Ee(8,Il)],n_);var WS=class{constructor(t,s,n){this._coreBrowserService=t,this._coreService=s,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(t,s){this._isBuffering?(this._start=Math.min(this._start,t),this._end=Math.max(this._end,s)):(this._start=t,this._end=s,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let t={start:this._start,end:this._end};return this._isBuffering=!1,t}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function YS(t,s,n,l){let o=n.buffer.x,d=n.buffer.y;if(!n.buffer.hasScrollback)return VS(o,d,t,s,n,l)+Su(d,s,n,l)+GS(o,d,t,s,n,l);let f;if(d===s)return f=o>t?"D":"C",mc(Math.abs(o-t),gc(f,l));f=d>s?"D":"C";let p=Math.abs(d-s),v=XS(d>s?t:o,n)+(p-1)*n.cols+1+$S(d>s?o:t);return mc(v,gc(f,l))}function $S(t,s){return t-1}function XS(t,s){return s.cols-t}function VS(t,s,n,l,o,d){return Su(s,l,o,d).length===0?"":mc(fb(t,s,t,s-Va(s,o),!1,o).length,gc("D",d))}function Su(t,s,n,l){let o=t-Va(t,n),d=s-Va(s,n),f=Math.abs(o-d)-QS(t,s,n);return mc(f,gc(db(t,s),l))}function GS(t,s,n,l,o,d){let f;Su(s,l,o,d).length>0?f=l-Va(l,o):f=s;let p=l,v=JS(t,s,n,l,o,d);return mc(fb(t,f,n,p,v==="C",o).length,gc(v,d))}function QS(t,s,n){let l=0,o=t-Va(t,n),d=s-Va(s,n);for(let f=0;f<Math.abs(o-d);f++){let p=db(t,s)==="A"?-1:1;n.buffer.lines.get(o+p*f)?.isWrapped&&l++}return l}function Va(t,s){let n=0,l=s.buffer.lines.get(t),o=l?.isWrapped;for(;o&&t>=0&&t<s.rows;)n++,l=s.buffer.lines.get(--t),o=l?.isWrapped;return n}function JS(t,s,n,l,o,d){let f;return Su(n,l,o,d).length>0?f=l-Va(l,o):f=s,t<n&&f<=l||t>=n&&f<l?"C":"D"}function db(t,s){return t>s?"A":"B"}function fb(t,s,n,l,o,d){let f=t,p=s,v="";for(;(f!==n||p!==l)&&p>=0&&p<d.buffer.lines.length;)f+=o?1:-1,o&&f>d.cols-1?(v+=d.buffer.translateBufferLineToString(p,!1,t,f),f=0,t=0,p++):!o&&f<0&&(v+=d.buffer.translateBufferLineToString(p,!1,0,t+1),f=d.cols-1,t=f,p--);return v+d.buffer.translateBufferLineToString(p,!1,t,f)}function gc(t,s){let n=s?"O":"[";return ae.ESC+n+t}function mc(t,s){t=Math.floor(t);let n="";for(let l=0;l<t;l++)n+=s;return n}var e1=class{constructor(t){this._bufferService=t,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?t%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)-1]:[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[t,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let t=this.selectionStart[0]+this.selectionStartLength;return t>this._bufferService.cols?[t%this._bufferService.cols,this.selectionStart[1]+Math.floor(t/this._bufferService.cols)]:[Math.max(t,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let t=this.selectionStart,s=this.selectionEnd;return!t||!s?!1:t[1]>s[1]||t[1]===s[1]&&t[0]>s[0]}handleTrim(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function qm(t,s){if(t.start.y>t.end.y)throw new Error(`Buffer range end (${t.end.x}, ${t.end.y}) cannot be before start (${t.start.x}, ${t.start.y})`);return s*(t.end.y-t.start.y)+(t.end.x-t.start.x+1)}var df=50,t1=15,i1=50,s1=500,r1="",n1=new RegExp(r1,"g"),a_=class extends tt{constructor(t,s,n,l,o,d,f,p,v){super(),this._element=t,this._screenElement=s,this._linkifier=n,this._bufferService=l,this._coreService=o,this._mouseService=d,this._optionsService=f,this._renderService=p,this._coreBrowserService=v,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new er,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new be),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new be),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new be),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new be),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=_=>this._handleMouseMove(_),this._mouseUpListener=_=>this._handleMouseUp(_),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(_=>this._handleTrim(_)),this._register(this._bufferService.buffers.onBufferActivate(_=>this._handleBufferActivate(_))),this.enable(),this._model=new e1(this._bufferService),this._activeSelectionMode=0,this._register(Ft(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(_=>{_.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let t=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!t||!s?!1:t[0]!==s[0]||t[1]!==s[1]}get selectionText(){let t=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;if(!t||!s)return"";let n=this._bufferService.buffer,l=[];if(this._activeSelectionMode===3){if(t[0]===s[0])return"";let o=t[0]<s[0]?t[0]:s[0],d=t[0]<s[0]?s[0]:t[0];for(let f=t[1];f<=s[1];f++){let p=n.translateBufferLineToString(f,!0,o,d);l.push(p)}}else{let o=t[1]===s[1]?s[0]:void 0;l.push(n.translateBufferLineToString(t[1],!0,t[0],o));for(let d=t[1]+1;d<=s[1]-1;d++){let f=n.lines.get(d),p=n.translateBufferLineToString(d,!0);f?.isWrapped?l[l.length-1]+=p:l.push(p)}if(t[1]!==s[1]){let d=n.lines.get(s[1]),f=n.translateBufferLineToString(s[1],!0,0,s[0]);d&&d.isWrapped?l[l.length-1]+=f:l.push(f)}}return l.map(o=>o.replace(n1," ")).join(cb?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(t){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),A_&&t&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(t){let s=this._getMouseBufferCoords(t),n=this._model.finalSelectionStart,l=this._model.finalSelectionEnd;return!n||!l||!s?!1:this._areCoordsInSelection(s,n,l)}isCellInSelection(t,s){let n=this._model.finalSelectionStart,l=this._model.finalSelectionEnd;return!n||!l?!1:this._areCoordsInSelection([t,s],n,l)}_areCoordsInSelection(t,s,n){return t[1]>s[1]&&t[1]<n[1]||s[1]===n[1]&&t[1]===s[1]&&t[0]>=s[0]&&t[0]<n[0]||s[1]<n[1]&&t[1]===n[1]&&t[0]<n[0]||s[1]<n[1]&&t[1]===s[1]&&t[0]>=s[0]}_selectWordAtCursor(t,s){let n=this._linkifier.currentLink?.link?.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=qm(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let l=this._getMouseBufferCoords(t);return l?(this._selectWordAt(l,s),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(t,s){this._model.clearSelection(),t=Math.max(t,0),s=Math.min(s,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,t],this._model.selectionEnd=[this._bufferService.cols,s],this.refresh(),this._onSelectionChange.fire()}_handleTrim(t){this._model.handleTrim(t)&&this.refresh()}_getMouseBufferCoords(t){let s=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(s)return s[0]--,s[1]--,s[1]+=this._bufferService.buffer.ydisp,s}_getMouseEventScrollAmount(t){let s=E_(this._coreBrowserService.window,t,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return s>=0&&s<=n?0:(s>n&&(s-=n),s=Math.min(Math.max(s,-df),df),s/=df,s/Math.abs(s)+Math.round(s*(t1-1)))}shouldForceSelection(t){return fu?t.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:t.shiftKey}handleMouseDown(t){if(this._mouseDownTimeStamp=t.timeStamp,!(t.button===2&&this.hasSelection)&&t.button===0){if(!this._enabled){if(!this.shouldForceSelection(t))return;t.stopPropagation()}t.preventDefault(),this._dragScrollAmount=0,this._enabled&&t.shiftKey?this._handleIncrementalClick(t):t.detail===1?this._handleSingleClick(t):t.detail===2?this._handleDoubleClick(t):t.detail===3&&this._handleTripleClick(t),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),i1)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(t){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(t))}_handleSingleClick(t){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(t)?3:0,this._model.selectionStart=this._getMouseBufferCoords(t),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let s=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);s&&s.length!==this._model.selectionStart[0]&&s.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(t){this._selectWordAtCursor(t,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(t){let s=this._getMouseBufferCoords(t);s&&(this._activeSelectionMode=2,this._selectLineAt(s[1]))}shouldColumnSelect(t){return t.altKey&&!(fu&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(t){if(t.stopImmediatePropagation(),!this._model.selectionStart)return;let s=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(t),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(t),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let l=n.lines.get(this._model.selectionEnd[1]);l&&l.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!s||s[0]!==this._model.selectionEnd[0]||s[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let t=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(t.ydisp+this._bufferService.rows,t.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=t.ydisp),this.refresh()}}_handleMouseUp(t){let s=t.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&s<s1&&t.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(t,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let l=YS(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(l,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let t=this._model.finalSelectionStart,s=this._model.finalSelectionEnd,n=!!t&&!!s&&(t[0]!==s[0]||t[1]!==s[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(t,s,n);return}!t||!s||(!this._oldSelectionStart||!this._oldSelectionEnd||t[0]!==this._oldSelectionStart[0]||t[1]!==this._oldSelectionStart[1]||s[0]!==this._oldSelectionEnd[0]||s[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(t,s,n)}_fireOnSelectionChange(t,s,n){this._oldSelectionStart=t,this._oldSelectionEnd=s,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(t){this.clearSelection(),this._trimListener.dispose(),this._trimListener=t.activeBuffer.lines.onTrim(s=>this._handleTrim(s))}_convertViewportColToCharacterIndex(t,s){let n=s;for(let l=0;s>=l;l++){let o=t.loadCell(l,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:o>1&&s!==l&&(n+=o-1)}return n}setSelection(t,s,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[t,s],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(t){this._isClickInSelection(t)||(this._selectWordAtCursor(t,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(t,s,n=!0,l=!0){if(t[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,d=o.lines.get(t[1]);if(!d)return;let f=o.translateBufferLineToString(t[1],!1),p=this._convertViewportColToCharacterIndex(d,t[0]),v=p,_=t[0]-p,T=0,x=0,E=0,N=0;if(f.charAt(p)===" "){for(;p>0&&f.charAt(p-1)===" ";)p--;for(;v<f.length&&f.charAt(v+1)===" ";)v++}else{let y=t[0],O=t[0];d.getWidth(y)===0&&(T++,y--),d.getWidth(O)===2&&(x++,O++);let k=d.getString(O).length;for(k>1&&(N+=k-1,v+=k-1);y>0&&p>0&&!this._isCharWordSeparator(d.loadCell(y-1,this._workCell));){d.loadCell(y-1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===0?(T++,y--):A>1&&(E+=A-1,p-=A-1),p--,y--}for(;O<d.length&&v+1<f.length&&!this._isCharWordSeparator(d.loadCell(O+1,this._workCell));){d.loadCell(O+1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===2?(x++,O++):A>1&&(N+=A-1,v+=A-1),v++,O++}}v++;let D=p+_-T+E,H=Math.min(this._bufferService.cols,v-p+T+x-E-N);if(!(!s&&f.slice(p,v).trim()==="")){if(n&&D===0&&d.getCodePoint(0)!==32){let y=o.lines.get(t[1]-1);if(y&&d.isWrapped&&y.getCodePoint(this._bufferService.cols-1)!==32){let O=this._getWordAt([this._bufferService.cols-1,t[1]-1],!1,!0,!1);if(O){let k=this._bufferService.cols-O.start;D-=k,H+=k}}}if(l&&D+H===this._bufferService.cols&&d.getCodePoint(this._bufferService.cols-1)!==32){let y=o.lines.get(t[1]+1);if(y?.isWrapped&&y.getCodePoint(0)!==32){let O=this._getWordAt([0,t[1]+1],!1,!1,!0);O&&(H+=O.length)}}return{start:D,length:H}}}_selectWordAt(t,s){let n=this._getWordAt(t,s);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,t[1]--;this._model.selectionStart=[n.start,t[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(t){let s=this._getWordAt(t,!0);if(s){let n=t[1];for(;s.start<0;)s.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;s.start+s.length>this._bufferService.cols;)s.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?s.start:s.start+s.length,n]}}_isCharWordSeparator(t){return t.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(t.getChars())>=0}_selectLineAt(t){let s=this._bufferService.buffer.getWrappedRangeForLine(t),n={start:{x:0,y:s.first},end:{x:this._bufferService.cols-1,y:s.last}};this._model.selectionStart=[0,s.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=qm(n,this._bufferService.cols)}};a_=Jt([Ee(3,ls),Ee(4,Ga),Ee(5,v_),Ee(6,os),Ee(7,yn),Ee(8,bn)],a_);var Pm=class{constructor(){this._data={}}set(t,s,n){this._data[t]||(this._data[t]={}),this._data[t][s]=n}get(t,s){return this._data[t]?this._data[t][s]:void 0}clear(){this._data={}}},Zm=class{constructor(){this._color=new Pm,this._css=new Pm}setCss(t,s,n){this._css.set(t,s,n)}getCss(t,s){return this._css.get(t,s)}setColor(t,s,n){this._color.set(t,s,n)}getColor(t,s){return this._color.get(t,s)}clear(){this._color.clear(),this._css.clear()}},gi=Object.freeze((()=>{let t=[Zt.toColor("#2e3436"),Zt.toColor("#cc0000"),Zt.toColor("#4e9a06"),Zt.toColor("#c4a000"),Zt.toColor("#3465a4"),Zt.toColor("#75507b"),Zt.toColor("#06989a"),Zt.toColor("#d3d7cf"),Zt.toColor("#555753"),Zt.toColor("#ef2929"),Zt.toColor("#8ae234"),Zt.toColor("#fce94f"),Zt.toColor("#729fcf"),Zt.toColor("#ad7fa8"),Zt.toColor("#34e2e2"),Zt.toColor("#eeeeec")],s=[0,95,135,175,215,255];for(let n=0;n<216;n++){let l=s[n/36%6|0],o=s[n/6%6|0],d=s[n%6];t.push({css:ci.toCss(l,o,d),rgba:ci.toRgba(l,o,d)})}for(let n=0;n<24;n++){let l=8+n*10;t.push({css:ci.toCss(l,l,l),rgba:ci.toRgba(l,l,l)})}return t})()),Ka=Zt.toColor("#ffffff"),uc=Zt.toColor("#000000"),Km=Zt.toColor("#ffffff"),Wm=uc,ac={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},a1=Ka,l_=class extends tt{constructor(t){super(),this._optionsService=t,this._contrastCache=new Zm,this._halfContrastCache=new Zm,this._onChangeColors=this._register(new be),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Ka,background:uc,cursor:Km,cursorAccent:Wm,selectionForeground:void 0,selectionBackgroundTransparent:ac,selectionBackgroundOpaque:Rt.blend(uc,ac),selectionInactiveBackgroundTransparent:ac,selectionInactiveBackgroundOpaque:Rt.blend(uc,ac),scrollbarSliderBackground:Rt.opacity(Ka,.2),scrollbarSliderHoverBackground:Rt.opacity(Ka,.4),scrollbarSliderActiveBackground:Rt.opacity(Ka,.5),overviewRulerBorder:Ka,ansi:gi.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(t={}){let s=this._colors;if(s.foreground=At(t.foreground,Ka),s.background=At(t.background,uc),s.cursor=Rt.blend(s.background,At(t.cursor,Km)),s.cursorAccent=Rt.blend(s.background,At(t.cursorAccent,Wm)),s.selectionBackgroundTransparent=At(t.selectionBackground,ac),s.selectionBackgroundOpaque=Rt.blend(s.background,s.selectionBackgroundTransparent),s.selectionInactiveBackgroundTransparent=At(t.selectionInactiveBackground,s.selectionBackgroundTransparent),s.selectionInactiveBackgroundOpaque=Rt.blend(s.background,s.selectionInactiveBackgroundTransparent),s.selectionForeground=t.selectionForeground?At(t.selectionForeground,jm):void 0,s.selectionForeground===jm&&(s.selectionForeground=void 0),Rt.isOpaque(s.selectionBackgroundTransparent)&&(s.selectionBackgroundTransparent=Rt.opacity(s.selectionBackgroundTransparent,.3)),Rt.isOpaque(s.selectionInactiveBackgroundTransparent)&&(s.selectionInactiveBackgroundTransparent=Rt.opacity(s.selectionInactiveBackgroundTransparent,.3)),s.scrollbarSliderBackground=At(t.scrollbarSliderBackground,Rt.opacity(s.foreground,.2)),s.scrollbarSliderHoverBackground=At(t.scrollbarSliderHoverBackground,Rt.opacity(s.foreground,.4)),s.scrollbarSliderActiveBackground=At(t.scrollbarSliderActiveBackground,Rt.opacity(s.foreground,.5)),s.overviewRulerBorder=At(t.overviewRulerBorder,a1),s.ansi=gi.slice(),s.ansi[0]=At(t.black,gi[0]),s.ansi[1]=At(t.red,gi[1]),s.ansi[2]=At(t.green,gi[2]),s.ansi[3]=At(t.yellow,gi[3]),s.ansi[4]=At(t.blue,gi[4]),s.ansi[5]=At(t.magenta,gi[5]),s.ansi[6]=At(t.cyan,gi[6]),s.ansi[7]=At(t.white,gi[7]),s.ansi[8]=At(t.brightBlack,gi[8]),s.ansi[9]=At(t.brightRed,gi[9]),s.ansi[10]=At(t.brightGreen,gi[10]),s.ansi[11]=At(t.brightYellow,gi[11]),s.ansi[12]=At(t.brightBlue,gi[12]),s.ansi[13]=At(t.brightMagenta,gi[13]),s.ansi[14]=At(t.brightCyan,gi[14]),s.ansi[15]=At(t.brightWhite,gi[15]),t.extendedAnsi){let n=Math.min(s.ansi.length-16,t.extendedAnsi.length);for(let l=0;l<n;l++)s.ansi[l+16]=At(t.extendedAnsi[l],gi[l+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(t===void 0){for(let s=0;s<this._restoreColors.ansi.length;++s)this._colors.ansi[s]=this._restoreColors.ansi[s];return}switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};l_=Jt([Ee(0,os)],l_);function At(t,s){if(t!==void 0)try{return Zt.toColor(t)}catch{}return s}var l1=class{constructor(...t){this._entries=new Map;for(let[s,n]of t)this.set(s,n)}set(t,s){let n=this._entries.get(t);return this._entries.set(t,s),n}forEach(t){for(let[s,n]of this._entries.entries())t(s,n)}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}},o1=class{constructor(){this._services=new l1,this._services.set(m_,this)}setService(t,s){this._services.set(t,s)}getService(t){return this._services.get(t)}createInstance(t,...s){let n=t0(t).sort((d,f)=>d.index-f.index),l=[];for(let d of n){let f=this._services.get(d.id);if(!f)throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${d.id._id}.`);l.push(f)}let o=n.length>0?n[0].index:s.length;if(s.length!==o)throw new Error(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${s.length} static arguments`);return new t(...s,...l)}},c1={trace:0,debug:1,info:2,warn:3,error:4,off:5},h1="xterm.js: ",o_=class extends tt{constructor(t){super(),this._optionsService=t,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=c1[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let s=0;s<t.length;s++)typeof t[s]=="function"&&(t[s]=t[s]())}_log(t,s,n){this._evalLazyOptionalParams(n),t.call(console,(this._optionsService.options.logger?"":h1)+s,...n)}trace(t,...s){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,t,s)}debug(t,...s){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,t,s)}info(t,...s){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,t,s)}warn(t,...s){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,t,s)}error(t,...s){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,t,s)}};o_=Jt([Ee(0,os)],o_);var Ym=class extends tt{constructor(t){super(),this._maxLength=t,this.onDeleteEmitter=this._register(new be),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new be),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new be),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(t){if(this._maxLength===t)return;let s=new Array(t);for(let n=0;n<Math.min(t,this.length);n++)s[n]=this._array[this._getCyclicIndex(n)];this._array=s,this._maxLength=t,this._startIndex=0}get length(){return this._length}set length(t){if(t>this._length)for(let s=this._length;s<t;s++)this._array[s]=void 0;this._length=t}get(t){return this._array[this._getCyclicIndex(t)]}set(t,s){this._array[this._getCyclicIndex(t)]=s}push(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(t,s,...n){if(s){for(let l=t;l<this._length-s;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+s)];this._length-=s,this.onDeleteEmitter.fire({index:t,amount:s})}for(let l=this._length-1;l>=t;l--)this._array[this._getCyclicIndex(l+n.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<n.length;l++)this._array[this._getCyclicIndex(t+l)]=n[l];if(n.length&&this.onInsertEmitter.fire({index:t,amount:n.length}),this._length+n.length>this._maxLength){let l=this._length+n.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=n.length}trimStart(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.onTrimEmitter.fire(t)}shiftElements(t,s,n){if(!(s<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let o=s-1;o>=0;o--)this.set(t+o+n,this.get(t+o));let l=t+s+n-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<s;l++)this.set(t+l+n,this.get(t+l))}}_getCyclicIndex(t){return(this._startIndex+t)%this._maxLength}},et=3,oi=Object.freeze(new bc),tu=0,ff=2,dc=class _b{constructor(s,n,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(s*et);let o=n||er.fromCharData([0,Nv,1,0]);for(let d=0;d<s;++d)this.setCell(d,o);this.length=s}get(s){let n=this._data[s*et+0],l=n&2097151;return[this._data[s*et+1],n&2097152?this._combined[s]:l?ua(l):"",n>>22,n&2097152?this._combined[s].charCodeAt(this._combined[s].length-1):l]}set(s,n){this._data[s*et+1]=n[0],n[1].length>1?(this._combined[s]=n[1],this._data[s*et+0]=s|2097152|n[2]<<22):this._data[s*et+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(s){return this._data[s*et+0]>>22}hasWidth(s){return this._data[s*et+0]&12582912}getFg(s){return this._data[s*et+1]}getBg(s){return this._data[s*et+2]}hasContent(s){return this._data[s*et+0]&4194303}getCodePoint(s){let n=this._data[s*et+0];return n&2097152?this._combined[s].charCodeAt(this._combined[s].length-1):n&2097151}isCombined(s){return this._data[s*et+0]&2097152}getString(s){let n=this._data[s*et+0];return n&2097152?this._combined[s]:n&2097151?ua(n&2097151):""}isProtected(s){return this._data[s*et+2]&536870912}loadCell(s,n){return tu=s*et,n.content=this._data[tu+0],n.fg=this._data[tu+1],n.bg=this._data[tu+2],n.content&2097152&&(n.combinedData=this._combined[s]),n.bg&268435456&&(n.extended=this._extendedAttrs[s]),n}setCell(s,n){n.content&2097152&&(this._combined[s]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[s]=n.extended),this._data[s*et+0]=n.content,this._data[s*et+1]=n.fg,this._data[s*et+2]=n.bg}setCellFromCodepoint(s,n,l,o){o.bg&268435456&&(this._extendedAttrs[s]=o.extended),this._data[s*et+0]=n|l<<22,this._data[s*et+1]=o.fg,this._data[s*et+2]=o.bg}addCodepointToCell(s,n,l){let o=this._data[s*et+0];o&2097152?this._combined[s]+=ua(n):o&2097151?(this._combined[s]=ua(o&2097151)+ua(n),o&=-2097152,o|=2097152):o=n|1<<22,l&&(o&=-12582913,o|=l<<22),this._data[s*et+0]=o}insertCells(s,n,l){if(s%=this.length,s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),n<this.length-s){let o=new er;for(let d=this.length-s-n-1;d>=0;--d)this.setCell(s+n+d,this.loadCell(s+d,o));for(let d=0;d<n;++d)this.setCell(s+d,l)}else for(let o=s;o<this.length;++o)this.setCell(o,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(s,n,l){if(s%=this.length,n<this.length-s){let o=new er;for(let d=0;d<this.length-s-n;++d)this.setCell(s+d,this.loadCell(s+n+d,o));for(let d=this.length-n;d<this.length;++d)this.setCell(d,l)}else for(let o=s;o<this.length;++o)this.setCell(o,l);s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),this.getWidth(s)===0&&!this.hasContent(s)&&this.setCellFromCodepoint(s,0,1,l)}replaceCells(s,n,l,o=!1){if(o){for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodepoint(s-1,0,1,l),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,l);s<n&&s<this.length;)this.isProtected(s)||this.setCell(s,l),s++;return}for(s&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s-1,0,1,l),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,l);s<n&&s<this.length;)this.setCell(s++,l)}resize(s,n){if(s===this.length)return this._data.length*4*ff<this._data.buffer.byteLength;let l=s*et;if(s>this.length){if(this._data.buffer.byteLength>=l*4)this._data=new Uint32Array(this._data.buffer,0,l);else{let o=new Uint32Array(l);o.set(this._data),this._data=o}for(let o=this.length;o<s;++o)this.setCell(o,n)}else{this._data=this._data.subarray(0,l);let o=Object.keys(this._combined);for(let f=0;f<o.length;f++){let p=parseInt(o[f],10);p>=s&&delete this._combined[p]}let d=Object.keys(this._extendedAttrs);for(let f=0;f<d.length;f++){let p=parseInt(d[f],10);p>=s&&delete this._extendedAttrs[p]}}return this.length=s,l*4*ff<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*ff<this._data.buffer.byteLength){let s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,n=!1){if(n){for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,s);return}this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,s)}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(let n in s._combined)this._combined[n]=s._combined[n];this._extendedAttrs={};for(let n in s._extendedAttrs)this._extendedAttrs[n]=s._extendedAttrs[n];this.isWrapped=s.isWrapped}clone(){let s=new _b(0);s._data=new Uint32Array(this._data),s.length=this.length;for(let n in this._combined)s._combined[n]=this._combined[n];for(let n in this._extendedAttrs)s._extendedAttrs[n]=this._extendedAttrs[n];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(this._data[s*et+0]&4194303)return s+(this._data[s*et+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(this._data[s*et+0]&4194303||this._data[s*et+2]&50331648)return s+(this._data[s*et+0]>>22);return 0}copyCellsFrom(s,n,l,o,d){let f=s._data;if(d)for(let v=o-1;v>=0;v--){for(let _=0;_<et;_++)this._data[(l+v)*et+_]=f[(n+v)*et+_];f[(n+v)*et+2]&268435456&&(this._extendedAttrs[l+v]=s._extendedAttrs[n+v])}else for(let v=0;v<o;v++){for(let _=0;_<et;_++)this._data[(l+v)*et+_]=f[(n+v)*et+_];f[(n+v)*et+2]&268435456&&(this._extendedAttrs[l+v]=s._extendedAttrs[n+v])}let p=Object.keys(s._combined);for(let v=0;v<p.length;v++){let _=parseInt(p[v],10);_>=n&&(this._combined[_-n+l]=s._combined[_])}}translateToString(s,n,l,o){n=n??0,l=l??this.length,s&&(l=Math.min(l,this.getTrimmedLength())),o&&(o.length=0);let d="";for(;n<l;){let f=this._data[n*et+0],p=f&2097151,v=f&2097152?this._combined[n]:p?ua(p):da;if(d+=v,o)for(let _=0;_<v.length;++_)o.push(n);n+=f>>22||1}return o&&o.push(n),d}};function u1(t,s,n,l,o,d){let f=[];for(let p=0;p<t.length-1;p++){let v=p,_=t.get(++v);if(!_.isWrapped)continue;let T=[t.get(p)];for(;v<t.length&&_.isWrapped;)T.push(_),_=t.get(++v);if(!d&&l>=p&&l<v){p+=T.length-1;continue}let x=0,E=vc(T,x,s),N=1,D=0;for(;N<T.length;){let y=vc(T,N,s),O=y-D,k=n-E,A=Math.min(O,k);T[x].copyCellsFrom(T[N],D,E,A,!1),E+=A,E===n&&(x++,E=0),D+=A,D===y&&(N++,D=0),E===0&&x!==0&&T[x-1].getWidth(n-1)===2&&(T[x].copyCellsFrom(T[x-1],n-1,E++,1,!1),T[x-1].setCell(n-1,o))}T[x].replaceCells(E,n,o);let H=0;for(let y=T.length-1;y>0&&(y>x||T[y].getTrimmedLength()===0);y--)H++;H>0&&(f.push(p+T.length-H),f.push(H)),p+=T.length-1}return f}function d1(t,s){let n=[],l=0,o=s[l],d=0;for(let f=0;f<t.length;f++)if(o===f){let p=s[++l];t.onDeleteEmitter.fire({index:f-d,amount:p}),f+=p-1,d+=p,o=s[++l]}else n.push(f);return{layout:n,countRemoved:d}}function f1(t,s){let n=[];for(let l=0;l<s.length;l++)n.push(t.get(s[l]));for(let l=0;l<n.length;l++)t.set(l,n[l]);t.length=s.length}function _1(t,s,n){let l=[],o=t.map((v,_)=>vc(t,_,s)).reduce((v,_)=>v+_),d=0,f=0,p=0;for(;p<o;){if(o-p<n){l.push(o-p);break}d+=n;let v=vc(t,f,s);d>v&&(d-=v,f++);let _=t[f].getWidth(d-1)===2;_&&d--;let T=_?n-1:n;l.push(T),p+=T}return l}function vc(t,s,n){if(s===t.length-1)return t[s].getTrimmedLength();let l=!t[s].hasContent(n-1)&&t[s].getWidth(n-1)===1,o=t[s+1].getWidth(0)===2;return l&&o?n-1:n}var pb=class gb{constructor(s){this.line=s,this.isDisposed=!1,this._disposables=[],this._id=gb._nextId++,this._onDispose=this.register(new be),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Xa(this._disposables),this._disposables.length=0)}register(s){return this._disposables.push(s),s}};pb._nextId=1;var p1=pb,vi={},Wa=vi.B;vi[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};vi.A={"#":""};vi.B=void 0;vi[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};vi.C=vi[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};vi.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};vi.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};vi.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};vi.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};vi.E=vi[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};vi.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};vi.H=vi[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};vi["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var $m=4294967295,Xm=class{constructor(t,s,n){this._hasScrollback=t,this._optionsService=s,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=oi.clone(),this.savedCharset=Wa,this.markers=[],this._nullCell=er.fromCharData([0,Nv,1,0]),this._whitespaceCell=er.fromCharData([0,da,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new _u,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Ym(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new hu),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new hu),this._whitespaceCell}getBlankLine(t,s){return new dc(this._bufferService.cols,this.getNullCell(t),s)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;let s=t+this._optionsService.rawOptions.scrollback;return s>$m?$m:s}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=oi);let s=this._rows;for(;s--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Ym(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,s){let n=this.getNullCell(oi),l=0,o=this._getCorrectBufferLength(s);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<t)for(let f=0;f<this.lines.length;f++)l+=+this.lines.get(f).resize(t,n);let d=0;if(this._rows<s)for(let f=this._rows;f<s;f++)this.lines.length<s+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new dc(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+d+1?(this.ybase--,d++,this.ydisp>0&&this.ydisp--):this.lines.push(new dc(t,n)));else for(let f=this._rows;f>s;f--)this.lines.length>s+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let f=this.lines.length-o;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=o}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,s-1),d&&(this.y+=d),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=s-1,this._isReflowEnabled&&(this._reflow(t,s),this._cols>t))for(let d=0;d<this.lines.length;d++)l+=+this.lines.get(d).resize(t,n);this._cols=t,this._rows=s,this._memoryCleanupQueue.clear(),l>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let s=0;for(;this._memoryCleanupPosition<this.lines.length;)if(s+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),s>100)return!0;return t}get _isReflowEnabled(){let t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,s){this._cols!==t&&(t>this._cols?this._reflowLarger(t,s):this._reflowSmaller(t,s))}_reflowLarger(t,s){let n=this._optionsService.rawOptions.reflowCursorLine,l=u1(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(oi),n);if(l.length>0){let o=d1(this.lines,l);f1(this.lines,o.layout),this._reflowLargerAdjustViewport(t,s,o.countRemoved)}}_reflowLargerAdjustViewport(t,s,n){let l=this.getNullCell(oi),o=n;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<s&&this.lines.push(new dc(t,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,s){let n=this._optionsService.rawOptions.reflowCursorLine,l=this.getNullCell(oi),o=[],d=0;for(let f=this.lines.length-1;f>=0;f--){let p=this.lines.get(f);if(!p||!p.isWrapped&&p.getTrimmedLength()<=t)continue;let v=[p];for(;p.isWrapped&&f>0;)p=this.lines.get(--f),v.unshift(p);if(!n){let A=this.ybase+this.y;if(A>=f&&A<f+v.length)continue}let _=v[v.length-1].getTrimmedLength(),T=_1(v,this._cols,t),x=T.length-v.length,E;this.ybase===0&&this.y!==this.lines.length-1?E=Math.max(0,this.y-this.lines.maxLength+x):E=Math.max(0,this.lines.length-this.lines.maxLength+x);let N=[];for(let A=0;A<x;A++){let j=this.getBlankLine(oi,!0);N.push(j)}N.length>0&&(o.push({start:f+v.length+d,newLines:N}),d+=N.length),v.push(...N);let D=T.length-1,H=T[D];H===0&&(D--,H=T[D]);let y=v.length-x-1,O=_;for(;y>=0;){let A=Math.min(O,H);if(v[D]===void 0)break;if(v[D].copyCellsFrom(v[y],O-A,H-A,A,!0),H-=A,H===0&&(D--,H=T[D]),O-=A,O===0){y--;let j=Math.max(y,0);O=vc(v,j,this._cols)}}for(let A=0;A<v.length;A++)T[A]<t&&v[A].setCell(T[A],l);let k=x-E;for(;k-- >0;)this.ybase===0?this.y<s-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-s&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+x,this.ybase+s-1)}if(o.length>0){let f=[],p=[];for(let H=0;H<this.lines.length;H++)p.push(this.lines.get(H));let v=this.lines.length,_=v-1,T=0,x=o[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);let E=0;for(let H=Math.min(this.lines.maxLength-1,v+d-1);H>=0;H--)if(x&&x.start>_+E){for(let y=x.newLines.length-1;y>=0;y--)this.lines.set(H--,x.newLines[y]);H++,f.push({index:_+1,amount:x.newLines.length}),E+=x.newLines.length,x=o[++T]}else this.lines.set(H,p[_--]);let N=0;for(let H=f.length-1;H>=0;H--)f[H].index+=N,this.lines.onInsertEmitter.fire(f[H]),N+=f[H].amount;let D=Math.max(0,v+d-this.lines.maxLength);D>0&&this.lines.onTrimEmitter.fire(D)}}translateBufferLineToString(t,s,n=0,l){let o=this.lines.get(t);return o?o.translateToString(s,n,l):""}getWrappedRangeForLine(t){let s=t,n=t;for(;s>0&&this.lines.get(s).isWrapped;)s--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:s,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].line===t&&(this.markers[s].dispose(),this.markers.splice(s--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose();this.markers.length=0,this._isClearing=!1}addMarker(t){let s=new p1(t);return this.markers.push(s),s.register(this.lines.onTrim(n=>{s.line-=n,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(n=>{s.line>=n.index&&(s.line+=n.amount)})),s.register(this.lines.onDelete(n=>{s.line>=n.index&&s.line<n.index+n.amount&&s.dispose(),s.line>n.index&&(s.line-=n.amount)})),s.register(s.onDispose(()=>this._removeMarker(s))),s}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}},g1=class extends tt{constructor(t,s){super(),this._optionsService=t,this._bufferService=s,this._onBufferActivate=this._register(new be),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new Xm(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new Xm(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(t){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(t),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(t,s){this._normal.resize(t,s),this._alt.resize(t,s),this.setupTabStops(t)}setupTabStops(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)}},mb=2,vb=1,c_=class extends tt{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this._register(new be),this.onResize=this._onResize.event,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,mb),this.rows=Math.max(t.rawOptions.rows||0,vb),this.buffers=this._register(new g1(t,this)),this._register(this.buffers.onBufferActivate(s=>{this._onScroll.fire(s.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(t,s){let n=this.cols!==t,l=this.rows!==s;this.cols=t,this.rows=s,this.buffers.resize(t,s),this._onResize.fire({cols:t,rows:s,colsChanged:n,rowsChanged:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,s=!1){let n=this.buffer,l;l=this._cachedBlankLine,(!l||l.length!==this.cols||l.getFg(0)!==t.fg||l.getBg(0)!==t.bg)&&(l=n.getBlankLine(t,s),this._cachedBlankLine=l),l.isWrapped=s;let o=n.ybase+n.scrollTop,d=n.ybase+n.scrollBottom;if(n.scrollTop===0){let f=n.lines.isFull;d===n.lines.length-1?f?n.lines.recycle().copyFrom(l):n.lines.push(l.clone()):n.lines.splice(d+1,0,l.clone()),f?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let f=d-o+1;n.lines.shiftElements(o+1,f-1,-1),n.lines.set(d,l.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(t,s){let n=this.buffer;if(t<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else t+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let l=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+t,n.ybase),0),l!==n.ydisp&&(s||this._onScroll.fire(n.ydisp))}};c_=Jt([Ee(0,os)],c_);var Ul={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:fu,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},m1=["normal","bold","100","200","300","400","500","600","700","800","900"],v1=class extends tt{constructor(t){super(),this._onOptionChange=this._register(new be),this.onOptionChange=this._onOptionChange.event;let s={...Ul};for(let n in t)if(n in s)try{let l=t[n];s[n]=this._sanitizeAndValidateOption(n,l)}catch(l){console.error(l)}this.rawOptions=s,this.options={...s},this._setupOptions(),this._register(Ft(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(t,s){return this.onOptionChange(n=>{n===t&&s(this.rawOptions[t])})}onMultipleOptionChange(t,s){return this.onOptionChange(n=>{t.indexOf(n)!==-1&&s()})}_setupOptions(){let t=n=>{if(!(n in Ul))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},s=(n,l)=>{if(!(n in Ul))throw new Error(`No option with key "${n}"`);l=this._sanitizeAndValidateOption(n,l),this.rawOptions[n]!==l&&(this.rawOptions[n]=l,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let l={get:t.bind(this,n),set:s.bind(this,n)};Object.defineProperty(this.options,n,l)}}_sanitizeAndValidateOption(t,s){switch(t){case"cursorStyle":if(s||(s=Ul[t]),!b1(s))throw new Error(`"${s}" is not a valid value for ${t}`);break;case"wordSeparator":s||(s=Ul[t]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=m1.includes(s)?s:Ul[t];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${t} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(s*10)/10));break;case"scrollback":if(s=Math.min(s,4294967295),s<0)throw new Error(`${t} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${t} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${t} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{};break}return s}};function b1(t){return t==="block"||t==="underline"||t==="bar"}function fc(t,s=5){if(typeof t!="object")return t;let n=Array.isArray(t)?[]:{};for(let l in t)n[l]=s<=1?t[l]:t[l]&&fc(t[l],s-1);return n}var Vm=Object.freeze({insertMode:!1}),Gm=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),h_=class extends tt{constructor(t,s,n){super(),this._bufferService=t,this._logService=s,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new be),this.onData=this._onData.event,this._onUserInput=this._register(new be),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new be),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new be),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=fc(Vm),this.decPrivateModes=fc(Gm)}reset(){this.modes=fc(Vm),this.decPrivateModes=fc(Gm)}triggerDataEvent(t,s=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;s&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),s&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`),this._logService.trace("sending data (codes)",()=>t.split("").map(l=>l.charCodeAt(0))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`),this._logService.trace("sending binary (codes)",()=>t.split("").map(s=>s.charCodeAt(0))),this._onBinary.fire(t))}};h_=Jt([Ee(0,ls),Ee(1,Uv),Ee(2,os)],h_);var Qm={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:t=>t.button===4||t.action!==1?!1:(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)},VT200:{events:19,restrict:t=>t.action!==32},DRAG:{events:23,restrict:t=>!(t.action===32&&t.button===3)},ANY:{events:31,restrict:t=>!0}};function _f(t,s){let n=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(n|=64,n|=t.action):(n|=t.button&3,t.button&4&&(n|=64),t.button&8&&(n|=128),t.action===32?n|=32:t.action===0&&!s&&(n|=3)),n}var pf=String.fromCharCode,Jm={DEFAULT:t=>{let s=[_f(t,!1)+32,t.col+32,t.row+32];return s[0]>255||s[1]>255||s[2]>255?"":`\x1B[M${pf(s[0])}${pf(s[1])}${pf(s[2])}`},SGR:t=>{let s=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${_f(t,!0)};${t.col};${t.row}${s}`},SGR_PIXELS:t=>{let s=t.action===0&&t.button!==4?"m":"M";return`\x1B[<${_f(t,!0)};${t.x};${t.y}${s}`}},u_=class extends tt{constructor(t,s,n){super(),this._bufferService=t,this._coreService=s,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new be),this.onProtocolChange=this._onProtocolChange.event;for(let l of Object.keys(Qm))this.addProtocol(l,Qm[l]);for(let l of Object.keys(Jm))this.addEncoding(l,Jm[l]);this.reset()}addProtocol(t,s){this._protocols[t]=s}addEncoding(t,s){this._encodings[t]=s}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(t){if(!this._protocols[t])throw new Error(`unknown protocol "${t}"`);this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(t){if(!this._encodings[t])throw new Error(`unknown encoding "${t}"`);this._activeEncoding=t}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(t,s,n){if(t.deltaY===0||t.shiftKey||s===void 0||n===void 0)return 0;let l=s/n,o=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=l+0,Math.abs(t.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(t,s){return s.altKey||s.ctrlKey||s.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,t,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(t))return!1;let s=this._encodings[this._activeEncoding](t);return s&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(s):this._coreService.triggerDataEvent(s,!0)),this._lastEvent=t,!0}explainEvents(t){return{down:!!(t&1),up:!!(t&2),drag:!!(t&4),move:!!(t&8),wheel:!!(t&16)}}_equalEvents(t,s,n){if(n){if(t.x!==s.x||t.y!==s.y)return!1}else if(t.col!==s.col||t.row!==s.row)return!1;return!(t.button!==s.button||t.action!==s.action||t.ctrl!==s.ctrl||t.alt!==s.alt||t.shift!==s.shift)}};u_=Jt([Ee(0,ls),Ee(1,Ga),Ee(2,os)],u_);var gf=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y1=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],mi;function S1(t,s){let n=0,l=s.length-1,o;if(t<s[0][0]||t>s[l][1])return!1;for(;l>=n;)if(o=n+l>>1,t>s[o][1])n=o+1;else if(t<s[o][0])l=o-1;else return!0;return!1}var w1=class{constructor(){if(this.version="6",!mi){mi=new Uint8Array(65536),mi.fill(1),mi[0]=0,mi.fill(0,1,32),mi.fill(0,127,160),mi.fill(2,4352,4448),mi[9001]=2,mi[9002]=2,mi.fill(2,11904,42192),mi[12351]=1,mi.fill(2,44032,55204),mi.fill(2,63744,64256),mi.fill(2,65040,65050),mi.fill(2,65072,65136),mi.fill(2,65280,65377),mi.fill(2,65504,65511);for(let t=0;t<gf.length;++t)mi.fill(0,gf[t][0],gf[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?mi[t]:S1(t,y1)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1}charProperties(t,s){let n=this.wcwidth(t),l=n===0&&s!==0;if(l){let o=Ya.extractWidth(s);o===0?l=!1:o>n&&(n=o)}return Ya.createPropertyValue(0,n,l)}},Ya=class cu{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new be,this.onChange=this._onChange.event;let s=new w1;this.register(s),this._active=s.version,this._activeProvider=s}static extractShouldJoin(s){return(s&1)!==0}static extractWidth(s){return s>>1&3}static extractCharKind(s){return s>>3}static createPropertyValue(s,n,l=!1){return(s&16777215)<<3|(n&3)<<1|(l?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(s){if(!this._providers[s])throw new Error(`unknown Unicode version "${s}"`);this._active=s,this._activeProvider=this._providers[s],this._onChange.fire(s)}register(s){this._providers[s.version]=s}wcwidth(s){return this._activeProvider.wcwidth(s)}getStringCellWidth(s){let n=0,l=0,o=s.length;for(let d=0;d<o;++d){let f=s.charCodeAt(d);if(55296<=f&&f<=56319){if(++d>=o)return n+this.wcwidth(f);let _=s.charCodeAt(d);56320<=_&&_<=57343?f=(f-55296)*1024+_-56320+65536:n+=this.wcwidth(_)}let p=this.charProperties(f,l),v=cu.extractWidth(p);cu.extractShouldJoin(p)&&(v-=cu.extractWidth(l)),n+=v,l=p}return n}charProperties(s,n){return this._activeProvider.charProperties(s,n)}},C1=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(t){this.glevel=t,this.charset=this._charsets[t]}setgCharset(t,s){this._charsets[t]=s,this.glevel===t&&(this.charset=s)}};function ev(t){let s=t.buffer.lines.get(t.buffer.ybase+t.buffer.y-1)?.get(t.cols-1),n=t.buffer.lines.get(t.buffer.ybase+t.buffer.y);n&&s&&(n.isWrapped=s[3]!==0&&s[3]!==32)}var lc=2147483647,x1=256,bb=class d_{constructor(s=32,n=32){if(this.maxLength=s,this.maxSubParamsLength=n,n>x1)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(s),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(s),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(s){let n=new d_;if(!s.length)return n;for(let l=Array.isArray(s[0])?1:0;l<s.length;++l){let o=s[l];if(Array.isArray(o))for(let d=0;d<o.length;++d)n.addSubParam(o[d]);else n.addParam(o)}return n}clone(){let s=new d_(this.maxLength,this.maxSubParamsLength);return s.params.set(this.params),s.length=this.length,s._subParams.set(this._subParams),s._subParamsLength=this._subParamsLength,s._subParamsIdx.set(this._subParamsIdx),s._rejectDigits=this._rejectDigits,s._rejectSubDigits=this._rejectSubDigits,s._digitIsSub=this._digitIsSub,s}toArray(){let s=[];for(let n=0;n<this.length;++n){s.push(this.params[n]);let l=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-l>0&&s.push(Array.prototype.slice.call(this._subParams,l,o))}return s}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(s){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(s<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=s>lc?lc:s}addSubParam(s){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(s<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=s>lc?lc:s,this._subParamsIdx[this.length-1]++}}hasSubParams(s){return(this._subParamsIdx[s]&255)-(this._subParamsIdx[s]>>8)>0}getSubParams(s){let n=this._subParamsIdx[s]>>8,l=this._subParamsIdx[s]&255;return l-n>0?this._subParams.subarray(n,l):null}getSubParamsAll(){let s={};for(let n=0;n<this.length;++n){let l=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-l>0&&(s[n]=this._subParams.slice(l,o))}return s}addDigit(s){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let l=this._digitIsSub?this._subParams:this.params,o=l[n-1];l[n-1]=~o?Math.min(o*10+s,lc):s}},oc=[],E1=class{constructor(){this._state=0,this._active=oc,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(t,s){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(s),{dispose:()=>{let l=n.indexOf(s);l!==-1&&n.splice(l,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=oc}reset(){if(this._state===2)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].end(!1);this._stack.paused=!1,this._active=oc,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||oc,!this._active.length)this._handlerFb(this._id,"START");else for(let t=this._active.length-1;t>=0;t--)this._active[t].start()}_put(t,s,n){if(!this._active.length)this._handlerFb(this._id,"PUT",vu(t,s,n));else for(let l=this._active.length-1;l>=0;l--)this._active[l].put(t,s,n)}start(){this.reset(),this._state=1}put(t,s,n){if(this._state!==3){if(this._state===1)for(;s<n;){let l=t[s++];if(l===59){this._state=2,this._start();break}if(l<48||57<l){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+l-48}this._state===2&&n-s>0&&this._put(t,s,n)}}end(t,s=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",t);else{let n=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=s,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;l>=0&&(n=this._active[l].end(t),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}this._active=oc,this._id=-1,this._state=0}}},Ls=class{constructor(t){this._handler=t,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(t,s,n){this._hitLimit||(this._data+=vu(t,s,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(t){let s=!1;if(this._hitLimit)s=!1;else if(t&&(s=this._handler(this._data),s instanceof Promise))return s.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,s}},cc=[],A1=class{constructor(){this._handlers=Object.create(null),this._active=cc,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=cc}registerHandler(t,s){this._handlers[t]===void 0&&(this._handlers[t]=[]);let n=this._handlers[t];return n.push(s),{dispose:()=>{let l=n.indexOf(s);l!==-1&&n.splice(l,1)}}}clearHandler(t){this._handlers[t]&&delete this._handlers[t]}setHandlerFallback(t){this._handlerFb=t}reset(){if(this._active.length)for(let t=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;t>=0;--t)this._active[t].unhook(!1);this._stack.paused=!1,this._active=cc,this._ident=0}hook(t,s){if(this.reset(),this._ident=t,this._active=this._handlers[t]||cc,!this._active.length)this._handlerFb(this._ident,"HOOK",s);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(s)}put(t,s,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",vu(t,s,n));else for(let l=this._active.length-1;l>=0;l--)this._active[l].put(t,s,n)}unhook(t,s=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",t);else{let n=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=s,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;l>=0&&(n=this._active[l].unhook(t),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}this._active=cc,this._ident=0}},_c=new bb;_c.addParam(0);var tv=class{constructor(t){this._handler=t,this._data="",this._params=_c,this._hitLimit=!1}hook(t){this._params=t.length>1||t.params[0]?t.clone():_c,this._data="",this._hitLimit=!1}put(t,s,n){this._hitLimit||(this._data+=vu(t,s,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(t){let s=!1;if(this._hitLimit)s=!1;else if(t&&(s=this._handler(this._data,this._params),s instanceof Promise))return s.then(n=>(this._params=_c,this._data="",this._hitLimit=!1,n));return this._params=_c,this._data="",this._hitLimit=!1,s}},T1=class{constructor(t){this.table=new Uint8Array(t)}setDefault(t,s){this.table.fill(t<<4|s)}add(t,s,n,l){this.table[s<<8|t]=n<<4|l}addMany(t,s,n,l){for(let o=0;o<t.length;o++)this.table[s<<8|t[o]]=n<<4|l}},Js=160,k1=(function(){let t=new T1(4095),s=Array.apply(null,Array(256)).map((p,v)=>v),n=(p,v)=>s.slice(p,v),l=n(32,127),o=n(0,24);o.push(25),o.push.apply(o,n(28,32));let d=n(0,14),f;t.setDefault(1,0),t.addMany(l,0,2,0);for(f in d)t.addMany([24,26,153,154],f,3,0),t.addMany(n(128,144),f,3,0),t.addMany(n(144,152),f,3,0),t.add(156,f,0,0),t.add(27,f,11,1),t.add(157,f,4,8),t.addMany([152,158,159],f,0,7),t.add(155,f,11,3),t.add(144,f,11,9);return t.addMany(o,0,3,0),t.addMany(o,1,3,1),t.add(127,1,0,1),t.addMany(o,8,0,8),t.addMany(o,3,3,3),t.add(127,3,0,3),t.addMany(o,4,3,4),t.add(127,4,0,4),t.addMany(o,6,3,6),t.addMany(o,5,3,5),t.add(127,5,0,5),t.addMany(o,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(l,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(n(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(l,7,0,7),t.addMany(o,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(n(64,127),3,7,0),t.addMany(n(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(n(48,60),4,8,4),t.addMany(n(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(n(32,64),6,0,6),t.add(127,6,0,6),t.addMany(n(64,127),6,0,0),t.addMany(n(32,48),3,9,5),t.addMany(n(32,48),5,9,5),t.addMany(n(48,64),5,0,6),t.addMany(n(64,127),5,7,0),t.addMany(n(32,48),4,9,5),t.addMany(n(32,48),1,9,2),t.addMany(n(32,48),2,9,2),t.addMany(n(48,127),2,10,0),t.addMany(n(48,80),1,10,0),t.addMany(n(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(n(96,127),1,10,0),t.add(80,1,11,9),t.addMany(o,9,0,9),t.add(127,9,0,9),t.addMany(n(28,32),9,0,9),t.addMany(n(32,48),9,9,12),t.addMany(n(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(o,11,0,11),t.addMany(n(32,128),11,0,11),t.addMany(n(28,32),11,0,11),t.addMany(o,10,0,10),t.add(127,10,0,10),t.addMany(n(28,32),10,0,10),t.addMany(n(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(n(32,48),10,9,12),t.addMany(o,12,0,12),t.add(127,12,0,12),t.addMany(n(28,32),12,0,12),t.addMany(n(32,48),12,9,12),t.addMany(n(48,64),12,0,11),t.addMany(n(64,127),12,12,13),t.addMany(n(64,127),10,12,13),t.addMany(n(64,127),9,12,13),t.addMany(o,13,13,13),t.addMany(l,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(Js,0,2,0),t.add(Js,8,5,8),t.add(Js,6,0,6),t.add(Js,11,0,11),t.add(Js,13,13,13),t})(),D1=class extends tt{constructor(t=k1){super(),this._transitions=t,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new bb,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(s,n,l)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,n)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ft(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new E1),this._dcsParser=this._register(new A1),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(t,s=[64,126]){let n=0;if(t.prefix){if(t.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=t.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(t.intermediates){if(t.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<t.intermediates.length;++o){let d=t.intermediates.charCodeAt(o);if(32>d||d>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=d}}if(t.final.length!==1)throw new Error("final must be a single byte");let l=t.final.charCodeAt(0);if(s[0]>l||l>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return n<<=8,n|=l,n}identToString(t){let s=[];for(;t;)s.push(String.fromCharCode(t&255)),t>>=8;return s.reverse().join("")}setPrintHandler(t){this._printHandler=t}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(t,s){let n=this._identifier(t,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let l=this._escHandlers[n];return l.push(s),{dispose:()=>{let o=l.indexOf(s);o!==-1&&l.splice(o,1)}}}clearEscHandler(t){this._escHandlers[this._identifier(t,[48,126])]&&delete this._escHandlers[this._identifier(t,[48,126])]}setEscHandlerFallback(t){this._escHandlerFb=t}setExecuteHandler(t,s){this._executeHandlers[t.charCodeAt(0)]=s}clearExecuteHandler(t){this._executeHandlers[t.charCodeAt(0)]&&delete this._executeHandlers[t.charCodeAt(0)]}setExecuteHandlerFallback(t){this._executeHandlerFb=t}registerCsiHandler(t,s){let n=this._identifier(t);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let l=this._csiHandlers[n];return l.push(s),{dispose:()=>{let o=l.indexOf(s);o!==-1&&l.splice(o,1)}}}clearCsiHandler(t){this._csiHandlers[this._identifier(t)]&&delete this._csiHandlers[this._identifier(t)]}setCsiHandlerFallback(t){this._csiHandlerFb=t}registerDcsHandler(t,s){return this._dcsParser.registerHandler(this._identifier(t),s)}clearDcsHandler(t){this._dcsParser.clearHandler(this._identifier(t))}setDcsHandlerFallback(t){this._dcsParser.setHandlerFallback(t)}registerOscHandler(t,s){return this._oscParser.registerHandler(t,s)}clearOscHandler(t){this._oscParser.clearHandler(t)}setOscHandlerFallback(t){this._oscParser.setHandlerFallback(t)}setErrorHandler(t){this._errorHandler=t}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(t,s,n,l,o){this._parseStack.state=t,this._parseStack.handlers=s,this._parseStack.handlerPos=n,this._parseStack.transition=l,this._parseStack.chunkPos=o}parse(t,s,n){let l=0,o=0,d=0,f;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,d=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let p=this._parseStack.handlers,v=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&v>-1){for(;v>=0&&(f=p[v](this._params),f!==!0);v--)if(f instanceof Promise)return this._parseStack.handlerPos=v,f}this._parseStack.handlers=[];break;case 4:if(n===!1&&v>-1){for(;v>=0&&(f=p[v](),f!==!0);v--)if(f instanceof Promise)return this._parseStack.handlerPos=v,f}this._parseStack.handlers=[];break;case 6:if(l=t[this._parseStack.chunkPos],f=this._dcsParser.unhook(l!==24&&l!==26,n),f)return f;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(l=t[this._parseStack.chunkPos],f=this._oscParser.end(l!==24&&l!==26,n),f)return f;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,d=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let p=d;p<s;++p){switch(l=t[p],o=this._transitions.table[this.currentState<<8|(l<160?l:Js)],o>>4){case 2:for(let E=p+1;;++E){if(E>=s||(l=t[E])<32||l>126&&l<Js){this._printHandler(t,p,E),p=E-1;break}if(++E>=s||(l=t[E])<32||l>126&&l<Js){this._printHandler(t,p,E),p=E-1;break}if(++E>=s||(l=t[E])<32||l>126&&l<Js){this._printHandler(t,p,E),p=E-1;break}if(++E>=s||(l=t[E])<32||l>126&&l<Js){this._printHandler(t,p,E),p=E-1;break}}break;case 3:this._executeHandlers[l]?this._executeHandlers[l]():this._executeHandlerFb(l),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:p,code:l,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let v=this._csiHandlers[this._collect<<8|l],_=v?v.length-1:-1;for(;_>=0&&(f=v[_](this._params),f!==!0);_--)if(f instanceof Promise)return this._preserveStack(3,v,_,o,p),f;_<0&&this._csiHandlerFb(this._collect<<8|l,this._params),this.precedingJoinState=0;break;case 8:do switch(l){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(l-48)}while(++p<s&&(l=t[p])>47&&l<60);p--;break;case 9:this._collect<<=8,this._collect|=l;break;case 10:let T=this._escHandlers[this._collect<<8|l],x=T?T.length-1:-1;for(;x>=0&&(f=T[x](),f!==!0);x--)if(f instanceof Promise)return this._preserveStack(4,T,x,o,p),f;x<0&&this._escHandlerFb(this._collect<<8|l),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|l,this._params);break;case 13:for(let E=p+1;;++E)if(E>=s||(l=t[E])===24||l===26||l===27||l>127&&l<Js){this._dcsParser.put(t,p,E),p=E-1;break}break;case 14:if(f=this._dcsParser.unhook(l!==24&&l!==26),f)return this._preserveStack(6,[],0,o,p),f;l===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let E=p+1;;E++)if(E>=s||(l=t[E])<32||l>127&&l<Js){this._oscParser.put(t,p,E),p=E-1;break}break;case 6:if(f=this._oscParser.end(l!==24&&l!==26),f)return this._preserveStack(5,[],0,o,p),f;l===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},M1=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,O1=/^[\da-f]+$/;function iv(t){if(!t)return;let s=t.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let n=M1.exec(s);if(n){let l=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/l*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/l*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/l*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),O1.exec(s)&&[3,6,9,12].includes(s.length))){let n=s.length/3,l=[0,0,0];for(let o=0;o<3;++o){let d=parseInt(s.slice(n*o,n*o+n),16);l[o]=n===1?d<<4:n===2?d:n===3?d>>4:d>>8}return l}}function mf(t,s){let n=t.toString(16),l=n.length<2?"0"+n:n;switch(s){case 4:return n[0];case 8:return l;case 12:return(l+l).slice(0,3);default:return l+l}}function R1(t,s=16){let[n,l,o]=t;return`rgb:${mf(n,s)}/${mf(l,s)}/${mf(o,s)}`}var N1={"(":0,")":1,"*":2,"+":3,"-":1,".":2},ca=131072,sv=10;function rv(t,s){if(t>24)return s.setWinLines||!1;switch(t){case 1:return!!s.restoreWin;case 2:return!!s.minimizeWin;case 3:return!!s.setWinPosition;case 4:return!!s.setWinSizePixels;case 5:return!!s.raiseWin;case 6:return!!s.lowerWin;case 7:return!!s.refreshWin;case 8:return!!s.setWinSizeChars;case 9:return!!s.maximizeWin;case 10:return!!s.fullscreenWin;case 11:return!!s.getWinState;case 13:return!!s.getWinPosition;case 14:return!!s.getWinSizePixels;case 15:return!!s.getScreenSizePixels;case 16:return!!s.getCellSizePixels;case 18:return!!s.getWinSizeChars;case 19:return!!s.getScreenSizeChars;case 20:return!!s.getIconTitle;case 21:return!!s.getWinTitle;case 22:return!!s.pushTitle;case 23:return!!s.popTitle;case 24:return!!s.setWinLines}return!1}var nv=5e3,av=0,B1=class extends tt{constructor(t,s,n,l,o,d,f,p,v=new D1){super(),this._bufferService=t,this._charsetService=s,this._coreService=n,this._logService=l,this._optionsService=o,this._oscLinkService=d,this._coreMouseService=f,this._unicodeService=p,this._parser=v,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new Jy,this._utf8Decoder=new e0,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=oi.clone(),this._eraseAttrDataInternal=oi.clone(),this._onRequestBell=this._register(new be),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new be),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new be),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new be),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new be),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new be),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new be),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new be),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new be),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new be),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new be),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new be),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new f_(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(_=>this._activeBuffer=_.activeBuffer)),this._parser.setCsiHandlerFallback((_,T)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(_),params:T.toArray()})}),this._parser.setEscHandlerFallback(_=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(_)})}),this._parser.setExecuteHandlerFallback(_=>{this._logService.debug("Unknown EXECUTE code: ",{code:_})}),this._parser.setOscHandlerFallback((_,T,x)=>{this._logService.debug("Unknown OSC code: ",{identifier:_,action:T,data:x})}),this._parser.setDcsHandlerFallback((_,T,x)=>{T==="HOOK"&&(x=x.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(_),action:T,payload:x})}),this._parser.setPrintHandler((_,T,x)=>this.print(_,T,x)),this._parser.registerCsiHandler({final:"@"},_=>this.insertChars(_)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},_=>this.scrollLeft(_)),this._parser.registerCsiHandler({final:"A"},_=>this.cursorUp(_)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},_=>this.scrollRight(_)),this._parser.registerCsiHandler({final:"B"},_=>this.cursorDown(_)),this._parser.registerCsiHandler({final:"C"},_=>this.cursorForward(_)),this._parser.registerCsiHandler({final:"D"},_=>this.cursorBackward(_)),this._parser.registerCsiHandler({final:"E"},_=>this.cursorNextLine(_)),this._parser.registerCsiHandler({final:"F"},_=>this.cursorPrecedingLine(_)),this._parser.registerCsiHandler({final:"G"},_=>this.cursorCharAbsolute(_)),this._parser.registerCsiHandler({final:"H"},_=>this.cursorPosition(_)),this._parser.registerCsiHandler({final:"I"},_=>this.cursorForwardTab(_)),this._parser.registerCsiHandler({final:"J"},_=>this.eraseInDisplay(_,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},_=>this.eraseInDisplay(_,!0)),this._parser.registerCsiHandler({final:"K"},_=>this.eraseInLine(_,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},_=>this.eraseInLine(_,!0)),this._parser.registerCsiHandler({final:"L"},_=>this.insertLines(_)),this._parser.registerCsiHandler({final:"M"},_=>this.deleteLines(_)),this._parser.registerCsiHandler({final:"P"},_=>this.deleteChars(_)),this._parser.registerCsiHandler({final:"S"},_=>this.scrollUp(_)),this._parser.registerCsiHandler({final:"T"},_=>this.scrollDown(_)),this._parser.registerCsiHandler({final:"X"},_=>this.eraseChars(_)),this._parser.registerCsiHandler({final:"Z"},_=>this.cursorBackwardTab(_)),this._parser.registerCsiHandler({final:"`"},_=>this.charPosAbsolute(_)),this._parser.registerCsiHandler({final:"a"},_=>this.hPositionRelative(_)),this._parser.registerCsiHandler({final:"b"},_=>this.repeatPrecedingCharacter(_)),this._parser.registerCsiHandler({final:"c"},_=>this.sendDeviceAttributesPrimary(_)),this._parser.registerCsiHandler({prefix:">",final:"c"},_=>this.sendDeviceAttributesSecondary(_)),this._parser.registerCsiHandler({final:"d"},_=>this.linePosAbsolute(_)),this._parser.registerCsiHandler({final:"e"},_=>this.vPositionRelative(_)),this._parser.registerCsiHandler({final:"f"},_=>this.hVPosition(_)),this._parser.registerCsiHandler({final:"g"},_=>this.tabClear(_)),this._parser.registerCsiHandler({final:"h"},_=>this.setMode(_)),this._parser.registerCsiHandler({prefix:"?",final:"h"},_=>this.setModePrivate(_)),this._parser.registerCsiHandler({final:"l"},_=>this.resetMode(_)),this._parser.registerCsiHandler({prefix:"?",final:"l"},_=>this.resetModePrivate(_)),this._parser.registerCsiHandler({final:"m"},_=>this.charAttributes(_)),this._parser.registerCsiHandler({final:"n"},_=>this.deviceStatus(_)),this._parser.registerCsiHandler({prefix:"?",final:"n"},_=>this.deviceStatusPrivate(_)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},_=>this.softReset(_)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},_=>this.setCursorStyle(_)),this._parser.registerCsiHandler({final:"r"},_=>this.setScrollRegion(_)),this._parser.registerCsiHandler({final:"s"},_=>this.saveCursor(_)),this._parser.registerCsiHandler({final:"t"},_=>this.windowOptions(_)),this._parser.registerCsiHandler({final:"u"},_=>this.restoreCursor(_)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},_=>this.insertColumns(_)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},_=>this.deleteColumns(_)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},_=>this.selectProtected(_)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},_=>this.requestMode(_,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},_=>this.requestMode(_,!1)),this._parser.setExecuteHandler(ae.BEL,()=>this.bell()),this._parser.setExecuteHandler(ae.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(ae.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(ae.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(ae.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(ae.BS,()=>this.backspace()),this._parser.setExecuteHandler(ae.HT,()=>this.tab()),this._parser.setExecuteHandler(ae.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(ae.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(lu.IND,()=>this.index()),this._parser.setExecuteHandler(lu.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(lu.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Ls(_=>(this.setTitle(_),this.setIconName(_),!0))),this._parser.registerOscHandler(1,new Ls(_=>this.setIconName(_))),this._parser.registerOscHandler(2,new Ls(_=>this.setTitle(_))),this._parser.registerOscHandler(4,new Ls(_=>this.setOrReportIndexedColor(_))),this._parser.registerOscHandler(8,new Ls(_=>this.setHyperlink(_))),this._parser.registerOscHandler(10,new Ls(_=>this.setOrReportFgColor(_))),this._parser.registerOscHandler(11,new Ls(_=>this.setOrReportBgColor(_))),this._parser.registerOscHandler(12,new Ls(_=>this.setOrReportCursorColor(_))),this._parser.registerOscHandler(104,new Ls(_=>this.restoreIndexedColor(_))),this._parser.registerOscHandler(110,new Ls(_=>this.restoreFgColor(_))),this._parser.registerOscHandler(111,new Ls(_=>this.restoreBgColor(_))),this._parser.registerOscHandler(112,new Ls(_=>this.restoreCursorColor(_))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let _ in vi)this._parser.registerEscHandler({intermediates:"(",final:_},()=>this.selectCharset("("+_)),this._parser.registerEscHandler({intermediates:")",final:_},()=>this.selectCharset(")"+_)),this._parser.registerEscHandler({intermediates:"*",final:_},()=>this.selectCharset("*"+_)),this._parser.registerEscHandler({intermediates:"+",final:_},()=>this.selectCharset("+"+_)),this._parser.registerEscHandler({intermediates:"-",final:_},()=>this.selectCharset("-"+_)),this._parser.registerEscHandler({intermediates:".",final:_},()=>this.selectCharset("."+_)),this._parser.registerEscHandler({intermediates:"/",final:_},()=>this.selectCharset("/"+_));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(_=>(this._logService.error("Parsing error: ",_),_)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new tv((_,T)=>this.requestStatusString(_,T)))}getAttrData(){return this._curAttrData}_preserveStack(t,s,n,l){this._parseStack.paused=!0,this._parseStack.cursorStartX=t,this._parseStack.cursorStartY=s,this._parseStack.decodedLength=n,this._parseStack.position=l}_logSlowResolvingAsync(t){this._logService.logLevel<=3&&Promise.race([t,new Promise((s,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),nv))]).catch(s=>{if(s!=="#SLOW_TIMEOUT")throw s;console.warn(`async parser handler taking longer than ${nv} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(t,s){let n,l=this._activeBuffer.x,o=this._activeBuffer.y,d=0,f=this._parseStack.paused;if(f){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,s))return this._logSlowResolvingAsync(n),n;l=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,t.length>ca&&(d=this._parseStack.position+ca)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof t=="string"?` "${t}"`:` "${Array.prototype.map.call(t,_=>String.fromCharCode(_)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof t=="string"?t.split("").map(_=>_.charCodeAt(0)):t),this._parseBuffer.length<t.length&&this._parseBuffer.length<ca&&(this._parseBuffer=new Uint32Array(Math.min(t.length,ca))),f||this._dirtyRowTracker.clearRange(),t.length>ca)for(let _=d;_<t.length;_+=ca){let T=_+ca<t.length?_+ca:t.length,x=typeof t=="string"?this._stringDecoder.decode(t.substring(_,T),this._parseBuffer):this._utf8Decoder.decode(t.subarray(_,T),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,x))return this._preserveStack(l,o,x,_),this._logSlowResolvingAsync(n),n}else if(!f){let _=typeof t=="string"?this._stringDecoder.decode(t,this._parseBuffer):this._utf8Decoder.decode(t,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,_))return this._preserveStack(l,o,_,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==l||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let p=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),v=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);v<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(v,this._bufferService.rows-1),end:Math.min(p,this._bufferService.rows-1)})}print(t,s,n){let l,o,d=this._charsetService.charset,f=this._optionsService.rawOptions.screenReaderMode,p=this._bufferService.cols,v=this._coreService.decPrivateModes.wraparound,_=this._coreService.modes.insertMode,T=this._curAttrData,x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-s>0&&x.getWidth(this._activeBuffer.x-1)===2&&x.setCellFromCodepoint(this._activeBuffer.x-1,0,1,T);let E=this._parser.precedingJoinState;for(let N=s;N<n;++N){if(l=t[N],l<127&&d){let O=d[String.fromCharCode(l)];O&&(l=O.charCodeAt(0))}let D=this._unicodeService.charProperties(l,E);o=Ya.extractWidth(D);let H=Ya.extractShouldJoin(D),y=H?Ya.extractWidth(E):0;if(E=D,f&&this._onA11yChar.fire(ua(l)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-y>p){if(v){let O=x,k=this._activeBuffer.x-y;for(this._activeBuffer.x=y,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),y>0&&x instanceof dc&&x.copyCellsFrom(O,k,0,y,!1);k<p;)O.setCellFromCodepoint(k++,0,1,T)}else if(this._activeBuffer.x=p-1,o===2)continue}if(H&&this._activeBuffer.x){let O=x.getWidth(this._activeBuffer.x-1)?1:2;x.addCodepointToCell(this._activeBuffer.x-O,l,o);for(let k=o-y;--k>=0;)x.setCellFromCodepoint(this._activeBuffer.x++,0,0,T);continue}if(_&&(x.insertCells(this._activeBuffer.x,o-y,this._activeBuffer.getNullCell(T)),x.getWidth(p-1)===2&&x.setCellFromCodepoint(p-1,0,1,T)),x.setCellFromCodepoint(this._activeBuffer.x++,l,o,T),o>0)for(;--o;)x.setCellFromCodepoint(this._activeBuffer.x++,0,0,T)}this._parser.precedingJoinState=E,this._activeBuffer.x<p&&n-s>0&&x.getWidth(this._activeBuffer.x)===0&&!x.hasContent(this._activeBuffer.x)&&x.setCellFromCodepoint(this._activeBuffer.x,0,1,T),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(t,s){return t.final==="t"&&!t.prefix&&!t.intermediates?this._parser.registerCsiHandler(t,n=>rv(n.params[0],this._optionsService.rawOptions.windowOptions)?s(n):!0):this._parser.registerCsiHandler(t,s)}registerDcsHandler(t,s){return this._parser.registerDcsHandler(t,new tv(s))}registerEscHandler(t,s){return this._parser.registerEscHandler(t,s)}registerOscHandler(t,s){return this._parser.registerOscHandler(t,new Ls(s))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-t),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(t=this._bufferService.cols-1){this._activeBuffer.x=Math.min(t,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(t,s){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=t,this._activeBuffer.y=this._activeBuffer.scrollTop+s):(this._activeBuffer.x=t,this._activeBuffer.y=s),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(t,s){this._restrictCursor(),this._setCursor(this._activeBuffer.x+t,this._activeBuffer.y+s)}cursorUp(t){let s=this._activeBuffer.y-this._activeBuffer.scrollTop;return s>=0?this._moveCursor(0,-Math.min(s,t.params[0]||1)):this._moveCursor(0,-(t.params[0]||1)),!0}cursorDown(t){let s=this._activeBuffer.scrollBottom-this._activeBuffer.y;return s>=0?this._moveCursor(0,Math.min(s,t.params[0]||1)):this._moveCursor(0,t.params[0]||1),!0}cursorForward(t){return this._moveCursor(t.params[0]||1,0),!0}cursorBackward(t){return this._moveCursor(-(t.params[0]||1),0),!0}cursorNextLine(t){return this.cursorDown(t),this._activeBuffer.x=0,!0}cursorPrecedingLine(t){return this.cursorUp(t),this._activeBuffer.x=0,!0}cursorCharAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(t){return this._setCursor(t.length>=2?(t.params[1]||1)-1:0,(t.params[0]||1)-1),!0}charPosAbsolute(t){return this._setCursor((t.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(t){return this._moveCursor(t.params[0]||1,0),!0}linePosAbsolute(t){return this._setCursor(this._activeBuffer.x,(t.params[0]||1)-1),!0}vPositionRelative(t){return this._moveCursor(0,t.params[0]||1),!0}hVPosition(t){return this.cursorPosition(t),!0}tabClear(t){let s=t.params[0];return s===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:s===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let s=t.params[0]||1;for(;s--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(t){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let s=t.params[0]||1;for(;s--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(t){let s=t.params[0];return s===1&&(this._curAttrData.bg|=536870912),(s===2||s===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(t,s,n,l=!1,o=!1){let d=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);d.replaceCells(s,n,this._activeBuffer.getNullCell(this._eraseAttrData()),o),l&&(d.isWrapped=!1)}_resetBufferLine(t,s=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+t);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),s),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+t),n.isWrapped=!1)}eraseInDisplay(t,s=!1){this._restrictCursor(this._bufferService.cols);let n;switch(t.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,s);n<this._bufferService.rows;n++)this._resetBufferLine(n,s);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,s),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,s);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+n)?.getTrimmedLength(););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,s);this._dirtyRowTracker.markDirty(0)}break;case 3:let l=this._activeBuffer.lines.length-this._bufferService.rows;l>0&&(this._activeBuffer.lines.trimStart(l),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-l,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-l,0),this._onScroll.fire(0));break}return!0}eraseInLine(t,s=!1){switch(this._restrictCursor(this._bufferService.cols),t.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,s);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,s);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,s);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(t){this._restrictCursor();let s=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,l=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-l+1;for(;s--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(t){this._restrictCursor();let s=t.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,l;for(l=this._bufferService.rows-1-this._activeBuffer.scrollBottom,l=this._bufferService.rows-1+this._activeBuffer.ybase-l;s--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(l,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(t){this._restrictCursor();let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return s&&(s.insertCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(t){this._restrictCursor();let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return s&&(s.deleteCells(this._activeBuffer.x,t.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(t){let s=t.params[0]||1;for(;s--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(t){let s=t.params[0]||1;for(;s--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(oi));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.deleteCells(0,s,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.insertCells(0,s,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.insertCells(this._activeBuffer.x,s,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(t){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=t.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.deleteCells(this._activeBuffer.x,s,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(t){this._restrictCursor();let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return s&&(s.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(t.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(t){let s=this._parser.precedingJoinState;if(!s)return!0;let n=t.params[0]||1,l=Ya.extractWidth(s),o=this._activeBuffer.x-l,d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),f=new Uint32Array(d.length*n),p=0;for(let _=0;_<d.length;){let T=d.codePointAt(_)||0;f[p++]=T,_+=T>65535?2:1}let v=p;for(let _=1;_<n;++_)f.copyWithin(v,0,p),v+=p;return this.print(f,0,v),!0}sendDeviceAttributesPrimary(t){return t.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(ae.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(ae.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(t){return t.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(ae.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(ae.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(t.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(ae.ESC+"[>83;40003;0c")),!0}_is(t){return(this._optionsService.rawOptions.termName+"").indexOf(t)===0}setMode(t){for(let s=0;s<t.length;s++)switch(t.params[s]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(t){for(let s=0;s<t.length;s++)switch(t.params[s]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Wa),this._charsetService.setgCharset(1,Wa),this._charsetService.setgCharset(2,Wa),this._charsetService.setgCharset(3,Wa);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(t){for(let s=0;s<t.length;s++)switch(t.params[s]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(t){for(let s=0;s<t.length;s++)switch(t.params[s]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),t.params[s]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(t,s){let n;(H=>(H[H.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",H[H.SET=1]="SET",H[H.RESET=2]="RESET",H[H.PERMANENTLY_SET=3]="PERMANENTLY_SET",H[H.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(n||={});let l=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:d}=this._coreMouseService,f=this._coreService,{buffers:p,cols:v}=this._bufferService,{active:_,alt:T}=p,x=this._optionsService.rawOptions,E=(H,y)=>(f.triggerDataEvent(`${ae.ESC}[${s?"":"?"}${H};${y}$y`),!0),N=H=>H?1:2,D=t.params[0];return s?D===2?E(D,4):D===4?E(D,N(f.modes.insertMode)):D===12?E(D,3):D===20?E(D,N(x.convertEol)):E(D,0):D===1?E(D,N(l.applicationCursorKeys)):D===3?E(D,x.windowOptions.setWinLines?v===80?2:v===132?1:0:0):D===6?E(D,N(l.origin)):D===7?E(D,N(l.wraparound)):D===8?E(D,3):D===9?E(D,N(o==="X10")):D===12?E(D,N(x.cursorBlink)):D===25?E(D,N(!f.isCursorHidden)):D===45?E(D,N(l.reverseWraparound)):D===66?E(D,N(l.applicationKeypad)):D===67?E(D,4):D===1e3?E(D,N(o==="VT200")):D===1002?E(D,N(o==="DRAG")):D===1003?E(D,N(o==="ANY")):D===1004?E(D,N(l.sendFocus)):D===1005?E(D,4):D===1006?E(D,N(d==="SGR")):D===1015?E(D,4):D===1016?E(D,N(d==="SGR_PIXELS")):D===1048?E(D,1):D===47||D===1047||D===1049?E(D,N(_===T)):D===2004?E(D,N(l.bracketedPasteMode)):D===2026?E(D,N(l.synchronizedOutput)):E(D,0)}_updateAttrColor(t,s,n,l,o){return s===2?(t|=50331648,t&=-16777216,t|=bc.fromColorRGB([n,l,o])):s===5&&(t&=-50331904,t|=33554432|n&255),t}_extractColor(t,s,n){let l=[0,0,-1,0,0,0],o=0,d=0;do{if(l[d+o]=t.params[s+d],t.hasSubParams(s+d)){let f=t.getSubParams(s+d),p=0;do l[1]===5&&(o=1),l[d+p+1+o]=f[p];while(++p<f.length&&p+d+1+o<l.length);break}if(l[1]===5&&d+o>=2||l[1]===2&&d+o>=5)break;l[1]&&(o=1)}while(++d+s<t.length&&d+o<l.length);for(let f=2;f<l.length;++f)l[f]===-1&&(l[f]=0);switch(l[0]){case 38:n.fg=this._updateAttrColor(n.fg,l[1],l[3],l[4],l[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,l[1],l[3],l[4],l[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,l[1],l[3],l[4],l[5])}return d}_processUnderline(t,s){s.extended=s.extended.clone(),(!~t||t>5)&&(t=1),s.extended.underlineStyle=t,s.fg|=268435456,t===0&&(s.fg&=-268435457),s.updateExtended()}_processSGR0(t){t.fg=oi.fg,t.bg=oi.bg,t.extended=t.extended.clone(),t.extended.underlineStyle=0,t.extended.underlineColor&=-67108864,t.updateExtended()}charAttributes(t){if(t.length===1&&t.params[0]===0)return this._processSGR0(this._curAttrData),!0;let s=t.length,n,l=this._curAttrData;for(let o=0;o<s;o++)n=t.params[o],n>=30&&n<=37?(l.fg&=-50331904,l.fg|=16777216|n-30):n>=40&&n<=47?(l.bg&=-50331904,l.bg|=16777216|n-40):n>=90&&n<=97?(l.fg&=-50331904,l.fg|=16777216|n-90|8):n>=100&&n<=107?(l.bg&=-50331904,l.bg|=16777216|n-100|8):n===0?this._processSGR0(l):n===1?l.fg|=134217728:n===3?l.bg|=67108864:n===4?(l.fg|=268435456,this._processUnderline(t.hasSubParams(o)?t.getSubParams(o)[0]:1,l)):n===5?l.fg|=536870912:n===7?l.fg|=67108864:n===8?l.fg|=1073741824:n===9?l.fg|=2147483648:n===2?l.bg|=134217728:n===21?this._processUnderline(2,l):n===22?(l.fg&=-134217729,l.bg&=-134217729):n===23?l.bg&=-67108865:n===24?(l.fg&=-268435457,this._processUnderline(0,l)):n===25?l.fg&=-536870913:n===27?l.fg&=-67108865:n===28?l.fg&=-1073741825:n===29?l.fg&=2147483647:n===39?(l.fg&=-67108864,l.fg|=oi.fg&16777215):n===49?(l.bg&=-67108864,l.bg|=oi.bg&16777215):n===38||n===48||n===58?o+=this._extractColor(t,o,l):n===53?l.bg|=1073741824:n===55?l.bg&=-1073741825:n===59?(l.extended=l.extended.clone(),l.extended.underlineColor=-1,l.updateExtended()):n===100?(l.fg&=-67108864,l.fg|=oi.fg&16777215,l.bg&=-67108864,l.bg|=oi.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(t){switch(t.params[0]){case 5:this._coreService.triggerDataEvent(`${ae.ESC}[0n`);break;case 6:let s=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ae.ESC}[${s};${n}R`);break}return!0}deviceStatusPrivate(t){if(t.params[0]===6){let s=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${ae.ESC}[?${s};${n}R`)}return!0}softReset(t){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=oi.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(t){let s=t.length===0?1:t.params[0];if(s===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(s){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=s%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(t){let s=t.params[0]||1,n;return(t.length<2||(n=t.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>s&&(this._activeBuffer.scrollTop=s-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(t){if(!rv(t.params[0],this._optionsService.rawOptions.windowOptions))return!0;let s=t.length>1?t.params[1]:0;switch(t.params[0]){case 14:s!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${ae.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(s===0||s===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>sv&&this._windowTitleStack.shift()),(s===0||s===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>sv&&this._iconNameStack.shift());break;case 23:(s===0||s===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(s===0||s===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(t){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(t){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(t){return this._windowTitle=t,this._onTitleChange.fire(t),!0}setIconName(t){return this._iconName=t,!0}setOrReportIndexedColor(t){let s=[],n=t.split(";");for(;n.length>1;){let l=n.shift(),o=n.shift();if(/^\d+$/.exec(l)){let d=parseInt(l);if(lv(d))if(o==="?")s.push({type:0,index:d});else{let f=iv(o);f&&s.push({type:1,index:d,color:f})}}}return s.length&&this._onColor.fire(s),!0}setHyperlink(t){let s=t.indexOf(";");if(s===-1)return!0;let n=t.slice(0,s).trim(),l=t.slice(s+1);return l?this._createHyperlink(n,l):n.trim()?!1:this._finishHyperlink()}_createHyperlink(t,s){this._getCurrentLinkId()&&this._finishHyperlink();let n=t.split(":"),l,o=n.findIndex(d=>d.startsWith("id="));return o!==-1&&(l=n[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:l,uri:s}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(t,s){let n=t.split(";");for(let l=0;l<n.length&&!(s>=this._specialColors.length);++l,++s)if(n[l]==="?")this._onColor.fire([{type:0,index:this._specialColors[s]}]);else{let o=iv(n[l]);o&&this._onColor.fire([{type:1,index:this._specialColors[s],color:o}])}return!0}setOrReportFgColor(t){return this._setOrReportSpecialColor(t,0)}setOrReportBgColor(t){return this._setOrReportSpecialColor(t,1)}setOrReportCursorColor(t){return this._setOrReportSpecialColor(t,2)}restoreIndexedColor(t){if(!t)return this._onColor.fire([{type:2}]),!0;let s=[],n=t.split(";");for(let l=0;l<n.length;++l)if(/^\d+$/.exec(n[l])){let o=parseInt(n[l]);lv(o)&&s.push({type:2,index:o})}return s.length&&this._onColor.fire(s),!0}restoreFgColor(t){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(t){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(t){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Wa),!0}selectCharset(t){return t.length!==2?(this.selectDefaultCharset(),!0):(t[0]==="/"||this._charsetService.setgCharset(N1[t[0]],vi[t[1]]||Wa),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let t=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,t,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=oi.clone(),this._eraseAttrDataInternal=oi.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(t){return this._charsetService.setgLevel(t),!0}screenAlignmentPattern(){let t=new er;t.content=1<<22|69,t.fg=this._curAttrData.fg,t.bg=this._curAttrData.bg,this._setCursor(0,0);for(let s=0;s<this._bufferService.rows;++s){let n=this._activeBuffer.ybase+this._activeBuffer.y+s,l=this._activeBuffer.lines.get(n);l&&(l.fill(t),l.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(t,s){let n=f=>(this._coreService.triggerDataEvent(`${ae.ESC}${f}${ae.ESC}\\`),!0),l=this._bufferService.buffer,o=this._optionsService.rawOptions;return n(t==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:t==='"p'?'P1$r61;1"p':t==="r"?`P1$r${l.scrollTop+1};${l.scrollBottom+1}r`:t==="m"?"P1$r0m":t===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(t,s){this._dirtyRowTracker.markRangeDirty(t,s)}},f_=class{constructor(t){this._bufferService=t,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(t){t<this.start?this.start=t:t>this.end&&(this.end=t)}markRangeDirty(t,s){t>s&&(av=t,t=s,s=av),t<this.start&&(this.start=t),s>this.end&&(this.end=s)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};f_=Jt([Ee(0,ls)],f_);function lv(t){return 0<=t&&t<256}var L1=5e7,ov=12,z1=50,H1=class extends tt{constructor(t){super(),this._action=t,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new be),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(t,s){if(s!==void 0&&this._syncCalls>s){this._syncCalls=0;return}if(this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(t,s){if(this._pendingData>L1)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(s),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=t.length,this._writeBuffer.push(t),this._callbacks.push(s)}_innerWrite(t=0,s=!0){let n=t||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let l=this._writeBuffer[this._bufferOffset],o=this._action(l,s);if(o){let f=p=>performance.now()-n>=ov?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(n,p);o.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(f);return}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=l.length,performance.now()-n>=ov)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>z1&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},__=class{constructor(t){this._bufferService=t,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(t){let s=this._bufferService.buffer;if(t.id===void 0){let p=s.addMarker(s.ybase+s.y),v={data:t,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(v,p)),this._dataByLinkId.set(v.id,v),v.id}let n=t,l=this._getEntryIdKey(n),o=this._entriesWithId.get(l);if(o)return this.addLineToLink(o.id,s.ybase+s.y),o.id;let d=s.addMarker(s.ybase+s.y),f={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(f,d)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(t,s){let n=this._dataByLinkId.get(t);if(n&&n.lines.every(l=>l.line!==s)){let l=this._bufferService.buffer.addMarker(s);n.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(n,l))}}getLinkData(t){return this._dataByLinkId.get(t)?.data}_getEntryIdKey(t){return`${t.id};;${t.uri}`}_removeMarkerFromLink(t,s){let n=t.lines.indexOf(s);n!==-1&&(t.lines.splice(n,1),t.lines.length===0&&(t.data.id!==void 0&&this._entriesWithId.delete(t.key),this._dataByLinkId.delete(t.id)))}};__=Jt([Ee(0,ls)],__);var cv=!1,U1=class extends tt{constructor(t){super(),this._windowsWrappingHeuristics=this._register(new Fl),this._onBinary=this._register(new be),this.onBinary=this._onBinary.event,this._onData=this._register(new be),this.onData=this._onData.event,this._onLineFeed=this._register(new be),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new be),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new be),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new be),this._instantiationService=new o1,this.optionsService=this._register(new v1(t)),this._instantiationService.setService(os,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(c_)),this._instantiationService.setService(ls,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(o_)),this._instantiationService.setService(Uv,this._logService),this.coreService=this._register(this._instantiationService.createInstance(h_)),this._instantiationService.setService(Ga,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(u_)),this._instantiationService.setService(Hv,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Ya)),this._instantiationService.setService(r0,this.unicodeService),this._charsetService=this._instantiationService.createInstance(C1),this._instantiationService.setService(s0,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(__),this._instantiationService.setService(jv,this._oscLinkService),this._inputHandler=this._register(new B1(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Ii.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Ii.forward(this._bufferService.onResize,this._onResize)),this._register(Ii.forward(this.coreService.onData,this._onData)),this._register(Ii.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new H1((s,n)=>this._inputHandler.parse(s,n))),this._register(Ii.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new be),this._onScroll.event(t=>{this._onScrollApi?.fire(t.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(t){for(let s in t)this.optionsService.options[s]=t[s]}write(t,s){this._writeBuffer.write(t,s)}writeSync(t,s){this._logService.logLevel<=3&&!cv&&(this._logService.warn("writeSync is unreliable and will be removed soon."),cv=!0),this._writeBuffer.writeSync(t,s)}input(t,s=!0){this.coreService.triggerDataEvent(t,s)}resize(t,s){isNaN(t)||isNaN(s)||(t=Math.max(t,mb),s=Math.max(s,vb),this._bufferService.resize(t,s))}scroll(t,s=!1){this._bufferService.scroll(t,s)}scrollLines(t,s){this._bufferService.scrollLines(t,s)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let s=t-this._bufferService.buffer.ydisp;s!==0&&this.scrollLines(s)}registerEscHandler(t,s){return this._inputHandler.registerEscHandler(t,s)}registerDcsHandler(t,s){return this._inputHandler.registerDcsHandler(t,s)}registerCsiHandler(t,s){return this._inputHandler.registerCsiHandler(t,s)}registerOscHandler(t,s){return this._inputHandler.registerOscHandler(t,s)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let t=!1,s=this.optionsService.rawOptions.windowsPty;s&&s.buildNumber!==void 0&&s.buildNumber!==void 0?t=s.backend==="conpty"&&s.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(t=!0),t?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let t=[];t.push(this.onLineFeed(ev.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},()=>(ev(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ft(()=>{for(let s of t)s.dispose()})}}},j1={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function F1(t,s,n,l){let o={type:0,cancel:!1,key:void 0},d=(t.shiftKey?1:0)|(t.altKey?2:0)|(t.ctrlKey?4:0)|(t.metaKey?8:0);switch(t.keyCode){case 0:t.key==="UIKeyInputUpArrow"?s?o.key=ae.ESC+"OA":o.key=ae.ESC+"[A":t.key==="UIKeyInputLeftArrow"?s?o.key=ae.ESC+"OD":o.key=ae.ESC+"[D":t.key==="UIKeyInputRightArrow"?s?o.key=ae.ESC+"OC":o.key=ae.ESC+"[C":t.key==="UIKeyInputDownArrow"&&(s?o.key=ae.ESC+"OB":o.key=ae.ESC+"[B");break;case 8:o.key=t.ctrlKey?"\b":ae.DEL,t.altKey&&(o.key=ae.ESC+o.key);break;case 9:if(t.shiftKey){o.key=ae.ESC+"[Z";break}o.key=ae.HT,o.cancel=!0;break;case 13:o.key=t.altKey?ae.ESC+ae.CR:ae.CR,o.cancel=!0;break;case 27:o.key=ae.ESC,t.altKey&&(o.key=ae.ESC+ae.ESC),o.cancel=!0;break;case 37:if(t.metaKey)break;d?o.key=ae.ESC+"[1;"+(d+1)+"D":s?o.key=ae.ESC+"OD":o.key=ae.ESC+"[D";break;case 39:if(t.metaKey)break;d?o.key=ae.ESC+"[1;"+(d+1)+"C":s?o.key=ae.ESC+"OC":o.key=ae.ESC+"[C";break;case 38:if(t.metaKey)break;d?o.key=ae.ESC+"[1;"+(d+1)+"A":s?o.key=ae.ESC+"OA":o.key=ae.ESC+"[A";break;case 40:if(t.metaKey)break;d?o.key=ae.ESC+"[1;"+(d+1)+"B":s?o.key=ae.ESC+"OB":o.key=ae.ESC+"[B";break;case 45:!t.shiftKey&&!t.ctrlKey&&(o.key=ae.ESC+"[2~");break;case 46:d?o.key=ae.ESC+"[3;"+(d+1)+"~":o.key=ae.ESC+"[3~";break;case 36:d?o.key=ae.ESC+"[1;"+(d+1)+"H":s?o.key=ae.ESC+"OH":o.key=ae.ESC+"[H";break;case 35:d?o.key=ae.ESC+"[1;"+(d+1)+"F":s?o.key=ae.ESC+"OF":o.key=ae.ESC+"[F";break;case 33:t.shiftKey?o.type=2:t.ctrlKey?o.key=ae.ESC+"[5;"+(d+1)+"~":o.key=ae.ESC+"[5~";break;case 34:t.shiftKey?o.type=3:t.ctrlKey?o.key=ae.ESC+"[6;"+(d+1)+"~":o.key=ae.ESC+"[6~";break;case 112:d?o.key=ae.ESC+"[1;"+(d+1)+"P":o.key=ae.ESC+"OP";break;case 113:d?o.key=ae.ESC+"[1;"+(d+1)+"Q":o.key=ae.ESC+"OQ";break;case 114:d?o.key=ae.ESC+"[1;"+(d+1)+"R":o.key=ae.ESC+"OR";break;case 115:d?o.key=ae.ESC+"[1;"+(d+1)+"S":o.key=ae.ESC+"OS";break;case 116:d?o.key=ae.ESC+"[15;"+(d+1)+"~":o.key=ae.ESC+"[15~";break;case 117:d?o.key=ae.ESC+"[17;"+(d+1)+"~":o.key=ae.ESC+"[17~";break;case 118:d?o.key=ae.ESC+"[18;"+(d+1)+"~":o.key=ae.ESC+"[18~";break;case 119:d?o.key=ae.ESC+"[19;"+(d+1)+"~":o.key=ae.ESC+"[19~";break;case 120:d?o.key=ae.ESC+"[20;"+(d+1)+"~":o.key=ae.ESC+"[20~";break;case 121:d?o.key=ae.ESC+"[21;"+(d+1)+"~":o.key=ae.ESC+"[21~";break;case 122:d?o.key=ae.ESC+"[23;"+(d+1)+"~":o.key=ae.ESC+"[23~";break;case 123:d?o.key=ae.ESC+"[24;"+(d+1)+"~":o.key=ae.ESC+"[24~";break;default:if(t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)t.keyCode>=65&&t.keyCode<=90?o.key=String.fromCharCode(t.keyCode-64):t.keyCode===32?o.key=ae.NUL:t.keyCode>=51&&t.keyCode<=55?o.key=String.fromCharCode(t.keyCode-51+27):t.keyCode===56?o.key=ae.DEL:t.keyCode===219?o.key=ae.ESC:t.keyCode===220?o.key=ae.FS:t.keyCode===221&&(o.key=ae.GS);else if((!n||l)&&t.altKey&&!t.metaKey){let f=j1[t.keyCode]?.[t.shiftKey?1:0];if(f)o.key=ae.ESC+f;else if(t.keyCode>=65&&t.keyCode<=90){let p=t.ctrlKey?t.keyCode-64:t.keyCode+32,v=String.fromCharCode(p);t.shiftKey&&(v=v.toUpperCase()),o.key=ae.ESC+v}else if(t.keyCode===32)o.key=ae.ESC+(t.ctrlKey?ae.NUL:" ");else if(t.key==="Dead"&&t.code.startsWith("Key")){let p=t.code.slice(3,4);t.shiftKey||(p=p.toLowerCase()),o.key=ae.ESC+p,o.cancel=!0}}else n&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&t.metaKey?t.keyCode===65&&(o.type=1):t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.keyCode>=48&&t.key.length===1?o.key=t.key:t.key&&t.ctrlKey&&(t.key==="_"&&(o.key=ae.US),t.key==="@"&&(o.key=ae.NUL));break}return o}var ei=0,I1=class{constructor(t){this._getKey=t,this._array=[],this._insertedValues=[],this._flushInsertedTask=new _u,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new _u,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(t){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(t)}_flushInserted(){let t=this._insertedValues.sort((o,d)=>this._getKey(o)-this._getKey(d)),s=0,n=0,l=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<l.length;o++)n>=this._array.length||this._getKey(t[s])<=this._getKey(this._array[n])?(l[o]=t[s],s++):l[o]=this._array[n++];this._array=l,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(t){if(this._flushCleanupInserted(),this._array.length===0)return!1;let s=this._getKey(t);if(s===void 0||(ei=this._search(s),ei===-1)||this._getKey(this._array[ei])!==s)return!1;do if(this._array[ei]===t)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(ei),!0;while(++ei<this._array.length&&this._getKey(this._array[ei])===s);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let t=this._deletedIndices.sort((o,d)=>o-d),s=0,n=new Array(this._array.length-t.length),l=0;for(let o=0;o<this._array.length;o++)t[s]===o?s++:n[l++]=this._array[o];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(ei=this._search(t),!(ei<0||ei>=this._array.length)&&this._getKey(this._array[ei])===t))do yield this._array[ei];while(++ei<this._array.length&&this._getKey(this._array[ei])===t)}forEachByKey(t,s){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(ei=this._search(t),!(ei<0||ei>=this._array.length)&&this._getKey(this._array[ei])===t))do s(this._array[ei]);while(++ei<this._array.length&&this._getKey(this._array[ei])===t)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(t){let s=0,n=this._array.length-1;for(;n>=s;){let l=s+n>>1,o=this._getKey(this._array[l]);if(o>t)n=l-1;else if(o<t)s=l+1;else{for(;l>0&&this._getKey(this._array[l-1])===t;)l--;return l}}return s}},vf=0,hv=0,q1=class extends tt{constructor(){super(),this._decorations=new I1(t=>t?.marker.line),this._onDecorationRegistered=this._register(new be),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new be),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ft(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(t){if(t.marker.isDisposed)return;let s=new P1(t);if(s){let n=s.marker.onDispose(()=>s.dispose()),l=s.onDispose(()=>{l.dispose(),s&&(this._decorations.delete(s)&&this._onDecorationRemoved.fire(s),n.dispose())});this._decorations.insert(s),this._onDecorationRegistered.fire(s)}return s}reset(){for(let t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,s,n){let l=0,o=0;for(let d of this._decorations.getKeyIterator(s))l=d.options.x??0,o=l+(d.options.width??1),t>=l&&t<o&&(!n||(d.options.layer??"bottom")===n)&&(yield d)}forEachDecorationAtCell(t,s,n,l){this._decorations.forEachByKey(s,o=>{vf=o.options.x??0,hv=vf+(o.options.width??1),t>=vf&&t<hv&&(!n||(o.options.layer??"bottom")===n)&&l(o)})}},P1=class extends fa{constructor(t){super(),this.options=t,this.onRenderEmitter=this.add(new be),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new be),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Zt.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Zt.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},Z1=1e3,K1=class{constructor(t,s=Z1){this._renderCallback=t,this._debounceThresholdMS=s,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(t,s,n){this._rowCount=n,t=t!==void 0?t:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,t):t,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s;let l=performance.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=l-this._lastRefreshMs,d=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},d)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let t=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(t,s)}},uv=20,pu=class extends tt{constructor(t,s,n,l){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=l,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let d=0;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);if(this._topBoundaryFocusListener=d=>this._handleBoundaryFocus(d,0),this._bottomBoundaryFocusListener=d=>this._handleBoundaryFocus(d,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new K1(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(d=>this._handleResize(d.rows))),this._register(this._terminal.onRender(d=>this._refreshRows(d.start,d.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(d=>this._handleChar(d))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(d=>this._handleTab(d))),this._register(this._terminal.onKey(d=>this._handleKey(d.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(qe(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ft(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(t){for(let s=0;s<t;s++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<uv+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===uv+1&&(this._liveRegion.textContent+=Bf.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,s){this._liveRegionDebouncer.refresh(t,s,this._terminal.rows)}_renderRows(t,s){let n=this._terminal.buffer,l=n.lines.length.toString();for(let o=t;o<=s;o++){let d=n.lines.get(n.ydisp+o),f=[],p=d?.translateToString(!0,void 0,void 0,f)||"",v=(n.ydisp+o+1).toString(),_=this._rowElements[o];_&&(p.length===0?(_.textContent="",this._rowColumns.set(_,[0,1])):(_.textContent=p,this._rowColumns.set(_,f)),_.setAttribute("aria-posinset",v),_.setAttribute("aria-setsize",l),this._alignRowWidth(_))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,s){let n=t.target,l=this._rowElements[s===0?1:this._rowElements.length-2],o=n.getAttribute("aria-posinset"),d=s===0?"1":`${this._terminal.buffer.lines.length}`;if(o===d||t.relatedTarget!==l)return;let f,p;if(s===0?(f=n,p=this._rowElements.pop(),this._rowContainer.removeChild(p)):(f=this._rowElements.shift(),p=n,this._rowContainer.removeChild(f)),f.removeEventListener("focus",this._topBoundaryFocusListener),p.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){let v=this._createAccessibilityTreeNode();this._rowElements.unshift(v),this._rowContainer.insertAdjacentElement("afterbegin",v)}else{let v=this._createAccessibilityTreeNode();this._rowElements.push(v),this._rowContainer.appendChild(v)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let s={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((s.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||s.node===n.node&&s.offset>n.offset)&&([s,n]=[n,s]),s.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(s={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(s.node))return;let l=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(l)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:l,offset:l.textContent?.length??0}),!this._rowContainer.contains(n.node))return;let o=({node:p,offset:v})=>{let _=p instanceof Text?p.parentNode:p,T=parseInt(_?.getAttribute("aria-posinset"),10)-1;if(isNaN(T))return console.warn("row is invalid. Race condition?"),null;let x=this._rowColumns.get(_);if(!x)return console.warn("columns is null. Race condition?"),null;let E=v<x.length?x[v]:x.slice(-1)[0]+1;return E>=this._terminal.cols&&(++T,E=0),{row:T,column:E}},d=o(s),f=o(n);if(!(!d||!f)){if(d.row>f.row||d.row===f.row&&d.column>=f.column)throw new Error("invalid range");this._terminal.select(d.column,d.row,(f.row-d.row)*this._terminal.cols-d.column+f.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t]),this._alignRowWidth(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(t){t.style.transform="";let s=t.getBoundingClientRect().width,n=this._rowColumns.get(t)?.slice(-1)?.[0];if(!n)return;let l=n*this._renderService.dimensions.css.cell.width;t.style.transform=`scaleX(${l/s})`}};pu=Jt([Ee(1,m_),Ee(2,bn),Ee(3,yn)],pu);var p_=class extends tt{constructor(t,s,n,l,o){super(),this._element=t,this._mouseService=s,this._renderService=n,this._bufferService=l,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new be),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new be),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ft(()=>{Xa(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(qe(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(qe(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(qe(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(qe(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(t){this._lastMouseEvent=t;let s=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;let n=t.composedPath();for(let l=0;l<n.length;l++){let o=n[l];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||s.x!==this._lastBufferCell.x||s.y!==this._lastBufferCell.y)&&(this._handleHover(s),this._lastBufferCell=s)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized){this._clearCurrentLink(),this._askForLink(t,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,s){(!this._activeProviderReplies||!s)&&(this._activeProviderReplies?.forEach(l=>{l?.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let n=!1;for(let[l,o]of this._linkProviderService.linkProviders.entries())s?this._activeProviderReplies?.get(l)&&(n=this._checkLinkProviderResult(l,t,n)):o.provideLinks(t.y,d=>{if(this._isMouseOut)return;let f=d?.map(p=>({link:p}));this._activeProviderReplies?.set(l,f),n=this._checkLinkProviderResult(l,t,n),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,s){let n=new Set;for(let l=0;l<s.size;l++){let o=s.get(l);if(o)for(let d=0;d<o.length;d++){let f=o[d],p=f.link.range.start.y<t?0:f.link.range.start.x,v=f.link.range.end.y>t?this._bufferService.cols:f.link.range.end.x;for(let _=p;_<=v;_++){if(n.has(_)){o.splice(d--,1);break}n.add(_)}}}}_checkLinkProviderResult(t,s,n){if(!this._activeProviderReplies)return n;let l=this._activeProviderReplies.get(t),o=!1;for(let d=0;d<t;d++)(!this._activeProviderReplies.has(d)||this._activeProviderReplies.get(d))&&(o=!0);if(!o&&l){let d=l.find(f=>this._linkAtPosition(f.link,s));d&&(n=!0,this._handleNewLink(d))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let d=0;d<this._activeProviderReplies.size;d++){let f=this._activeProviderReplies.get(d)?.find(p=>this._linkAtPosition(p.link,s));if(f){n=!0,this._handleNewLink(f);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._currentLink)return;let s=this._positionFromMouseEvent(t,this._element,this._mouseService);s&&this._mouseDownLink&&W1(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,s){!this._currentLink||!this._lastMouseEvent||(!t||!s||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Xa(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(t){if(!this._lastMouseEvent)return;let s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(t.link,s)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0?!0:t.link.decorations.underline,pointerCursor:t.link.decorations===void 0?!0:t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:n=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:n=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let l=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(l,o),this._lastMouseEvent)){let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._askForLink(d,!1)}})))}_linkHover(t,s,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(n,s.text)}_fireUnderlineEvent(t,s){let n=t.range,l=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-l-1,n.end.x,n.end.y-l-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(t,s,n){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(n,s.text)}_linkAtPosition(t,s){let n=t.range.start.y*this._bufferService.cols+t.range.start.x,l=t.range.end.y*this._bufferService.cols+t.range.end.x,o=s.y*this._bufferService.cols+s.x;return n<=o&&o<=l}_positionFromMouseEvent(t,s,n){let l=n.getCoords(t,s,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,s,n,l,o){return{x1:t,y1:s,x2:n,y2:l,cols:this._bufferService.cols,fg:o}}};p_=Jt([Ee(1,v_),Ee(2,yn),Ee(3,ls),Ee(4,Iv)],p_);function W1(t,s){return t.text===s.text&&t.range.start.x===s.range.start.x&&t.range.start.y===s.range.start.y&&t.range.end.x===s.range.end.x&&t.range.end.y===s.range.end.y}var Y1=class extends U1{constructor(t={}){super(t),this._linkifier=this._register(new Fl),this.browser=ab,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Fl),this._onCursorMove=this._register(new be),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new be),this.onKey=this._onKey.event,this._onRender=this._register(new be),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new be),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new be),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new be),this.onBell=this._onBell.event,this._onFocus=this._register(new be),this._onBlur=this._register(new be),this._onA11yCharEmitter=this._register(new be),this._onA11yTabEmitter=this._register(new be),this._onWillOpen=this._register(new be),this._setup(),this._decorationService=this._instantiationService.createInstance(q1),this._instantiationService.setService(yc,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(zS),this._instantiationService.setService(Iv,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(zf)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(s=>this.refresh(s?.start??0,s?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(s=>this._reportWindowsOptions(s))),this._register(this._inputHandler.onColor(s=>this._handleColorEvent(s))),this._register(Ii.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Ii.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Ii.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Ii.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(s=>this._afterResize(s.cols,s.rows))),this._register(Ft(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(t){if(this._themeService)for(let s of t){let n,l="";switch(s.index){case 256:n="foreground",l="10";break;case 257:n="background",l="11";break;case 258:n="cursor",l="12";break;default:n="ansi",l="4;"+s.index}switch(s.type){case 0:let o=Rt.toColorRGB(n==="ansi"?this._themeService.colors.ansi[s.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${ae.ESC}]${l};${R1(o)}${rb.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(d=>d.ansi[s.index]=ci.toColor(...s.color));else{let d=n;this._themeService.modifyColors(f=>f[d]=ci.toColor(...s.color))}break;case 2:this._themeService.restoreColor(s.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(t){t?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(pu,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(t){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ae.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ae.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let t=this.buffer.ybase+this.buffer.y,s=this.buffer.lines.get(t);if(!s)return;let n=Math.min(this.buffer.x,this.cols-1),l=this._renderService.dimensions.css.cell.height,o=s.getWidth(n),d=this._renderService.dimensions.css.cell.width*o,f=this.buffer.y*this._renderService.dimensions.css.cell.height,p=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=p+"px",this.textarea.style.top=f+"px",this.textarea.style.width=d+"px",this.textarea.style.height=l+"px",this.textarea.style.lineHeight=l+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(qe(this.element,"copy",s=>{this.hasSelection()&&Gy(s,this._selectionService)}));let t=s=>Qy(s,this.textarea,this.coreService,this.optionsService);this._register(qe(this.textarea,"paste",t)),this._register(qe(this.element,"paste",t)),lb?this._register(qe(this.element,"mousedown",s=>{s.button===2&&Sm(s,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(qe(this.element,"contextmenu",s=>{Sm(s,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),A_&&this._register(qe(this.element,"auxclick",s=>{s.button===1&&Rv(s,this.textarea,this.screenElement)}))}_bindKeys(){this._register(qe(this.textarea,"keyup",t=>this._keyUp(t),!0)),this._register(qe(this.textarea,"keydown",t=>this._keyDown(t),!0)),this._register(qe(this.textarea,"keypress",t=>this._keyPress(t),!0)),this._register(qe(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(qe(this.textarea,"compositionupdate",t=>this._compositionHelper.compositionupdate(t))),this._register(qe(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(qe(this.textarea,"input",t=>this._inputEvent(t),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(t){if(!t)throw new Error("Terminal requires a parent element.");if(t.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=t.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),t.appendChild(this.element);let s=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),s.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(qe(this.screenElement,"mousemove",o=>this.updateCursorStyle(o))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),s.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Nf.get()),hb||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(BS,this.textarea,t.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(bn,this._coreBrowserService),this._register(qe(this.textarea,"focus",o=>this._handleTextAreaFocus(o))),this._register(qe(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(s_,this._document,this._helperContainer),this._instantiationService.setService(bu,this._charSizeService),this._themeService=this._instantiationService.createInstance(l_),this._instantiationService.setService(Il,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(du),this._instantiationService.setService(Fv,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(n_,this.rows,this.screenElement)),this._instantiationService.setService(yn,this._renderService),this._register(this._renderService.onRenderedViewportChange(o=>this._onRender.fire(o))),this.onResize(o=>this._renderService.resize(o.cols,o.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(e_,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(r_),this._instantiationService.setService(v_,this._mouseService);let l=this._linkifier.value=this._register(this._instantiationService.createInstance(p_,this.screenElement));this.element.appendChild(s);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Qf,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(o=>{super.scrollLines(o,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(a_,this.element,this.screenElement,l)),this._instantiationService.setService(a0,this._selectionService),this._register(this._selectionService.onRequestScrollLines(o=>this.scrollLines(o.amount,o.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(o=>this._renderService.handleSelectionChanged(o.start,o.end,o.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(o=>{this.textarea.value=o,this.textarea.focus(),this.textarea.select()})),this._register(Ii.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(Jf,this.screenElement)),this._register(qe(this.element,"mousedown",o=>this._selectionService.handleMouseDown(o))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(pu,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",o=>this._handleScreenReaderModeOptionChange(o))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(uu,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",o=>{!this._overviewRulerRenderer&&o&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(uu,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(i_,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let t=this,s=this.element;function n(d){let f=t._mouseService.getMouseReportCoords(d,t.screenElement);if(!f)return!1;let p,v;switch(d.overrideType||d.type){case"mousemove":v=32,d.buttons===void 0?(p=3,d.button!==void 0&&(p=d.button<3?d.button:3)):p=d.buttons&1?0:d.buttons&4?1:d.buttons&2?2:3;break;case"mouseup":v=0,p=d.button<3?d.button:3;break;case"mousedown":v=1,p=d.button<3?d.button:3;break;case"wheel":if(t._customWheelEventHandler&&t._customWheelEventHandler(d)===!1)return!1;let _=d.deltaY;if(_===0||t.coreMouseService.consumeWheelEvent(d,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return!1;v=_<0?0:1,p=4;break;default:return!1}return v===void 0||p===void 0||p>4?!1:t.coreMouseService.triggerMouseEvent({col:f.col,row:f.row,x:f.x,y:f.y,button:p,action:v,ctrl:d.ctrlKey,alt:d.altKey,shift:d.shiftKey})}let l={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:d=>(n(d),d.buttons||(this._document.removeEventListener("mouseup",l.mouseup),l.mousedrag&&this._document.removeEventListener("mousemove",l.mousedrag)),this.cancel(d)),wheel:d=>(n(d),this.cancel(d,!0)),mousedrag:d=>{d.buttons&&n(d)},mousemove:d=>{d.buttons||n(d)}};this._register(this.coreMouseService.onProtocolChange(d=>{d?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(d)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),d&8?l.mousemove||(s.addEventListener("mousemove",o.mousemove),l.mousemove=o.mousemove):(s.removeEventListener("mousemove",l.mousemove),l.mousemove=null),d&16?l.wheel||(s.addEventListener("wheel",o.wheel,{passive:!1}),l.wheel=o.wheel):(s.removeEventListener("wheel",l.wheel),l.wheel=null),d&2?l.mouseup||(l.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",l.mouseup),l.mouseup=null),d&4?l.mousedrag||(l.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",l.mousedrag),l.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(qe(s,"mousedown",d=>{if(d.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(d)))return n(d),l.mouseup&&this._document.addEventListener("mouseup",l.mouseup),l.mousedrag&&this._document.addEventListener("mousemove",l.mousedrag),this.cancel(d)})),this._register(qe(s,"wheel",d=>{if(!l.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(d)===!1)return!1;if(!this.buffer.hasScrollback){if(d.deltaY===0)return!1;if(t.coreMouseService.consumeWheelEvent(d,t._renderService?.dimensions?.device?.cell?.height,t._coreBrowserService?.dpr)===0)return this.cancel(d,!0);let f=ae.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(d.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(f,!0),this.cancel(d,!0)}}},{passive:!1}))}refresh(t,s){this._renderService?.refreshRows(t,s)}updateCursorStyle(t){this._selectionService?.shouldColumnSelect(t)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(t,s){this._viewport?this._viewport.scrollLines(t):super.scrollLines(t,s),this.refresh(0,this.rows-1)}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(t){t&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(t){let s=t-this._bufferService.buffer.ydisp;s!==0&&this.scrollLines(s)}paste(t){Ov(t,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(t){this._customKeyEventHandler=t}attachCustomWheelEventHandler(t){this._customWheelEventHandler=t}registerLinkProvider(t){return this._linkProviderService.registerLinkProvider(t)}registerCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let s=this._characterJoinerService.register(t);return this.refresh(0,this.rows-1),s}deregisterCharacterJoiner(t){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(t)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(t){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+t)}registerDecoration(t){return this._decorationService.registerDecoration(t)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(t,s,n){this._selectionService.setSelection(t,s,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(t,s){this._selectionService?.selectLines(t,s)}_keyDown(t){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;let s=this.browser.isMac&&this.options.macOptionIsMeta&&t.altKey;if(!s&&!this._compositionHelper.keydown(t))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!s&&(t.key==="Dead"||t.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=F1(t,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(t),n.type===3||n.type===2){let l=this.rows-1;return this.scrollLines(n.type===2?-l:l),this.cancel(t,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,t)||(n.cancel&&this.cancel(t,!0),!n.key)||t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&t.key.length===1&&t.key.charCodeAt(0)>=65&&t.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===ae.ETX||n.key===ae.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||t.altKey||t.ctrlKey)return this.cancel(t,!0);this._keyDownHandled=!0}_isThirdLevelShift(t,s){let n=t.isMac&&!this.options.macOptionIsMeta&&s.altKey&&!s.ctrlKey&&!s.metaKey||t.isWindows&&s.altKey&&s.ctrlKey&&!s.metaKey||t.isWindows&&s.getModifierState("AltGraph");return s.type==="keypress"?n:n&&(!s.keyCode||s.keyCode>47)}_keyUp(t){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)&&($1(t)||this.focus(),this.updateCursorStyle(t),this._keyPressHandled=!1)}_keyPress(t){let s;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(t)===!1)return!1;if(this.cancel(t),t.charCode)s=t.charCode;else if(t.which===null||t.which===void 0)s=t.keyCode;else if(t.which!==0&&t.charCode!==0)s=t.which;else return!1;return!s||(t.altKey||t.ctrlKey||t.metaKey)&&!this._isThirdLevelShift(this.browser,t)?!1:(s=String.fromCharCode(s),this._onKey.fire({key:s,domEvent:t}),this._showCursor(),this.coreService.triggerDataEvent(s,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(t){if(t.data&&t.inputType==="insertText"&&(!t.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let s=t.data;return this.coreService.triggerDataEvent(s,!0),this.cancel(t),!0}return!1}resize(t,s){if(t===this.cols&&s===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(t,s)}_afterResize(t,s){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let t=1;t<this.rows;t++)this.buffer.lines.push(this.buffer.getBlankLine(oi));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(ae.ESC+"[I"):this.coreService.triggerDataEvent(ae.ESC+"[O")}_reportWindowsOptions(t){if(this._renderService)switch(t){case 0:let s=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ae.ESC}[4;${n};${s}t`);break;case 1:let l=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ae.ESC}[6;${o};${l}t`);break}}cancel(t,s){if(!(!this.options.cancelEvents&&!s))return t.preventDefault(),t.stopPropagation(),!1}};function $1(t){return t.keyCode===16||t.keyCode===17||t.keyCode===18}var X1=class{constructor(){this._addons=[]}dispose(){for(let t=this._addons.length-1;t>=0;t--)this._addons[t].instance.dispose()}loadAddon(t,s){let n={instance:s,dispose:s.dispose,isDisposed:!1};this._addons.push(n),s.dispose=()=>this._wrappedAddonDispose(n),s.activate(t)}_wrappedAddonDispose(t){if(t.isDisposed)return;let s=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===t){s=n;break}if(s===-1)throw new Error("Could not dispose an addon that has not been loaded");t.isDisposed=!0,t.dispose.apply(t.instance),this._addons.splice(s,1)}},V1=class{constructor(t){this._line=t}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(t,s){if(!(t<0||t>=this._line.length))return s?(this._line.loadCell(t,s),s):this._line.loadCell(t,new er)}translateToString(t,s,n){return this._line.translateToString(t,s,n)}},dv=class{constructor(t,s){this._buffer=t,this.type=s}init(t){return this._buffer=t,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(t){let s=this._buffer.lines.get(t);if(s)return new V1(s)}getNullCell(){return new er}},G1=class extends tt{constructor(t){super(),this._core=t,this._onBufferChange=this._register(new be),this.onBufferChange=this._onBufferChange.event,this._normal=new dv(this._core.buffers.normal,"normal"),this._alternate=new dv(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},Q1=class{constructor(t){this._core=t}registerCsiHandler(t,s){return this._core.registerCsiHandler(t,n=>s(n.toArray()))}addCsiHandler(t,s){return this.registerCsiHandler(t,s)}registerDcsHandler(t,s){return this._core.registerDcsHandler(t,(n,l)=>s(n,l.toArray()))}addDcsHandler(t,s){return this.registerDcsHandler(t,s)}registerEscHandler(t,s){return this._core.registerEscHandler(t,s)}addEscHandler(t,s){return this.registerEscHandler(t,s)}registerOscHandler(t,s){return this._core.registerOscHandler(t,s)}addOscHandler(t,s){return this.registerOscHandler(t,s)}},J1=class{constructor(t){this._core=t}register(t){this._core.unicodeService.register(t)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(t){this._core.unicodeService.activeVersion=t}},ew=["cols","rows"],Fr=0,tw=class extends tt{constructor(t){super(),this._core=this._register(new Y1(t)),this._addonManager=this._register(new X1),this._publicOptions={...this._core.options};let s=l=>this._core.options[l],n=(l,o)=>{this._checkReadonlyOptions(l),this._core.options[l]=o};for(let l in this._core.options){let o={get:s.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this._publicOptions,l,o)}}_checkReadonlyOptions(t){if(ew.includes(t))throw new Error(`Option "${t}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new Q1(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new J1(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new G1(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let t=this._core.coreService.decPrivateModes,s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any";break}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,synchronizedOutputMode:t.synchronizedOutput,wraparoundMode:t.wraparound}}get options(){return this._publicOptions}set options(t){for(let s in t)this._publicOptions[s]=t[s]}blur(){this._core.blur()}focus(){this._core.focus()}input(t,s=!0){this._core.input(t,s)}resize(t,s){this._verifyIntegers(t,s),this._core.resize(t,s)}open(t){this._core.open(t)}attachCustomKeyEventHandler(t){this._core.attachCustomKeyEventHandler(t)}attachCustomWheelEventHandler(t){this._core.attachCustomWheelEventHandler(t)}registerLinkProvider(t){return this._core.registerLinkProvider(t)}registerCharacterJoiner(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)}deregisterCharacterJoiner(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)}registerMarker(t=0){return this._verifyIntegers(t),this._core.registerMarker(t)}registerDecoration(t){return this._checkProposedApi(),this._verifyPositiveIntegers(t.x??0,t.width??0,t.height??0),this._core.registerDecoration(t)}hasSelection(){return this._core.hasSelection()}select(t,s,n){this._verifyIntegers(t,s,n),this._core.select(t,s,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(t,s){this._verifyIntegers(t,s),this._core.selectLines(t,s)}dispose(){super.dispose()}scrollLines(t){this._verifyIntegers(t),this._core.scrollLines(t)}scrollPages(t){this._verifyIntegers(t),this._core.scrollPages(t)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(t){this._verifyIntegers(t),this._core.scrollToLine(t)}clear(){this._core.clear()}write(t,s){this._core.write(t,s)}writeln(t,s){this._core.write(t),this._core.write(`\r
`,s)}paste(t){this._core.paste(t)}refresh(t,s){this._verifyIntegers(t,s),this._core.refresh(t,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(t){this._addonManager.loadAddon(this,t)}static get strings(){return{get promptLabel(){return Nf.get()},set promptLabel(t){Nf.set(t)},get tooMuchOutput(){return Bf.get()},set tooMuchOutput(t){Bf.set(t)}}}_verifyIntegers(...t){for(Fr of t)if(Fr===1/0||isNaN(Fr)||Fr%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...t){for(Fr of t)if(Fr&&(Fr===1/0||isNaN(Fr)||Fr%1!==0||Fr<0))throw new Error("This API only accepts positive integers")}};var iw=2,sw=1,rw=class{activate(t){this._terminal=t}dispose(){}fit(){let t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;let s=this._terminal._core;(this._terminal.rows!==t.rows||this._terminal.cols!==t.cols)&&(s._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let s=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,n=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(n.getPropertyValue("height")),o=Math.max(0,parseInt(n.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),f={top:parseInt(d.getPropertyValue("padding-top")),bottom:parseInt(d.getPropertyValue("padding-bottom")),right:parseInt(d.getPropertyValue("padding-right")),left:parseInt(d.getPropertyValue("padding-left"))},p=f.top+f.bottom,v=f.right+f.left,_=l-p,T=o-v-s;return{cols:Math.max(iw,Math.floor(T/t.css.cell.width)),rows:Math.max(sw,Math.floor(_/t.css.cell.height))}}},bf={exports:{}},yf={exports:{}},Sf={exports:{}},fv;function Cc(){return fv||(fv=1,(function(t){var s=t.exports;const n=24,l=17,o=19,d=128|l,f=128|o,p=24;s.ZMLIB={ZDLE:n,XON:l,XOFF:o,ABORT_SEQUENCE:[p,p,p,p,p],strip_ignored_bytes:function(_){for(var T=_.length-1;T>=0;T--)switch(_[T]){case l:case d:case o:case f:_.splice(T,1);continue}return _},find_subarray:function(_,T){var x=0,E;e:for(;x!==-1;){if(x=_.indexOf(T[0],x),x===-1)break e;for(E=1;E<T.length;E++)if(_[x+E]!==T[E]){x++;continue e}return x}return-1}}})(Sf)),Sf.exports}var wf={exports:{}},Cf={exports:{}},_v;function T_(){return _v||(_v=1,(function(t){var s=t.exports;const n=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102],l={};for(var o=0;o<n.length;o++)l[n[o]]=o;s.ENCODELIB={pack_u16_be:function(f){if(f>65535)throw"Number cannot exceed 16 bits: "+f;return[f>>8,f&255]},pack_u32_le:function(f){var p=f/65536;return[f&255,(f&65535)>>8,p&255,p>>8]},unpack_u16_be:function(f){return(f[0]<<8)+f[1]},unpack_u32_le:function(f){return f[0]+(f[1]<<8)+(f[2]<<16)+f[3]*16777216},octets_to_hex:function(f){for(var p=[],v=0;v<f.length;v++)p.push(n[f[v]>>4],n[f[v]&15]);return p},parse_hex_octets:function(f){for(var p=new Array(f.length/2),v=0;v<p.length;v++)p[v]=(l[f[2*v]]<<4)+l[f[1+2*v]];return p}}})(Cf)),Cf.exports}var xf={exports:{}},pv;function nw(){return pv||(pv=1,(function(t){class s{encode(d){d=unescape(encodeURIComponent(d));for(var f=new Array(d.length),p=0;p<d.length;p++)f[p]=d.charCodeAt(p);return new Uint8Array(f)}}class n{decode(d){return decodeURIComponent(escape(String.fromCharCode.apply(String,d)))}}var l=t.exports;l.Text={Encoder:typeof TextEncoder<"u"?TextEncoder:s,Decoder:typeof TextDecoder<"u"?TextDecoder:n}})(xf)),xf.exports}var Ef={exports:{}},gv;function k_(){return gv||(gv=1,(function(t){var s=t.exports;Object.assign(s,Cc());var n,l;const o=s.ZMLIB.ZDLE;s.ZDLE=class yb{constructor(f){this._config={},f&&this.set_escape_ctrl_chars(!!f.escape_ctrl_chars)}set_escape_ctrl_chars(f){if(typeof f!="boolean")throw"need boolean!";f!==this._config.escape_ctrl_chars&&(this._config.escape_ctrl_chars=f,this._setup_zdle_table())}escapes_ctrl_chars(){return!!this._config.escape_ctrl_chars}encode(f){if(!this._zdle_table)throw"No ZDLE encode table configured!";var p=this._zdle_table,v=this._lastcode,_=new ArrayBuffer(2*f.length),T=new Uint8Array(_),x=this._config.escape_ctrl_chars,E=0;for(n=0;n<f.length;n++){if(l=p[f[n]],!l)throw console.trace(),console.error("bad encode() call:",JSON.stringify(f)),this._lastcode=v,"Invalid octet: "+f[n];v=f[n],l===1||(x||l===2||(v&127)===64)&&(T[E]=o,E++,v^=64),T[E]=v,E++}return this._lastcode=v,f.splice(0),f.push.apply(f,new Uint8Array(_,0,E)),f}static decode(f){for(var p=f.length-1;p>=0;p--)f[p]===o&&f.splice(p,2,f[p+1]-64);return f}static splice(f,p,v){var _=0;p||(p=0);for(var T=p;T<f.length&&_<v;T++)_++,f[T]===o&&T++;if(_===v)return f.length===T-1?void 0:(f.splice(0,p),yb.decode(f.splice(0,T-p)))}_setup_zdle_table(){for(var f=new Array(256),p=0;p<f.length;p++)if(p&96)f[p]=1;else switch(p){case o:case s.ZMLIB.XOFF:case s.ZMLIB.XON:case s.ZMLIB.XOFF|128:case s.ZMLIB.XON|128:f[p]=2;break;case 16:case 144:f[p]=this._config.turbo_escape?1:2;break;case 13:case 141:f[p]=this._config.escape_ctrl_chars?2:this._config.turbo_escape?1:3;break;default:f[p]=this._config.escape_ctrl_chars?2:1}this._zdle_table=f}}})(Ef)),Ef.exports}var Af={exports:{}},Tf={exports:{}},kf={};var mv;function aw(){return mv||(mv=1,(function(t){(function(s){s(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(s){s.version="1.2.2";function n(){for(var P=0,re=new Array(256),de=0;de!=256;++de)P=de,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,re[de]=P;return typeof Int32Array<"u"?new Int32Array(re):re}var l=n();function o(P){var re=0,de=0,pe=0,ie=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(pe=0;pe!=256;++pe)ie[pe]=P[pe];for(pe=0;pe!=256;++pe)for(de=P[pe],re=256+pe;re<4096;re+=256)de=ie[re]=de>>>8^P[de&255];var Y=[];for(pe=1;pe!=16;++pe)Y[pe-1]=typeof Int32Array<"u"?ie.subarray(pe*256,pe*256+256):ie.slice(pe*256,pe*256+256);return Y}var d=o(l),f=d[0],p=d[1],v=d[2],_=d[3],T=d[4],x=d[5],E=d[6],N=d[7],D=d[8],H=d[9],y=d[10],O=d[11],k=d[12],A=d[13],j=d[14];function I(P,re){for(var de=re^-1,pe=0,ie=P.length;pe<ie;)de=de>>>8^l[(de^P.charCodeAt(pe++))&255];return~de}function U(P,re){for(var de=re^-1,pe=P.length-15,ie=0;ie<pe;)de=j[P[ie++]^de&255]^A[P[ie++]^de>>8&255]^k[P[ie++]^de>>16&255]^O[P[ie++]^de>>>24]^y[P[ie++]]^H[P[ie++]]^D[P[ie++]]^N[P[ie++]]^E[P[ie++]]^x[P[ie++]]^T[P[ie++]]^_[P[ie++]]^v[P[ie++]]^p[P[ie++]]^f[P[ie++]]^l[P[ie++]];for(pe+=15;ie<pe;)de=de>>>8^l[(de^P[ie++])&255];return~de}function G(P,re){for(var de=re^-1,pe=0,ie=P.length,Y=0,fe=0;pe<ie;)Y=P.charCodeAt(pe++),Y<128?de=de>>>8^l[(de^Y)&255]:Y<2048?(de=de>>>8^l[(de^(192|Y>>6&31))&255],de=de>>>8^l[(de^(128|Y&63))&255]):Y>=55296&&Y<57344?(Y=(Y&1023)+64,fe=P.charCodeAt(pe++)&1023,de=de>>>8^l[(de^(240|Y>>8&7))&255],de=de>>>8^l[(de^(128|Y>>2&63))&255],de=de>>>8^l[(de^(128|fe>>6&15|(Y&3)<<4))&255],de=de>>>8^l[(de^(128|fe&63))&255]):(de=de>>>8^l[(de^(224|Y>>12&15))&255],de=de>>>8^l[(de^(128|Y>>6&63))&255],de=de>>>8^l[(de^(128|Y&63))&255]);return~de}s.table=l,s.bstr=I,s.buf=U,s.str=G})})(kf)),kf}var Df={exports:{}},vv;function xc(){return vv||(vv=1,(function(t){var s=t.exports;function n(f,p){return this.got=f.slice(0),this.expected=p.slice(0),"CRC check failed! (got: "+f.join()+"; expected: "+p.join()+")"}function l(f){return f}const o={aborted:"Session aborted",peer_aborted:"Peer aborted session",already_aborted:"Session already aborted",crc:n,validation:l};function d(f){const p=o[f];switch(typeof p){case"string":return p;case"function":var v=[].slice.call(arguments).slice(1);return p.apply(this,v)}return null}s.Error=class extends Error{constructor(p){super();var v=d.apply(this,arguments);v?(this.type=p,this.message=v):this.message=p}}})(Df)),Df.exports}var bv;function Sb(){return bv||(bv=1,(function(t){const s=aw();var n=t.exports;Object.assign(n,xc(),T_());var l;const o=16,d=4129,f=65535,p=1<<o-1;function v(){l=new Array(256);for(var x=o-8,E=0;E<256;E++){for(var N=E<<x&f,D=0;D<8;D++)(N&p)!==0?(N<<=1,N^=d):N<<=1;l[E]=N&f}}function _(x,E){return l||v(),l[E>>8&255]^(255&E)<<8^x}function T(x,E){if(x.join()!==E.join())throw new n.Error("crc",E,x)}n.CRC={crc16:function(E){for(var N=E[0],D=1;D<E.length;D++)N=_(E[D],N);return N=_(0,_(0,N)),n.ENCODELIB.pack_u16_be(N)},crc32:function(E){return n.ENCODELIB.pack_u32_le(s.buf(E)>>>0)},verify16:function(E,N){return T(this.crc16(E),N)},verify32:function(E,N){try{T(this.crc32(E),N)}catch(D){throw D.input=E.slice(0),D}}}})(Tf)),Tf.exports}var yv;function lw(){return yv||(yv=1,(function(t){var s=t.exports;Object.assign(s,T_(),k_(),Cc(),Sb(),xc());const n=42,l=65,o=66,d=67,f=[13,10],p=f.slice(0).concat([s.ZMLIB.XON]),v=[n,n,s.ZMLIB.ZDLE,o],_=[n,s.ZMLIB.ZDLE,l],T=[n,s.ZMLIB.ZDLE,d];s.Header=class{static trim_leading_garbage(ce){var W=[],De,ze;e:for(;ce.length&&!ze;){var ot=ce.indexOf(n);if(ot===-1){De=!0;break e}else{if(W.push.apply(W,ce.splice(0,ot)),ce.length<2)break e;if(ce[1]===n)if(ce.length<v.length){if(ce.join()===v.slice(0,ce.length).join())break e}else ce[2]===v[2]&&ce[3]===v[3]&&(ze=ye);else if(ce[1]===s.ZMLIB.ZDLE){if(ce.length<_.length)break e;ce[2]===_[2]?ze=_e:ce[2]===T[2]&&(ze=we)}ze||W.push(ce.shift())}}return De&&W.push.apply(W,ce.splice(0)),W}static parse(ce){var W;if(ce[1]===n)return W=ye(ce),W&&[W,16];if(ce[2]===l)return W=_e(ce),W&&[W,16];if(ce[2]===d)return W=we(ce),W&&[W,32];if(!(ce.length<3))throw"Unrecognized/unsupported octets: "+ce.join()}static build(ce){var W=arguments.length===1?[arguments[0]]:Array.apply(null,arguments),De=X[ce];if(!De)throw"No frame class "+ce+" is defined!";W.shift();var ze=new(De.bind.apply(De,[null].concat(W)));return ze}to_hex(){var ce=this._crc_bytes();return v.concat(s.ENCODELIB.octets_to_hex(ce.concat(s.CRC.crc16(ce))),this._hex_header_ending)}to_binary16(ce){return this._to_binary(ce,_,s.CRC.crc16)}to_binary32(ce){return this._to_binary(ce,T,s.CRC.crc32)}constructor(){this._bytes4||(this._bytes4=[0,0,0,0])}_to_binary(ce,W,De){var ze=this._crc_bytes(),ot=W.concat(ce.encode(ze.concat(De(ze))));return ot}_crc_bytes(){return[this.TYPENUM].concat(this._bytes4)}},s.Header.prototype._hex_header_ending=p;class x extends s.Header{}const E={CANFDX:1,CANOVIO:2,CANBRK:4,CANCRY:8,CANLZW:16,CANFC32:32,ESCCTL:64,ESC8:128};function N(oe){if(!E[oe])throw new s.Error("Invalid ZRINIT flag: "+oe);return E[oe]}class D extends s.Header{constructor(ce,W){super();var De=0;W||(W=0),ce.forEach(function(ze){De|=N(ze)}),this._bytes4=[W&255,W>>8,0,De]}get_buffer_size(){return s.ENCODELIB.unpack_u16_be(this._bytes4.slice(0,2))||void 0}can_full_duplex(){return!!(this._bytes4[3]&E.CANFDX)}can_overlap_io(){return!!(this._bytes4[3]&E.CANOVIO)}can_break(){return!!(this._bytes4[3]&E.CANBRK)}can_fcs_32(){return!!(this._bytes4[3]&E.CANFC32)}escape_ctrl_chars(){return!!(this._bytes4[3]&E.ESCCTL)}escape_8th_bit(){return!!(this._bytes4[3]&E.ESC8)}}const H={ESCCTL:64,ESC8:128};function y(oe){if(!H[oe])throw"Invalid ZSINIT flag: "+oe;return H[oe]}class O extends s.Header{constructor(ce,W){super();var De=0;if(ce.forEach(function(ze){De|=y(ze)}),this._bytes4=[0,0,0,De],W){if(W.length>31)throw"Attn sequence must be <= 31 bytes";if(W.some(function(ze){return ze>255}))throw"Attn sequence ("+W+") must be <256";this._data=W.concat([0])}}escape_ctrl_chars(){return!!(this._bytes4[3]&H.ESCCTL)}escape_8th_bit(){return!!(this._bytes4[3]&H.ESC8)}}class k extends s.Header{constructor(ce){super(),ce&&(this._bytes4=ce.slice())}}k.prototype._hex_header_ending=f;const A={extended:{sparse:64},transport:[void 0,"compress","encrypt","rle"],management:[void 0,"newer_or_longer","crc","append","clobber","newer","mtime_or_length","protect","rename"],conversion:[void 0,"binary","text","resume"]},j=["extended","transport","management","conversion"],I=128,U=31,G=64;class P extends s.Header{get_options(){var ce={sparse:!!(this._bytes4[0]&G)},W=this._bytes4.slice(0);return j.forEach(function(De,ze){if(A[De]instanceof Array)De==="management"&&(ce.skip_if_absent=!!(W[ze]&I),W[ze]&=U),ce[De]=A[De][W[ze]];else for(var ot in A[De])ce[ot]=!!(W[ze]&A[De][ot]),ce[ot]&&(W[ze]^=A[De][ot]);!ce[De]&&W[ze]&&(ce[De]="unknown:"+W[ze])}),ce}}class re extends s.Header{}class de extends s.Header{}class pe extends s.Header{}class ie extends s.Header{}pe.prototype._hex_header_ending=f;class Y extends s.Header{constructor(ce){super(),this._bytes4=s.ENCODELIB.pack_u32_le(ce)}get_offset(){return s.ENCODELIB.unpack_u32_le(this._bytes4)}}class fe extends Y{}class me extends Y{}class L extends Y{}const J=[[x,"ZRQINIT"],[D,"ZRINIT"],[O,"ZSINIT"],[k,"ZACK"],[P,"ZFILE"],[re,"ZSKIP"],void 0,[de,"ZABORT"],[pe,"ZFIN"],[fe,"ZRPOS"],[me,"ZDATA"],[L,"ZEOF"],[ie,"ZFERR"],void 0,void 0,void 0,void 0,void 0,void 0,void 0];for(var X={},Se=0;Se<J.length;Se++)J[Se]&&(X[J[Se][1]]=J[Se][0],Object.assign(J[Se][0].prototype,{TYPENUM:Se,NAME:J[Se][1]}));const Te=[x,D,O,k,P,re,"ZNAK",de,pe,fe,me,L,ie,"ZCRC","ZCHALLENGE","ZCOMPL","ZCAN","ZFREECNT","ZCOMMAND","ZSTDERR"];function C(oe){var ce=Te[oe];if(typeof ce=="string")throw"Received unsupported header: "+ce;return V(ce)}function V(oe){return oe.prototype instanceof Y?new oe(0):new oe([])}function _e(oe){var ce=s.ZDLE.splice(oe,_.length,7);return ce&&le(ce)}function le(oe){s.CRC.verify16(oe.slice(0,5),oe.slice(5));var ce=oe[0],W=C(ce);return W._bytes4=oe.slice(1,5),W}function we(oe){var ce=s.ZDLE.splice(oe,T.length,9);if(ce){s.CRC.verify32(ce.slice(0,5),ce.slice(5));var W=ce[0],De=C(W);return De._bytes4=ce.slice(1,5),De}}function ye(oe){var ce=oe.indexOf(138);ce===-1&&(ce=oe.indexOf(10));var W,De;if(ce===-1){oe.length>11&&(W="Invalid hex header - no LF detected within 12 bytes!");return}else if(De=oe.splice(0,ce),oe.shift(),De.length===19){var ze=De.pop();ze!==13&&ze!==141&&(W="Invalid hex header: (CR/)LF doesnt have CR!")}else De.length!==18&&(W="Invalid hex header: invalid number of bytes before LF!");if(W)throw W+=" ("+De.length+" bytes: "+De.join()+")",W;De.splice(0,4);var ot=s.ENCODELIB.parse_hex_octets(De);return le(ot)}s.Header.parse_hex=ye})(Af)),Af.exports}var Mf={exports:{}},Sv;function ow(){return Sv||(Sv=1,(function(t){var s=t.exports;Object.assign(s,Sb(),k_(),Cc(),xc());const n=104,l=105,o=106,d=107;var f;s.Subpacket=class g_{static build(D,H){var y=f[H];if(!y)throw"No subpacket type "+H+" is defined! Try one of: "+Object.keys(f).join(", ");return new y(D)}encode16(D){return this._encode(D,s.CRC.crc16)}encode32(D){return this._encode(D,s.CRC.crc32)}get_payload(){return this._payload}static parse16(D){return g_._parse(D,2)}static parse32(D){return g_._parse(D,4)}constructor(D){this._payload=D}_encode(D,H){return D.encode(this._payload.slice(0)).concat([s.ZMLIB.ZDLE,this._frameend_num],D.encode(H(this._payload.concat(this._frameend_num))))}static _parse(D,H){for(var y,O,k={104:_,105:x,106:E,107:T},A=0;A<D.length;){if(A=D.indexOf(s.ZMLIB.ZDLE,A),A===-1)return;var j=D[A+1];if(O=k[j],O){y=A+1;break}A++}if(O){var I=D[y];if(D[y-1]!==s.ZMLIB.ZDLE)throw"Byte before frame end should be ZDLE, not "+D[y-1];var U=D.splice(0,y-1),G=s.ZDLE.splice(D,2,H);if(!G){D.unshift.apply(D,U);return}var P=s.ZDLE.decode(U);return s.CRC[H===2?"verify16":"verify32"](P.concat([I]),G),new O(P,G)}}};class p extends s.Subpacket{frame_end(){return!0}}class v extends s.Subpacket{frame_end(){return!1}}class _ extends p{ack_expected(){return!1}}_.prototype._frameend_num=n;class T extends p{ack_expected(){return!0}}T.prototype._frameend_num=d;class x extends v{ack_expected(){return!1}}x.prototype._frameend_num=l;class E extends v{ack_expected(){return!0}}E.prototype._frameend_num=o,f={end_no_ack:_,end_ack:T,no_end_no_ack:x,no_end_ack:E}})(Mf)),Mf.exports}var Of={exports:{}},wv;function cw(){return wv||(wv=1,(function(t){var s=t.exports;Object.assign(s,xc());const n=/\*\x18[AC]|\*\*\x18B/;function l(o,d){if(d<0)throw new s.Error("validation",""+o+" ("+d+") must be nonnegative.");if(d!==Math.floor(d))throw new s.Error("validation",""+o+" ("+d+") must be an integer.")}s.Validation={offer_parameters:function(d){if(!d.name)throw new s.Error("validation","Need name!");if(typeof d.name!="string")throw new s.Error("validation","name ("+d.name+") must be a string!");if(d=Object.assign({},d),n.test(d.name)&&console.warn("The filename "+JSON.stringify(name)+" contains characters that look like a ZMODEM header. This could corrupt the ZMODEM session; consider renaming it so that the filename doesnt contain control characters."),d.serial!==null&&d.serial!==void 0)throw new s.Error("validation","serial is meaningless.");if(d.serial=null,["size","mode","files_remaining","bytes_remaining"].forEach(function(v){var _;switch(typeof d[v]){case"object":_=d[v]===null;break;case"undefined":d[v]=null,_=!0;break;case"number":l(v,d[v]),_=!0;break}if(!_)throw new s.Error("validation",""+v+" ("+d[v]+") must be null, undefined, or a number.")}),typeof d.mode=="number"&&(d.mode|=32768),d.files_remaining===0)throw new s.Error("validation","files_remaining, if given, must be positive.");var f;switch(typeof d.mtime){case"object":if(f=!0,d.mtime instanceof Date){var p=d.mtime;if(d.mtime=Math.floor(p.getTime()/1e3),d.mtime<0)throw new s.Error("validation","mtime ("+p+") must not be earlier than 1970.")}else d.mtime!==null&&(f=!1);break;case"undefined":d.mtime=null,f=!0;break;case"number":l("mtime",d.mtime),f=!0;break}if(!f)throw new s.Error("validation","mtime ("+d.mtime+") must be null, undefined, a Date, or a number.");return d}}})(Of)),Of.exports}var Cv;function hw(){return Cv||(Cv=1,(function(t){var s=t.exports;s.DEBUG=!1,Object.assign(s,T_(),nw(),k_(),Cc(),lw(),ow(),cw(),xc());const n=5e3,l=["CANFDX","CANOVIO","CANFC32"],o="spool_uint8array",d=8192,f=8,p=[79,79],v=s.ZMLIB.ABORT_SEQUENCE;class _{constructor(){this._on_evt={},this._evt_once_index={}}_Add_event(y){this._on_evt[y]=[],this._evt_once_index[y]=[]}_get_evt_queue(y){if(!this._on_evt[y])throw"Bad event: "+y;return this._on_evt[y]}on(y,O){var k=this._get_evt_queue(y);return k.push(O),this}off(y,O){var k=this._get_evt_queue(y);if(O){var A=k.indexOf(O);if(A===-1)throw""+O+" is not in the "+y+" queue.";k.splice(A,1)}else k.pop();return this}_Happen(y){var O=this._get_evt_queue(y),k=Array.apply(null,arguments);k.shift();var A=this;return O.forEach(function(j){j.apply(A,k)}),O.length}}s.Session=class extends _{static parse(y){var O;try{O=s.Header.parse_hex(y)}catch{return}if(O)switch(O.NAME){case"ZRQINIT":return new s.Session.Receive;case"ZRINIT":return new s.Session.Send(O)}}set_sender(y){return this._sender=y,this}has_ended(){return this._has_ended()}consume(y){if(this._before_consume(y),this._aborted)throw new s.Error("already_aborted");y.length&&(this._strip_and_enqueue_input(y),this._check_for_abort_sequence(y)||this._consume_first())}aborted(){return!!this._aborted}constructor(){super(),this._config={},this._input_buffer=[],this._Add_event("receive"),this._Add_event("garbage"),this._Add_event("session_end")}get_role(){return this.type}_trim_leading_garbage_until_header(){var y=s.Header.trim_leading_garbage(this._input_buffer);y.length&&this._Happen("garbage",y)===0&&console.debug("Garbage: ",String.fromCharCode.apply(String,y),y)}_parse_and_consume_header(){this._trim_leading_garbage_until_header();var y=s.Header.parse(this._input_buffer);if(y)return s.DEBUG&&this._log_header("RECEIVED HEADER",y[0]),this._consume_header(y[0]),this._last_header_name=y[0].NAME,this._last_header_crc=y[1],y[0]}_log_header(y,O){console.debug(this.type,y,O.NAME,O._bytes4.join())}_consume_header(y){this._on_receive(y);var O=this._next_header_handler&&this._next_header_handler[y.NAME];if(!O)throw console.error("Unhandled header!",y,this._next_header_handler),new s.Error("Unhandled header: "+y.NAME);this._next_header_handler=null,O.call(this,y)}_check_for_abort_sequence(){var y=s.ZMLIB.find_subarray(this._input_buffer,v);if(y!==-1)throw this._input_buffer.splice(0,y+v.length),this._aborted=!0,this._on_session_end(),new s.Error("peer_aborted")}_send_header(y){if(!this._sender)throw"Need sender!";var O=Array.apply(null,arguments),k=this._create_header_bytes(O);s.DEBUG&&this._log_header("SENDING HEADER",k[1]),this._sender(k[0]),this._last_sent_header=k[1]}_create_header_bytes(y){var O=s.Header.build.apply(s.Header,y),k=this._get_header_formatter(y[0]);return[O[k](this._zencoder),O]}_strip_and_enqueue_input(y){s.ZMLIB.strip_ignored_bytes(y),this._input_buffer.push.apply(this._input_buffer,y)}abort(){this._sender(v.concat([f,f,f,f,f])),this._aborted=!0,this._sender=function(){throw new s.Error("already_aborted")},this._on_session_end()}_on_session_end(){this._Happen("session_end")}_on_receive(y){this._Happen("receive",y)}_before_consume(){}};function T(H){return s.ZMLIB.find_subarray(H,p)===0?H.splice(0,p.length):H[0]===p[p.length-1]&&H.splice(0,1),H}s.Session.Receive=class extends s.Session{constructor(){super(),this._Add_event("offer"),this._Add_event("data_in"),this._Add_event("file_end")}_before_consume(y){if(this._bytes_after_OO)throw"PROTOCOL: Session is completed!";this._bytes_being_consumed=y}get_trailing_bytes(){if(this._aborted)return[];if(!this._bytes_after_OO)throw"PROTOCOL: Session is not completed!";return this._bytes_after_OO.slice(0)}_has_ended(){return this.aborted()||!!this._bytes_after_OO}_get_header_formatter(){return"to_hex"}_parse_and_consume_subpacket(){var y;this._last_header_crc===16?y="parse16":y="parse32";var O=s.Subpacket[y](this._input_buffer);return O&&(s.DEBUG&&console.debug(this.type,"RECEIVED SUBPACKET",O),this._consume_data(O),O.frame_end()&&(this._next_subpacket_handler=null)),O}_consume_first(){if(this._got_ZFIN){if(this._input_buffer.length<2)return;if(s.ZMLIB.find_subarray(this._input_buffer,p)===0){this._bytes_after_OO=T(this._bytes_being_consumed.slice(0)),this._on_session_end();return}else throw"PROTOCOL: Only thing after ZFIN should be OO (79,79), not: "+this._input_buffer.join()}var y;do this._next_subpacket_handler?y=this._parse_and_consume_subpacket():y=this._parse_and_consume_header();while(y&&this._input_buffer.length)}_consume_data(y){if(this._on_receive(y),!this._next_subpacket_handler)throw"PROTOCOL: Received unexpected data packet after "+this._last_header_name+" header: "+y.get_payload().join();this._next_subpacket_handler.call(this,y)}_octets_to_string(y){return this._textdecoder||(this._textdecoder=new s.Text.Decoder),this._textdecoder.decode(new Uint8Array(y))}_consume_ZFILE_data(y,O){if(this._file_info)throw"PROTOCOL: second ZFILE data subpacket received";var k=O.get_payload(),A=k.indexOf(0),j=this._octets_to_string(k.slice(0,A)),I=this._octets_to_string(k.slice(1+A)).split(" "),U=I[1]&&parseInt(I[1],8)||void 0;U&&(U=new Date(U*1e3)),this._file_info={name:j,size:I[0]?parseInt(I[0],10):null,mtime:U||null,mode:I[2]&&parseInt(I[2],8)||null,serial:I[3]&&parseInt(I[3],10)||null,files_remaining:I[4]?parseInt(I[4],10):null,bytes_remaining:I[5]?parseInt(I[5],10):null};var G=new N(y.get_options(),this._file_info,this._accept.bind(this),this._skip.bind(this));this._current_transfer=G}_consume_ZDATA_data(y){if(!this._accepted_offer)throw"PROTOCOL: Received data without accepting!";if(!this._offset_ok){console.warn("offset not ok!"),_send_ZRPOS();return}this._file_offset+=y.get_payload().length,this._on_data_in(y),y.ack_expected()&&!y.frame_end()&&this._send_header("ZACK",s.ENCODELIB.pack_u32_le(this._file_offset))}_make_promise_for_between_files(){var y=this;return new Promise(function(O){var k={ZFILE:function(A){this._next_subpacket_handler=function(j){this._next_subpacket_handler=null,this._consume_ZFILE_data(A,j),this._Happen("offer",this._current_transfer),O(this._current_transfer)}},ZSINIT:function(A){y._next_subpacket_handler=function(j){y._next_subpacket_handler=null,y._consume_ZSINIT_data(j),y._send_header("ZACK"),y._next_header_handler=k}},ZFIN:function(){this._consume_ZFIN(),O()}};y._next_header_handler=k})}_consume_ZSINIT_data(y){this._attn=y.get_payload()}start(){if(this._started)throw"Already started!";this._started=!0;var y=this._make_promise_for_between_files();return this._send_ZRINIT(),y}_accept(y){this._accepted_offer=!0,this._file_offset=y||0;var O=this,k=new Promise(function(A){O._next_header_handler={ZDATA:function(I){this._consume_ZDATA(I),this._next_subpacket_handler=this._consume_ZDATA_data,this._next_header_handler={ZEOF:function(G){this._consume_ZEOF(G),this._next_subpacket_handler=null,this._make_promise_for_between_files(),A(),this._send_ZRINIT()}}}}});return this._send_ZRPOS(),k}_skip(){var y=this._make_promise_for_between_files();if(this._accepted_offer){if(!this._current_transfer)return;var O=(function(){this._accepted_offer=!1,this._next_subpacket_handler=null,this._make_promise_for_between_files()}).bind(this);Object.assign(this._next_header_handler,{ZEOF:O,ZDATA:(function(){O(),this._next_header_handler.ZEOF=O}).bind(this)})}return this._file_info=null,this._send_header("ZSKIP"),y}_send_ZRINIT(){this._send_header("ZRINIT",l)}_consume_ZFIN(){this._got_ZFIN=!0,this._send_header("ZFIN")}_consume_ZEOF(y){if(this._file_offset!==y.get_offset())throw"ZEOF offset mismatch; unimplemented (local: "+this._file_offset+"; ZEOF: "+y.get_offset()+")";this._on_file_end(),this._file_info=null,this._current_transfer=null}_consume_ZDATA(y){if(this._file_offset===y.get_offset())this._offset_ok=!0;else throw"Error correction is unimplemented."}_send_ZRPOS(){this._send_header("ZRPOS",this._file_offset)}_on_file_end(){this._Happen("file_end"),this._current_transfer&&(this._current_transfer._Happen("complete"),this._current_transfer=null)}_on_data_in(y){this._Happen("data_in",y),this._current_transfer&&this._current_transfer._Happen("input",y.get_payload())}},Object.assign(s.Session.Receive.prototype,{type:"receive"});var x={get_details:function(){return Object.assign({},this._file_info)},get_options:function(){return Object.assign({},this._zfile_opts)},get_offset:function(){return this._file_offset}};class E{constructor(y,O,k,A){this._file_info=y,this._file_offset=O||0,this._send=k,this._end=A}send(y){this._send(y),this._file_offset+=y.length}end(y){var O=this._end(y||[]);return y&&(this._file_offset+=y.length),O}}Object.assign(E.prototype,x);class N extends _{constructor(y,O,k,A){super(),this._zfile_opts=y,this._file_info=O,this._accept_func=k,this._skip_func=A,this._Add_event("input"),this._Add_event("complete"),this.on("input",this._input_handler)}_verify_not_skipped(){if(this._skipped)throw new s.Error("Already skipped!")}skip(){return this._verify_not_skipped(),this._skipped=!0,this._skip_func.apply(this,arguments)}accept(y){if(this._verify_not_skipped(),this._accepted)throw new s.Error("Already accepted!");switch(this._accepted=!0,y||(y={}),this._file_offset=y.offset||0,y.on_input){case null:case void 0:case"spool_array":case o:this._spool=[];break;default:if(typeof y.on_input!="function")throw"Invalid on_input: "+y.on_input}return this._input_handler_mode=y.on_input||o,this._accept_func(this._file_offset).then(this._get_spool.bind(this))}_input_handler(y){if(this._file_offset+=y.length,typeof this._input_handler_mode=="function")this._input_handler_mode(y);else{if(this._input_handler_mode===o)y=new Uint8Array(y);else if(this._input_handler_mode!=="spool_array")throw new s.Error("WTF?? _input_handler_mode = "+this._input_handler_mode);this._spool.push(y)}}_get_spool(){return this._spool}}Object.assign(N.prototype,x);const D={ZFILE:!0,ZDATA:!0};s.Session.Send=class extends s.Session{constructor(y){if(super(),y){if(y.NAME!=="ZRINIT")throw"First header should be ZRINIT, not "+y.NAME}else throw"Need first header!";this._last_header_name="ZRINIT",this._subpacket_encode_func="encode16",this._zencoder=new s.ZDLE,this._consume_ZRINIT(y),this._file_offset=0,this._start_keepalive_on_set_sender=!0}set_sender(y){return super.set_sender(y),this._start_keepalive_on_set_sender&&(this._start_keepalive_on_set_sender=!1,this._start_keepalive()),this}_get_header_formatter(y){return D[y]?"to_binary16":"to_hex"}_start_keepalive(){if(!this._keepalive_promise){var y=this;this._keepalive_promise=new Promise(function(O){y._keepalive_timeout=setTimeout(O,n)}).then(function(){y._next_header_handler={ZACK:function(){y._got_ZSINIT_ZACK=!0}},y._send_ZSINIT(),y._keepalive_promise=null,y._start_keepalive()})}}_stop_keepalive(){this._keepalive_promise&&(clearTimeout(this._keepalive_timeout),this._keep_alive_promise=null)}_send_ZSINIT(){var y=[];this._zencoder.escapes_ctrl_chars()&&y.push("ESCCTL"),this._send_header_and_data(["ZSINIT",y],[0],"end_ack")}_consume_ZRINIT(y){if(this._last_ZRINIT=y,y.get_buffer_size())throw"Buffer size ("+y.get_buffer_size()+") is unsupported!";if(!y.can_full_duplex())throw"Half-duplex I/O is unsupported!";if(!y.can_overlap_io())throw"Non-overlap I/O is unsupported!";if(y.escape_8th_bit())throw"8-bit escaping is unsupported!";this._zencoder.set_escape_ctrl_chars(!0),y.escape_ctrl_chars()||console.debug("Peer didnt request escape of all control characters. Will send ZSINIT to force recognition of escaped control characters.")}_ensure_receiver_escapes_ctrl_chars(){var y,O=!this._last_ZRINIT.escape_ctrl_chars()&&!this._got_ZSINIT_ZACK;if(O){var k=this;y=new Promise(function(A){k._next_header_handler={ZACK:j=>{A()}},k._send_ZSINIT()})}else y=Promise.resolve();return y}_convert_params_to_offer_payload_array(y){y=s.Validation.offer_parameters(y);var O=y.name+"\0",k=[(y.size||0).toString(10),y.mtime?y.mtime.toString(8):"0",y.mode?(32768|y.mode).toString(8):"0","0"];return y.files_remaining&&(k.push(y.files_remaining),y.bytes_remaining&&k.push(y.bytes_remaining)),O+=k.join(" "),this._string_to_octets(O)}send_offer(y){if(s.DEBUG&&console.debug("SENDING OFFER",y),!y)throw"need file params!";if(this._sending_file)throw"Already sending file!";var O=this._convert_params_to_offer_payload_array(y);this._stop_keepalive();var k=this;function A(){k._next_header_handler={ZRPOS:function(I){s.DEBUG&&console.warn("Mid-transfer ZRPOS  implementation error?"),A()}}}var j=function(){var I=new Promise(function(U){k._next_header_handler={ZSKIP:function(){k._start_keepalive(),U()},ZRPOS:function(G){k._sending_file=!0,A(),U(new E(y,G.get_offset(),k._send_interim_file_piece.bind(k),k._end_file.bind(k)))}}});return k._send_header_and_data(["ZFILE"],O,"end_ack"),delete k._sent_ZDATA,I};return this._ensure_receiver_escapes_ctrl_chars().then(j)}_send_header_and_data(y,O,k){var A=this._create_header_bytes(y),j=this._build_subpacket_bytes(O,k);A[0].push.apply(A[0],j),s.DEBUG&&(this._log_header("SENDING HEADER",A[1]),console.debug(this.type,"-- HEADER PAYLOAD:",k,j.length)),this._sender(A[0]),this._last_sent_header=A[1]}_build_subpacket_bytes(y,O){var k=s.Subpacket.build(y,O);return k[this._subpacket_encode_func](this._zencoder)}_build_and_send_subpacket(y,O){this._sender(this._build_subpacket_bytes(y,O))}_string_to_octets(y){this._textencoder||(this._textencoder=new s.Text.Encoder);var O=this._textencoder.encode(y);return Array.prototype.slice.call(O)}_send_interim_file_piece(y){return this._send_file_part(y,"no_end_no_ack"),Promise.resolve()}_ensure_we_are_sending(){if(!this._sending_file)throw"Not sending a file currently!"}_end_file(y){this._ensure_we_are_sending(),this._send_file_part(y,"end_no_ack");var O=this,k=new Promise(function(A){O._sending_file=!1,O._prepare_to_receive_ZRINIT(A)});return this._send_header("ZEOF",this._file_offset),this._file_offset=0,k}_prepare_to_receive_ZRINIT(y){this._next_header_handler={ZRINIT:function(O){this._consume_ZRINIT(O),y&&y()}}}close(){var y=this._last_header_name==="ZRINIT";if(y||(y=this._last_header_name==="ZSKIP"),y||(y=this._last_sent_header.name==="ZSINIT"&&this._last_header_name==="ZACK"),!y)throw"Cant close; last received header was "+this._last_header_name+"";var O=this,k=new Promise(function(A,j){O._next_header_handler={ZFIN:function(){O._sender(p),O._sent_OO=!0,O._on_session_end(),A()}}});return this._send_header("ZFIN"),k}_has_ended(){return this.aborted()||!!this._sent_OO}_send_file_part(y,O){this._sent_ZDATA||(this._send_header("ZDATA",this._file_offset),this._sent_ZDATA=!0);for(var k=0,A=y.length;;){var j=Math.min(k+d,A)-k,I=j+k>=A,U=y.slice(k,k+j);if(U instanceof Array||(U=Array.prototype.slice.call(U)),this._build_and_send_subpacket(U,I?O:"no_end_no_ack"),this._file_offset+=j,k+=j,k>=A)break}}_consume_first(){if(!this._parse_and_consume_header()&&this._input_buffer.join()==="67")throw"Receiver has fallen back to YMODEM."}_on_session_end(){this._stop_keepalive(),super._on_session_end()}},Object.assign(s.Session.Send.prototype,{type:"send"})})(wf)),wf.exports}var xv;function uw(){return xv||(xv=1,(function(t){var s=t.exports;Object.assign(s,Cc(),hw());const n=21,l=[42,42,24,66,48],o=["to_terminal","on_detect","on_retract","sender"];class d{constructor(p,v,_,T){this._confirmer=v,this._denier=_,this._is_valid=T,this._session_type=p}confirm(){return this._confirmer.apply(this,arguments)}deny(){return this._denier.apply(this,arguments)}is_valid(){return this._is_valid.apply(this,arguments)}get_session_role(){return this._session_type}}s.Sentry=class{constructor(p){if(!p)throw"Need options!";var v=this;o.forEach(function(_){if(!p[_])throw"Need "+_+"!";v["_"+_]=p[_]}),this._cache=[]}_after_session_end(){this._zsession=null}consume(p){if(p instanceof Array||(p=Array.prototype.slice.call(new Uint8Array(p))),this._zsession){var v=this._zsession;if(v.consume(p),v.has_ended())v.type==="receive"?p=v.get_trailing_bytes():p=[];else return}var _=this._parse(p),T=p;if(_){let y=function(){return x._parsed_session===_},O=function(){if(!this.is_valid())throw"Stale ZMODEM session!";return _.on("garbage",x._to_terminal),_.on("session_end",x._after_session_end.bind(x)),_.set_sender(x._sender),delete x._parsed_session,x._zsession=_};var N=y,D=O;this._parsed_session&&(this._parsed_session.type===_.type&&(T=[]),this._on_retract()),this._parsed_session=_;var x=this;this._on_detect(new d(_.type,O,this._send_abort.bind(this),y))}else{var E=this._parsed_session;this._parsed_session=null,E&&(T.length===1&&T[0]===67&&this._send_abort(),this._on_retract())}this._to_terminal(T)}get_confirmed_session(){return this._zsession||null}_send_abort(){this._sender(s.ZMLIB.ABORT_SEQUENCE)}_parse(p){var v=this._cache;for(v.push.apply(v,p);;){let _=s.ZMLIB.find_subarray(v,l);if(_===-1)break;v.splice(0,_);let T;try{T=s.Session.parse(v)}catch{}if(!T)break;return v.length===1&&v[0]===s.ZMLIB.XON&&v.shift(),v.length?null:T}return v.splice(n),null}}})(yf)),yf.exports}var Ev;function dw(){return Ev||(Ev=1,(function(t){Object.assign(t.exports,uw())})(bf)),bf.exports}var Av=dw();const fw=({connected:t,onData:s,onClear:n,lang:l})=>{const o=Fe.useRef(null),d=Fe.useRef(null),f=Fe.useRef(null),p=Fe.useRef(null),v=Fe.useRef(s),_=mu[l];Fe.useEffect(()=>{v.current=s},[s]);const T=async E=>{console.log("ZMODEM Send Session started (receiving file from device)"),E.on("offer",N=>{const D=N;D.accept().then(H=>{const y=new Blob(H,{type:"application/octet-stream"}),O=URL.createObjectURL(y),k=document.createElement("a");k.href=O,k.download=D.get_details().name,k.click(),URL.revokeObjectURL(O)})}),E.on("session_end",()=>{p.current=null,console.log("ZMODEM session ended")}),E.start()},x=async E=>{console.log("ZMODEM Receive Session started (sending file to device)");const N=document.createElement("input");N.type="file",N.onchange=async D=>{const y=D.target.files?.[0];if(!y){E.skip();return}const O=new FileReader;O.onload=async()=>{const k=O.result,A=new Uint8Array(k);Av.Browser.send_files(E,[{name:y.name,size:y.size,mtime:new Date(y.lastModified),content:A}]).then(()=>{E.close()})},O.readAsArrayBuffer(y)},N.click(),E.on("session_end",()=>{p.current=null,console.log("ZMODEM session ended")}),E.start()};return Fe.useEffect(()=>{if(!o.current)return;const E=new tw({cursorBlink:!0,theme:{background:"#0c0c0c",foreground:"#00ff00"},fontFamily:'Monaco, Menlo, "Ubuntu Mono", Consolas, monospace',fontSize:14}),N=new rw;E.loadAddon(N),E.open(o.current),N.fit(),d.current=E;const D=new Av.Sentry({to_terminal:y=>{E.write(new Uint8Array(y))},sender:y=>{v.current(new Uint8Array(y))},on_detect:y=>{const O=y.confirm();p.current=O,O.type==="send"?T(O):x(O)},on_retract:()=>{console.log("ZMODEM retracted")}});f.current=D,E.onData(y=>{if(p.current)return;const O=new TextEncoder;v.current(O.encode(y))});const H=()=>N.fit();return window.addEventListener("resize",H),window.shellTerminal={write:y=>{p.current?p.current.consume(y):f.current&&f.current.consume(y)},clear:()=>E.clear()},()=>{window.removeEventListener("resize",H),window.shellTerminal=void 0,E.dispose()}},[]),Fe.useEffect(()=>{t&&d.current&&d.current.focus()},[t]),R.jsxs("div",{className:"shell-terminal-container",children:[R.jsxs("div",{className:"shell-terminal-header",children:[R.jsxs("h6",{className:"mb-0",children:[R.jsx("i",{className:"bi bi-terminal-fill me-2"}),_.ttyTitle]}),R.jsx("div",{className:"shell-terminal-actions",children:R.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>{d.current?.clear(),n?.()},title:_.clear,children:R.jsx("i",{className:"bi bi-trash"})})})]}),R.jsx("div",{ref:o,className:"xterm-wrapper"})]})},_w=({onSend:t,lang:s,connected:n})=>{const l=mu[s],[o,d]=Fe.useState(()=>{const A=localStorage.getItem("saved_commands");return A?JSON.parse(A):[]}),[f,p]=Fe.useState(!1),[v,_]=Fe.useState(null),[T,x]=Fe.useState(""),[E,N]=Fe.useState(""),[D,H]=Fe.useState("text");Fe.useEffect(()=>{localStorage.setItem("saved_commands",JSON.stringify(o))},[o]);const y=()=>{if(!(!T.trim()||!E.trim())){if(v)d(A=>A.map(j=>j.id===v?{...j,name:T,content:E,type:D}:j)),_(null);else{const A={id:Date.now().toString(),name:T,content:E,type:D};d(j=>[...j,A])}x(""),N(""),H("text"),p(!1)}},O=A=>{x(A.name),N(A.content),H(A.type||"text"),_(A.id),p(!0)},k=A=>{d(j=>j.filter(I=>I.id!==A))};return R.jsxs("div",{className:"command-panel-container",children:[R.jsxs("div",{className:"command-panel-header",children:[R.jsxs("h6",{className:"mb-0",children:[R.jsx("i",{className:"bi bi-list-stars me-2"}),l.commonCommands]}),R.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(!0),_(null),x(""),N(""),H("text")},disabled:f,children:R.jsx("i",{className:"bi bi-plus-lg"})})]}),R.jsxs("div",{className:"command-panel-content custom-scrollbar",children:[f&&R.jsxs("div",{className:"command-edit-box mb-3",children:[R.jsx("input",{type:"text",className:"form-control form-control-sm mb-2",placeholder:l.commandName,value:T,onChange:A=>x(A.target.value)}),R.jsx("textarea",{className:"form-control form-control-sm mb-2",placeholder:l.commandContent,value:E,onChange:A=>N(A.target.value),rows:3}),R.jsx("div",{className:"d-flex gap-2 mb-2",children:R.jsxs("select",{className:"form-select form-select-sm",value:D,onChange:A=>H(A.target.value),children:[R.jsx("option",{value:"text",children:l.typeText}),R.jsx("option",{value:"hex",children:l.typeHex})]})}),R.jsxs("div",{className:"d-flex gap-2",children:[R.jsx("button",{className:"btn btn-sm btn-success flex-grow-1",onClick:y,children:l.save}),R.jsx("button",{className:"btn btn-sm btn-outline-secondary flex-grow-1",onClick:()=>p(!1),children:l.clear})]})]}),o.length===0&&!f?R.jsx("div",{className:"text-center py-4 text-muted",children:R.jsx("small",{children:l.noCommands})}):R.jsx("div",{className:"command-list",children:o.map(A=>R.jsxs("div",{className:"command-item p-2 mb-2",children:[R.jsxs("div",{className:"command-item-info mb-2",children:[R.jsxs("div",{children:[R.jsx("span",{className:`badge ${A.type==="hex"?"bg-warning text-dark":"bg-info text-dark"} me-2`,children:A.type==="hex"?l.typeHex:l.typeText}),R.jsx("span",{className:"command-name fw-bold",children:A.name})]}),R.jsxs("div",{className:"command-actions",children:[R.jsx("i",{className:"bi bi-pencil-square me-2 text-primary pointer",onClick:()=>O(A)}),R.jsx("i",{className:"bi bi-trash text-danger pointer",onClick:()=>k(A.id)})]})]}),R.jsxs("button",{className:"btn btn-sm btn-outline-primary w-100 text-truncate text-start",onClick:()=>t(A.content,A.type),disabled:!n,title:A.content,children:[R.jsx("i",{className:"bi bi-send me-2"}),A.content]})]},A.id))})]})]})},pw=t=>t.split("").map(s=>s.charCodeAt(0).toString(16).padStart(2,"0")).join(" ").toUpperCase(),gw=t=>t.replace(/\s+/g,"").match(/.{1,2}/g)?.map(s=>String.fromCharCode(parseInt(s,16))).join("")||"",wb=t=>{const s=t.replace(/\s+/g,""),n=s.length/2|0,l=new Uint8Array(n);for(let o=0;o<n;o++)l[o]=parseInt(s.substr(o*2,2),16);return l},mw=t=>Array.from(t).map(s=>s.toString(16).padStart(2,"0")).join(" ").toUpperCase(),vw=t=>new TextDecoder().decode(t),bw=()=>new Date().toLocaleTimeString("zh-CN",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),yw=t=>{let s=65535;for(let n=0;n<t.length;n++){s^=t[n];for(let l=0;l<8;l++)(s&1)!==0?s=s>>1^40961:s>>=1}return s},Sw=t=>{const s=new Uint32Array(256);for(let l=0;l<256;l++){let o=l;for(let d=0;d<8;d++)o=o&1?3988292384^o>>>1:o>>>1;s[l]=o}let n=4294967295;for(let l=0;l<t.length;l++)n=n>>>8^s[(n^t[l])&255];return(n^4294967295)>>>0},ww=t=>{let s=0;for(let n=0;n<t.length;n++)s=s+t[n]&255;return s},Cw=t=>{let s=0;for(let n=0;n<t.length;n++)s^=t[n];return s},xw=Object.freeze(Object.defineProperty({__proto__:null,checksum8:ww,crc16modbus:yw,crc32:Sw,formatTimestamp:bw,hexToString:gw,hexToUint8Array:wb,stringToHex:pw,uint8ArrayToHex:mw,uint8ArrayToString:vw,xor8:Cw},Symbol.toStringTag,{value:"Module"}));var Cs={},Tv;function Ew(){if(Tv)return Cs;Tv=1;var t=Cs&&Cs.__assign||function(){return t=Object.assign||function(I){for(var U,G=1,P=arguments.length;G<P;G++){U=arguments[G];for(var re in U)Object.prototype.hasOwnProperty.call(U,re)&&(I[re]=U[re])}return I},t.apply(this,arguments)},s=Cs&&Cs.__createBinding||(Object.create?(function(I,U,G,P){P===void 0&&(P=G);var re=Object.getOwnPropertyDescriptor(U,G);(!re||("get"in re?!U.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return U[G]}}),Object.defineProperty(I,P,re)}):(function(I,U,G,P){P===void 0&&(P=G),I[P]=U[G]})),n=Cs&&Cs.__setModuleDefault||(Object.create?(function(I,U){Object.defineProperty(I,"default",{enumerable:!0,value:U})}):function(I,U){I.default=U}),l=Cs&&Cs.__importStar||function(I){if(I&&I.__esModule)return I;var U={};if(I!=null)for(var G in I)G!=="default"&&Object.prototype.hasOwnProperty.call(I,G)&&s(U,I,G);return n(U,I),U},o=Cs&&Cs.__rest||function(I,U){var G={};for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&U.indexOf(P)<0&&(G[P]=I[P]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,P=Object.getOwnPropertySymbols(I);re<P.length;re++)U.indexOf(P[re])<0&&Object.prototype.propertyIsEnumerable.call(I,P[re])&&(G[P[re]]=I[P[re]]);return G};Object.defineProperty(Cs,"__esModule",{value:!0});var d=l(gu()),f=89,p=90,v=77,_=57,T=219,x=222,E=192,N=100,D=3e3,H=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),y=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),O="npm__react-simple-code-editor__textarea",k=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(O,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(O,` {
    color: transparent !important;
  }

  .`).concat(O,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),A=d.forwardRef(function(U,G){var P=U.autoFocus,re=U.disabled,de=U.form,pe=U.highlight,ie=U.ignoreTabKey,Y=ie===void 0?!1:ie,fe=U.insertSpaces,me=fe===void 0?!0:fe,L=U.maxLength,J=U.minLength,X=U.name,Se=U.onBlur,Te=U.onClick,C=U.onFocus,V=U.onKeyDown,_e=U.onKeyUp,le=U.onValueChange,we=U.padding,ye=we===void 0?0:we,oe=U.placeholder,ce=U.preClassName,W=U.readOnly,De=U.required,ze=U.style,ot=U.tabSize,Ye=ot===void 0?2:ot,Kt=U.textareaClassName,gr=U.textareaId,cs=U.value,xs=o(U,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),yt=d.useRef({stack:[],offset:-1}),ue=d.useRef(null),He=d.useState(!0),at=He[0],hi=He[1],Es={paddingTop:typeof ye=="object"?ye.top:ye,paddingRight:typeof ye=="object"?ye.right:ye,paddingBottom:typeof ye=="object"?ye.bottom:ye,paddingLeft:typeof ye=="object"?ye.left:ye},Ct=pe(cs),ti=function(ge,$e){return ge.substring(0,$e).split(`
`)},It=d.useCallback(function(ge,$e){var Re,Ge,Nt;$e===void 0&&($e=!1);var ui=yt.current,qi=ui.stack,Us=ui.offset;if(qi.length&&Us>-1){yt.current.stack=qi.slice(0,Us+1);var As=yt.current.stack.length;if(As>N){var di=As-N;yt.current.stack=qi.slice(di,As),yt.current.offset=Math.max(yt.current.offset-di,0)}}var bi=Date.now();if($e){var Bi=yt.current.stack[yt.current.offset];if(Bi&&bi-Bi.timestamp<D){var Kr=/[^a-z0-9]([a-z0-9]+)$/i,yi=(Re=ti(Bi.value,Bi.selectionStart).pop())===null||Re===void 0?void 0:Re.match(Kr),tr=(Ge=ti(ge.value,ge.selectionStart).pop())===null||Ge===void 0?void 0:Ge.match(Kr);if(yi?.[1]&&(!((Nt=tr?.[1])===null||Nt===void 0)&&Nt.startsWith(yi[1]))){yt.current.stack[yt.current.offset]=t(t({},ge),{timestamp:bi});return}}}yt.current.stack.push(t(t({},ge),{timestamp:bi})),yt.current.offset++},[]),Sn=d.useCallback(function(){var ge=ue.current;if(ge){var $e=ge.value,Re=ge.selectionStart,Ge=ge.selectionEnd;It({value:$e,selectionStart:Re,selectionEnd:Ge})}},[It]),mr=function(ge){var $e=ue.current;$e&&($e.value=ge.value,$e.selectionStart=ge.selectionStart,$e.selectionEnd=ge.selectionEnd,le?.(ge.value))},vr=function(ge){var $e=ue.current,Re=yt.current.stack[yt.current.offset];Re&&$e&&(yt.current.stack[yt.current.offset]=t(t({},Re),{selectionStart:$e.selectionStart,selectionEnd:$e.selectionEnd})),It(ge),mr(ge)},br=function(){var ge=yt.current,$e=ge.stack,Re=ge.offset,Ge=$e[Re-1];Ge&&(mr(Ge),yt.current.offset=Math.max(Re-1,0))},yr=function(){var ge=yt.current,$e=ge.stack,Re=ge.offset,Ge=$e[Re+1];Ge&&(mr(Ge),yt.current.offset=Math.min(Re+1,$e.length-1))},Sr=function(ge){if(!(V&&(V(ge),ge.defaultPrevented))){ge.key==="Escape"&&ge.currentTarget.blur();var $e=ge.currentTarget,Re=$e.value,Ge=$e.selectionStart,Nt=$e.selectionEnd,ui=(me?" ":"	").repeat(Ye);if(ge.key==="Tab"&&!Y&&at)if(ge.preventDefault(),ge.shiftKey){var qi=ti(Re,Ge),Us=qi.length-1,As=ti(Re,Nt).length-1,di=Re.split(`
`).map(function(ir,wn){return wn>=Us&&wn<=As&&ir.startsWith(ui)?ir.substring(ui.length):ir}).join(`
`);if(Re!==di){var bi=qi[Us];vr({value:di,selectionStart:bi?.startsWith(ui)?Ge-ui.length:Ge,selectionEnd:Nt-(Re.length-di.length)})}}else if(Ge!==Nt){var qi=ti(Re,Ge),Bi=qi.length-1,Kr=ti(Re,Nt).length-1,bi=qi[Bi];vr({value:Re.split(`
`).map(function(pa,Yr){return Yr>=Bi&&Yr<=Kr?ui+pa:pa}).join(`
`),selectionStart:bi&&/\S/.test(bi)?Ge+ui.length:Ge,selectionEnd:Nt+ui.length*(Kr-Bi+1)})}else{var yi=Ge+ui.length;vr({value:Re.substring(0,Ge)+ui+Re.substring(Nt),selectionStart:yi,selectionEnd:yi})}else if(ge.key==="Backspace"){var tr=Ge!==Nt,Wr=Re.substring(0,Ge);if(Wr.endsWith(ui)&&!tr){ge.preventDefault();var yi=Ge-ui.length;vr({value:Re.substring(0,Ge-ui.length)+Re.substring(Nt),selectionStart:yi,selectionEnd:yi})}}else if(ge.key==="Enter"){if(Ge===Nt){var js=ti(Re,Ge).pop(),Ts=js?.match(/^\s+/);if(Ts?.[0]){ge.preventDefault();var _a=`
`+Ts[0],yi=Ge+_a.length;vr({value:Re.substring(0,Ge)+_a+Re.substring(Nt),selectionStart:yi,selectionEnd:yi})}}}else if(ge.keyCode===_||ge.keyCode===T||ge.keyCode===x||ge.keyCode===E){var hs=void 0;ge.keyCode===_&&ge.shiftKey?hs=["(",")"]:ge.keyCode===T?ge.shiftKey?hs=["{","}"]:hs=["[","]"]:ge.keyCode===x?ge.shiftKey?hs=['"','"']:hs=["'","'"]:ge.keyCode===E&&!ge.shiftKey&&(hs=["`","`"]),Ge!==Nt&&hs&&(ge.preventDefault(),vr({value:Re.substring(0,Ge)+hs[0]+Re.substring(Ge,Nt)+hs[1]+Re.substring(Nt),selectionStart:Ge,selectionEnd:Nt+2}))}else(y?ge.metaKey&&ge.keyCode===p:ge.ctrlKey&&ge.keyCode===p)&&!ge.shiftKey&&!ge.altKey?(ge.preventDefault(),br()):(y?ge.metaKey&&ge.keyCode===p&&ge.shiftKey:H?ge.ctrlKey&&ge.keyCode===f:ge.ctrlKey&&ge.keyCode===p&&ge.shiftKey)&&!ge.altKey?(ge.preventDefault(),yr()):ge.keyCode===v&&ge.ctrlKey&&(!y||ge.shiftKey)&&(ge.preventDefault(),hi(function(ir){return!ir}))}},Hs=function(ge){var $e=ge.currentTarget,Re=$e.value,Ge=$e.selectionStart,Nt=$e.selectionEnd;It({value:Re,selectionStart:Ge,selectionEnd:Nt},!0),le(Re)};return d.useEffect(function(){Sn()},[Sn]),d.useImperativeHandle(G,function(){return{get session(){return{history:yt.current}},set session(ge){yt.current=ge.history}}},[]),d.createElement("div",t({},xs,{style:t(t({},j.container),ze)}),d.createElement("pre",t({className:ce,"aria-hidden":"true",style:t(t(t({},j.editor),j.highlight),Es)},typeof Ct=="string"?{dangerouslySetInnerHTML:{__html:Ct+"<br />"}}:{children:Ct})),d.createElement("textarea",{ref:function(ge){return ue.current=ge},style:t(t(t({},j.editor),j.textarea),Es),className:O+(Kt?" ".concat(Kt):""),id:gr,value:cs,onChange:Hs,onKeyDown:Sr,onClick:Te,onKeyUp:_e,onFocus:C,onBlur:Se,disabled:re,form:de,maxLength:L,minLength:J,name:X,placeholder:oe,readOnly:W,required:De,autoFocus:P,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),d.createElement("style",{dangerouslySetInnerHTML:{__html:k}}))}),j={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return Cs.default=A,Cs}var Aw=Ew();const iu=Dv(Aw);var Rf={exports:{}},kv;function Tw(){return kv||(kv=1,(function(t){var s=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var n=(function(l){var o=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,f={},p={manual:l.Prism&&l.Prism.manual,disableWorkerMessageHandler:l.Prism&&l.Prism.disableWorkerMessageHandler,util:{encode:function k(A){return A instanceof v?new v(A.type,k(A.content),A.alias):Array.isArray(A)?A.map(k):A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++d}),k.__id},clone:function k(A,j){j=j||{};var I,U;switch(p.util.type(A)){case"Object":if(U=p.util.objId(A),j[U])return j[U];I={},j[U]=I;for(var G in A)A.hasOwnProperty(G)&&(I[G]=k(A[G],j));return I;case"Array":return U=p.util.objId(A),j[U]?j[U]:(I=[],j[U]=I,A.forEach(function(P,re){I[re]=k(P,j)}),I);default:return A}},getLanguage:function(k){for(;k;){var A=o.exec(k.className);if(A)return A[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,A){k.className=k.className.replace(RegExp(o,"gi"),""),k.classList.add("language-"+A)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(I){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(I.stack)||[])[1];if(k){var A=document.getElementsByTagName("script");for(var j in A)if(A[j].src==k)return A[j]}return null}},isActive:function(k,A,j){for(var I="no-"+A;k;){var U=k.classList;if(U.contains(A))return!0;if(U.contains(I))return!1;k=k.parentElement}return!!j}},languages:{plain:f,plaintext:f,text:f,txt:f,extend:function(k,A){var j=p.util.clone(p.languages[k]);for(var I in A)j[I]=A[I];return j},insertBefore:function(k,A,j,I){I=I||p.languages;var U=I[k],G={};for(var P in U)if(U.hasOwnProperty(P)){if(P==A)for(var re in j)j.hasOwnProperty(re)&&(G[re]=j[re]);j.hasOwnProperty(P)||(G[P]=U[P])}var de=I[k];return I[k]=G,p.languages.DFS(p.languages,function(pe,ie){ie===de&&pe!=k&&(this[pe]=G)}),G},DFS:function k(A,j,I,U){U=U||{};var G=p.util.objId;for(var P in A)if(A.hasOwnProperty(P)){j.call(A,P,A[P],I||P);var re=A[P],de=p.util.type(re);de==="Object"&&!U[G(re)]?(U[G(re)]=!0,k(re,j,null,U)):de==="Array"&&!U[G(re)]&&(U[G(re)]=!0,k(re,j,P,U))}}},plugins:{},highlightAll:function(k,A){p.highlightAllUnder(document,k,A)},highlightAllUnder:function(k,A,j){var I={callback:j,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};p.hooks.run("before-highlightall",I),I.elements=Array.prototype.slice.apply(I.container.querySelectorAll(I.selector)),p.hooks.run("before-all-elements-highlight",I);for(var U=0,G;G=I.elements[U++];)p.highlightElement(G,A===!0,I.callback)},highlightElement:function(k,A,j){var I=p.util.getLanguage(k),U=p.languages[I];p.util.setLanguage(k,I);var G=k.parentElement;G&&G.nodeName.toLowerCase()==="pre"&&p.util.setLanguage(G,I);var P=k.textContent,re={element:k,language:I,grammar:U,code:P};function de(ie){re.highlightedCode=ie,p.hooks.run("before-insert",re),re.element.innerHTML=re.highlightedCode,p.hooks.run("after-highlight",re),p.hooks.run("complete",re),j&&j.call(re.element)}if(p.hooks.run("before-sanity-check",re),G=re.element.parentElement,G&&G.nodeName.toLowerCase()==="pre"&&!G.hasAttribute("tabindex")&&G.setAttribute("tabindex","0"),!re.code){p.hooks.run("complete",re),j&&j.call(re.element);return}if(p.hooks.run("before-highlight",re),!re.grammar){de(p.util.encode(re.code));return}if(A&&l.Worker){var pe=new Worker(p.filename);pe.onmessage=function(ie){de(ie.data)},pe.postMessage(JSON.stringify({language:re.language,code:re.code,immediateClose:!0}))}else de(p.highlight(re.code,re.grammar,re.language))},highlight:function(k,A,j){var I={code:k,grammar:A,language:j};if(p.hooks.run("before-tokenize",I),!I.grammar)throw new Error('The language "'+I.language+'" has no grammar.');return I.tokens=p.tokenize(I.code,I.grammar),p.hooks.run("after-tokenize",I),v.stringify(p.util.encode(I.tokens),I.language)},tokenize:function(k,A){var j=A.rest;if(j){for(var I in j)A[I]=j[I];delete A.rest}var U=new x;return E(U,U.head,k),T(k,U,A,U.head,0),D(U)},hooks:{all:{},add:function(k,A){var j=p.hooks.all;j[k]=j[k]||[],j[k].push(A)},run:function(k,A){var j=p.hooks.all[k];if(!(!j||!j.length))for(var I=0,U;U=j[I++];)U(A)}},Token:v};l.Prism=p;function v(k,A,j,I){this.type=k,this.content=A,this.alias=j,this.length=(I||"").length|0}v.stringify=function k(A,j){if(typeof A=="string")return A;if(Array.isArray(A)){var I="";return A.forEach(function(de){I+=k(de,j)}),I}var U={type:A.type,content:k(A.content,j),tag:"span",classes:["token",A.type],attributes:{},language:j},G=A.alias;G&&(Array.isArray(G)?Array.prototype.push.apply(U.classes,G):U.classes.push(G)),p.hooks.run("wrap",U);var P="";for(var re in U.attributes)P+=" "+re+'="'+(U.attributes[re]||"").replace(/"/g,"&quot;")+'"';return"<"+U.tag+' class="'+U.classes.join(" ")+'"'+P+">"+U.content+"</"+U.tag+">"};function _(k,A,j,I){k.lastIndex=A;var U=k.exec(j);if(U&&I&&U[1]){var G=U[1].length;U.index+=G,U[0]=U[0].slice(G)}return U}function T(k,A,j,I,U,G){for(var P in j)if(!(!j.hasOwnProperty(P)||!j[P])){var re=j[P];re=Array.isArray(re)?re:[re];for(var de=0;de<re.length;++de){if(G&&G.cause==P+","+de)return;var pe=re[de],ie=pe.inside,Y=!!pe.lookbehind,fe=!!pe.greedy,me=pe.alias;if(fe&&!pe.pattern.global){var L=pe.pattern.toString().match(/[imsuy]*$/)[0];pe.pattern=RegExp(pe.pattern.source,L+"g")}for(var J=pe.pattern||pe,X=I.next,Se=U;X!==A.tail&&!(G&&Se>=G.reach);Se+=X.value.length,X=X.next){var Te=X.value;if(A.length>k.length)return;if(!(Te instanceof v)){var C=1,V;if(fe){if(V=_(J,Se,k,Y),!V||V.index>=k.length)break;var ye=V.index,_e=V.index+V[0].length,le=Se;for(le+=X.value.length;ye>=le;)X=X.next,le+=X.value.length;if(le-=X.value.length,Se=le,X.value instanceof v)continue;for(var we=X;we!==A.tail&&(le<_e||typeof we.value=="string");we=we.next)C++,le+=we.value.length;C--,Te=k.slice(Se,le),V.index-=Se}else if(V=_(J,0,Te,Y),!V)continue;var ye=V.index,oe=V[0],ce=Te.slice(0,ye),W=Te.slice(ye+oe.length),De=Se+Te.length;G&&De>G.reach&&(G.reach=De);var ze=X.prev;ce&&(ze=E(A,ze,ce),Se+=ce.length),N(A,ze,C);var ot=new v(P,ie?p.tokenize(oe,ie):oe,me,oe);if(X=E(A,ze,ot),W&&E(A,X,W),C>1){var Ye={cause:P+","+de,reach:De};T(k,A,j,X.prev,Se,Ye),G&&Ye.reach>G.reach&&(G.reach=Ye.reach)}}}}}}function x(){var k={value:null,prev:null,next:null},A={value:null,prev:k,next:null};k.next=A,this.head=k,this.tail=A,this.length=0}function E(k,A,j){var I=A.next,U={value:j,prev:A,next:I};return A.next=U,I.prev=U,k.length++,U}function N(k,A,j){for(var I=A.next,U=0;U<j&&I!==k.tail;U++)I=I.next;A.next=I,I.prev=A,k.length-=U}function D(k){for(var A=[],j=k.head.next;j!==k.tail;)A.push(j.value),j=j.next;return A}if(!l.document)return l.addEventListener&&(p.disableWorkerMessageHandler||l.addEventListener("message",function(k){var A=JSON.parse(k.data),j=A.language,I=A.code,U=A.immediateClose;l.postMessage(p.highlight(I,p.languages[j],j)),U&&l.close()},!1)),p;var H=p.util.currentScript();H&&(p.filename=H.src,H.hasAttribute("data-manual")&&(p.manual=!0));function y(){p.manual||p.highlightAll()}if(!p.manual){var O=document.readyState;O==="loading"||O==="interactive"&&H&&H.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return p})(s);t.exports&&(t.exports=n),typeof lm<"u"&&(lm.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(l){l.type==="entity"&&(l.attributes.title=l.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(o,d){var f={};f["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[d]},f.cdata=/^<!\[CDATA\[|\]\]>$/i;var p={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:f}};p["language-"+d]={pattern:/[\s\S]+/,inside:n.languages[d]};var v={};v[o]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return o}),"i"),lookbehind:!0,greedy:!0,inside:p},n.languages.insertBefore("markup","cdata",v)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(l,o){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+l+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[o,"language-"+o],inside:n.languages[o]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(l){var o=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;l.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+o.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+o.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+o.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+o.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:o,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},l.languages.css.atrule.inside.rest=l.languages.css;var d=l.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var l="Loading",o=function(H,y){return" Error "+H+" while fetching file: "+y},d=" Error: File does not exist or is empty",f={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},p="data-src-status",v="loading",_="loaded",T="failed",x="pre[data-src]:not(["+p+'="'+_+'"]):not(['+p+'="'+v+'"])';function E(H,y,O){var k=new XMLHttpRequest;k.open("GET",H,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?y(k.responseText):k.status>=400?O(o(k.status,k.statusText)):O(d))},k.send(null)}function N(H){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(H||"");if(y){var O=Number(y[1]),k=y[2],A=y[3];return k?A?[O,Number(A)]:[O,void 0]:[O,O]}}n.hooks.add("before-highlightall",function(H){H.selector+=", "+x}),n.hooks.add("before-sanity-check",function(H){var y=H.element;if(y.matches(x)){H.code="",y.setAttribute(p,v);var O=y.appendChild(document.createElement("CODE"));O.textContent=l;var k=y.getAttribute("data-src"),A=H.language;if(A==="none"){var j=(/\.(\w+)$/.exec(k)||[,"none"])[1];A=f[j]||j}n.util.setLanguage(O,A),n.util.setLanguage(y,A);var I=n.plugins.autoloader;I&&I.loadLanguages(A),E(k,function(U){y.setAttribute(p,_);var G=N(y.getAttribute("data-range"));if(G){var P=U.split(/\r\n?|\n/g),re=G[0],de=G[1]==null?P.length:G[1];re<0&&(re+=P.length),re=Math.max(0,Math.min(re-1,P.length)),de<0&&(de+=P.length),de=Math.max(0,Math.min(de,P.length)),U=P.slice(re,de).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(re+1))}O.textContent=U,n.highlightElement(O)},function(U){y.setAttribute(p,T),O.textContent=U})}}),n.plugins.fileHighlight={highlight:function(y){for(var O=(y||document).querySelectorAll(x),k=0,A;A=O[k++];)n.highlightElement(A)}};var D=!1;n.fileHighlight=function(){D||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),D=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(Rf)),Rf.exports}var kw=Tw();const ha=Dv(kw);Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;function Dw(){const[t,s]=Fe.useState(()=>localStorage.getItem("app_lang")||(navigator.language.startsWith("zh")?"zh":"en")),n=mu[t],[l,o]=Fe.useState("none"),[d,f]=Fe.useState(!1),[p,v]=Fe.useState(!1),[_,T]=Fe.useState(!1),[x,E]=Fe.useState("utf-8"),[N,D]=Fe.useState(5),[H,y]=Fe.useState(1e3),[O,k]=Fe.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches),[A,j]=Fe.useState([]),[I,U]=Fe.useState(""),[G,P]=Fe.useState(0),[re,de]=Fe.useState(0),[pe,ie]=Fe.useState(!1),[Y,fe]=Fe.useState(null),me={modbus_rtu_read:{name:"Modbus RTU Read (03)",pack:`/**
 * 
 * @param {Object} option
 * @param {string|Uint8Array} option.data - 
 * @param {Object} option.utils -  (crc16modbus, hexToUint8Array, etc.)
 * @returns {Uint8Array|string} 
 */
function(option) {
  const { data, utils } = option;
  //  Modbus RTU CRC 
  // data : [slaveId, funcCode, startAddrH, startAddrL, countH, countL]
  const buf = new Uint8Array(data.length + 2);
  buf.set(data);
  const crc = utils.crc16modbus(data);
  buf[data.length] = crc & 0xFF;         // CRC 
  buf[data.length + 1] = (crc >> 8) & 0xFF; // CRC 
  return buf;
}`,unpack:`/**
 * 
 * @param {Object} option
 * @param {Uint8Array} option.data - 
 * @param {Object} option.utils - 
 * @returns {any}  toString 
 */
function(option) {
  const { data, utils } = option;
  if (data.length < 4) return data;
  
  const payload = data.slice(0, data.length - 2);
  const crcReceived = data[data.length - 2] | (data[data.length - 1] << 8);
  const crcCalc = utils.crc16modbus(payload);
  
  // 
  return { 
    slaveId: data[0],
    func: data[1],
    byteCount: data[2],
    values: Array.from(data.slice(3, data.length - 2)),
    crcValid: crcReceived === crcCalc
  };
}`,toString:`/**
 * 
 * @param {Object} option
 * @param {any} option.data - unpack 
 * @param {Object} option.utils - 
 * @returns {string} 
 */
function(option) {
  const { data, utils } = option;
  //  Modbus 
  if (typeof data === 'object' && data.values) {
    const hexValues = data.values.map(v => v.toString(16).padStart(2, '0')).join(' ');
    return \`[Modbus] : \${data.slaveId} | : \${hexValues} \${data.crcValid ? '' : '()'}\`;
  }
  //  HEX 
  return utils.uint8ArrayToHex(data);
}`}},[L,J]=Fe.useState(()=>localStorage.getItem("protocol_pack")||`/**
 *  (Pack)
 * @param {Object} option { data: , utils:  }
 * @returns {Uint8Array|string}
 */
function(option) {
  const { data, utils } = option;
  return data;
}`),[X,Se]=Fe.useState(()=>localStorage.getItem("protocol_unpack")||`/**
 *  (Unpack)
 * @param {Object} option { data: , utils:  }
 * @returns {any}
 */
function(option) {
  const { data, utils } = option;
  return data;
}`),[Te,C]=Fe.useState(()=>localStorage.getItem("protocol_toString")||`/**
 *  (toString)
 * @param {Object} option { data: unpack, utils:  }
 * @returns {string}
 */
function(option) {
  const { data, utils } = option;
  if (data instanceof Uint8Array) return utils.uint8ArrayToString(data);
  if (typeof data === "object") return JSON.stringify(data);
  return String(data);
}`),V=Fe.useCallback((ue,He)=>{j(at=>{const hi=Date.now();if(at.length>0){const ti=at[at.length-1];if(ti.data===ue&&ti.direction===He){const It=[...at];return It[It.length-1]={...ti,timestamp:hi,count:(ti.count||1)+1},It}}const Es={id:Date.now().toString()+Math.random().toString(36).substr(2,5),timestamp:hi,data:ue,direction:He,count:1},Ct=[...at,Es];return Ct.length>H?Ct.slice(Ct.length-H):Ct})},[H]),_e=Fe.useRef([]),le=Fe.useRef(null),we=Fe.useCallback((ue,He)=>{try{let at=ue;const hi=ue.match(/function\s*\(.*?\)\s*\{([\s\S]*)\}/);return hi&&(at=hi[1]),new Function("option",at)({data:He,utils:xw})}catch(at){return console.error("Protocol function error:",at),He}},[]),ye=Fe.useCallback((ue,He)=>{if(pe){const at=we(X,ue),hi=we(Te,at);V(String(hi),He)}else{const at=new TextDecoder(x);V(at.decode(ue),He)}},[pe,X,Te,x,V,we]),[oe,ce]=Fe.useState({baudRate:115200,dataBits:8,stopBits:1,parity:"none"}),[W,De]=Fe.useState({serviceUUID:"0xfff0",characteristicUUID:"0xfff1",namePrefix:"KT",filterType:"name"});Fe.useEffect(()=>{localStorage.setItem("app_lang",t)},[t]),Fe.useEffect(()=>{localStorage.setItem("protocol_pack",L),localStorage.setItem("protocol_unpack",X),localStorage.setItem("protocol_toString",Te)},[L,X,Te]),Fe.useEffect(()=>{const ue=window.matchMedia("(prefers-color-scheme: dark)"),He=at=>k(at.matches);return ue.addEventListener("change",He),()=>ue.removeEventListener("change",He)},[]),Fe.useEffect(()=>{document.body.classList.toggle("dark-theme",O),document.body.classList.toggle("light-theme",!O)},[O]);const ze=Fe.useCallback(()=>{const ue=new Uint8Array(_e.current);_e.current=[],le.current&&(window.clearTimeout(le.current),le.current=null),ye(ue,"rx")},[ye]),ot=()=>{j([]),_e.current=[],le.current&&(window.clearTimeout(le.current),le.current=null),window.shellTerminal&&window.shellTerminal.clear()},Ye=()=>{P(0),de(0)};Fe.useEffect(()=>{const ue=(He,at)=>{at==="rx"?(P(hi=>hi+He.length),window.shellTerminal&&window.shellTerminal.write(He)):de(hi=>hi+He.length),!_&&(at==="rx"?N>0?(le.current&&window.clearTimeout(le.current),_e.current.push(...Array.from(He)),le.current=window.setTimeout(()=>{ze()},N)):ye(He,"rx"):ye(He,"tx"))};return qa.onData((He,at)=>{l==="serial"&&ue(He,at)}),Pa.onData((He,at)=>{l==="bluetooth"&&ue(He,at)}),qa.onStatusChange(He=>{l==="serial"&&f(He)}),Pa.onStatusChange(He=>{l==="bluetooth"&&f(He)}),()=>{le.current&&window.clearTimeout(le.current)}},[l,N,_,ze,ye,V]);const Kt=async()=>{if(!qa.isSupported()){alert(n.notSupportedSerial);return}await qa.connect(oe)?o("serial"):alert(n.connectSerialFail)},gr=async()=>{if(!Pa.isSupported()){alert(n.notSupportedBLE);return}const ue={serviceUUID:W.serviceUUID,characteristicUUID:W.characteristicUUID,namePrefix:W.filterType==="name"?W.namePrefix:void 0,acceptAllDevices:W.filterType==="all"};await Pa.connect(ue)?o("bluetooth"):alert(n.connectBLEFail)},cs=async()=>{l==="serial"?await qa.disconnect():l==="bluetooth"&&await Pa.disconnect(),o("none"),f(!1)},xs=async(ue,He)=>{const at=ue!==void 0?ue:I;if(!at.trim())return;const hi=He?He==="hex":p;let Es=at;if(hi){const It=at.replace(/\s+/g,"").replace(/0x/gi,"");if(!/^[0-9A-Fa-f]{2,}$/.test(It)){alert(n.inputHex);return}Es=wb(It)}let Ct=Es;pe&&(Ct=we(L,Es)),(l==="serial"?await qa.send(Ct):await Pa.send(Ct))?ue===void 0&&U(""):alert(n.sendFail)},yt=async ue=>{(l==="serial"?await qa.send(ue):await Pa.send(ue))||console.error("Failed to send data to TTY")};return R.jsxs("div",{className:"app-container",children:[R.jsxs("header",{className:"app-header",children:[R.jsxs("div",{className:"header-brand",children:[R.jsx("i",{className:"bi bi-cpu"}),R.jsx("h1",{className:"mb-0",children:n.title})]}),R.jsxs("div",{className:"header-info",children:[R.jsxs("div",{className:"btn-group btn-group-sm me-3",children:[R.jsx("button",{className:`btn btn-outline-secondary ${t==="zh"?"active":""}`,onClick:()=>s("zh"),children:""}),R.jsx("button",{className:`btn btn-outline-secondary ${t==="en"?"active":""}`,onClick:()=>s("en"),children:"EN"})]}),R.jsx("span",{className:`status-badge ${d?"connected":"disconnected"}`,children:d?n.connected:n.disconnected})]})]}),R.jsxs("main",{className:"app-main",children:[R.jsxs("aside",{className:"control-panel",children:[R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-link-45deg"})," ",n.connectionType]}),R.jsxs("div",{className:"btn-group w-100",children:[R.jsx("button",{className:`btn ${l==="serial"?"btn-primary":"btn-outline-primary"}`,onClick:()=>!d&&o("serial"),disabled:d,children:n.serial}),R.jsx("button",{className:`btn ${l==="bluetooth"?"btn-primary":"btn-outline-primary"}`,onClick:()=>!d&&o("bluetooth"),disabled:d,children:n.ble})]})]}),l==="serial"&&R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-gear"})," ",n.serialConfig]}),R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.baudRate}),R.jsx("select",{className:"form-select",value:oe.baudRate,onChange:ue=>ce({...oe,baudRate:Number(ue.target.value)}),children:[1200,2400,4800,9600,19200,38400,57600,115200,230400,460800,921600].map(ue=>R.jsx("option",{value:ue,children:ue},ue))})]}),R.jsxs("div",{className:"row g-2 mb-3",children:[R.jsxs("div",{className:"col-6",children:[R.jsx("label",{children:n.dataBits}),R.jsx("select",{className:"form-select",value:oe.dataBits,onChange:ue=>ce({...oe,dataBits:Number(ue.target.value)}),children:[7,8].map(ue=>R.jsx("option",{value:ue,children:ue},ue))})]}),R.jsxs("div",{className:"col-6",children:[R.jsx("label",{children:n.stopBits}),R.jsx("select",{className:"form-select",value:oe.stopBits,onChange:ue=>ce({...oe,stopBits:Number(ue.target.value)}),children:[1,2].map(ue=>R.jsx("option",{value:ue,children:ue},ue))})]})]}),R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.parity}),R.jsxs("select",{className:"form-select",value:oe.parity,onChange:ue=>ce({...oe,parity:ue.target.value}),children:[R.jsx("option",{value:"none",children:"None"}),R.jsx("option",{value:"even",children:"Even"}),R.jsx("option",{value:"odd",children:"Odd"})]})]}),!d&&R.jsxs("button",{className:"btn btn-success w-100",onClick:Kt,children:[R.jsx("i",{className:"bi bi-plug"})," ",n.openSerial]})]}),l==="bluetooth"&&R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-bluetooth"})," ",n.bleConfig]}),R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.filterType}),R.jsxs("select",{className:"form-select",value:W.filterType,onChange:ue=>De({...W,filterType:ue.target.value}),children:[R.jsx("option",{value:"name",children:n.byName}),R.jsx("option",{value:"service",children:n.byService}),R.jsx("option",{value:"all",children:n.showAll})]})]}),W.filterType==="name"&&R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.namePrefix}),R.jsx("input",{type:"text",className:"form-control",value:W.namePrefix,onChange:ue=>De({...W,namePrefix:ue.target.value})})]}),R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.serviceUUID}),R.jsx("input",{type:"text",className:"form-control",value:W.serviceUUID,onChange:ue=>De({...W,serviceUUID:ue.target.value})})]}),R.jsxs("div",{className:"form-group mb-3",children:[R.jsx("label",{children:n.charUUID}),R.jsx("input",{type:"text",className:"form-control",value:W.characteristicUUID,onChange:ue=>De({...W,characteristicUUID:ue.target.value})})]}),!d&&R.jsxs("button",{className:"btn btn-success w-100",onClick:gr,children:[R.jsx("i",{className:"bi bi-search"})," ",n.searchConnect]})]}),R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-sliders"})," ",n.displaySettings]}),R.jsxs("div",{className:"form-check mb-2",children:[R.jsx("input",{type:"checkbox",className:"form-check-input",id:"hexMode",checked:p,onChange:ue=>v(ue.target.checked)}),R.jsx("label",{className:"form-check-label",htmlFor:"hexMode",children:n.hexMode})]}),R.jsxs("div",{className:"form-check mb-2",children:[R.jsx("input",{type:"checkbox",className:"form-check-input",id:"shellMode",checked:_,onChange:ue=>T(ue.target.checked)}),R.jsx("label",{className:"form-check-label",htmlFor:"shellMode",children:n.shellMode})]}),R.jsxs("div",{className:"form-group mb-2",children:[R.jsx("label",{children:n.encoding}),R.jsxs("select",{className:"form-select",value:x,onChange:ue=>E(ue.target.value),children:[R.jsx("option",{value:"utf-8",children:"UTF-8"}),R.jsx("option",{value:"gbk",children:"GBK"})]})]}),R.jsxs("div",{className:"row g-2 mb-2",children:[R.jsxs("div",{className:"col-6",children:[R.jsx("label",{className:"small",children:n.frameTimeout}),R.jsx("input",{type:"number",className:"form-control form-control-sm",value:N,onChange:ue=>D(Math.max(0,Number(ue.target.value)))})]}),R.jsxs("div",{className:"col-6",children:[R.jsx("label",{className:"small",children:n.maxHistory}),R.jsx("input",{type:"number",className:"form-control form-control-sm",value:H,onChange:ue=>y(Math.max(10,Number(ue.target.value)))})]})]}),R.jsxs("div",{className:"form-check",children:[R.jsx("input",{type:"checkbox",className:"form-check-input",id:"darkMode",checked:O,onChange:ue=>k(ue.target.checked)}),R.jsxs("label",{className:"form-check-label",htmlFor:"darkMode",children:[n.darkMode," (",O?n.auto:n.light,")"]})]})]}),R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-braces"})," ",n.protocolMode,R.jsx("button",{className:"btn btn-link btn-sm p-0 ms-2",onClick:()=>alert(n.protocolHelp),title:n.help,children:R.jsx("i",{className:"bi bi-question-circle"})})]}),R.jsxs("div",{className:"form-check mb-3",children:[R.jsx("input",{type:"checkbox",className:"form-check-input",id:"protocolEnabled",checked:pe,onChange:ue=>ie(ue.target.checked)}),R.jsx("label",{className:"form-check-label",htmlFor:"protocolEnabled",children:n.protocolEnabled})]}),pe&&R.jsxs("div",{className:"protocol-config",children:[R.jsxs("div",{className:"mb-2",children:[R.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[R.jsx("label",{className:"small",children:n.packFunc}),R.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>fe({type:"pack",code:L}),children:R.jsx("i",{className:"bi bi-arrows-fullscreen small"})})]}),R.jsx("div",{className:"editor-container",children:R.jsx(iu,{value:L,onValueChange:ue=>J(ue),highlight:ue=>ha.highlight(ue,ha.languages.javascript,"javascript"),padding:10,className:"code-area-highlight"})})]}),R.jsxs("div",{className:"mb-2",children:[R.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[R.jsx("label",{className:"small",children:n.unpackFunc}),R.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>fe({type:"unpack",code:X}),children:R.jsx("i",{className:"bi bi-arrows-fullscreen small"})})]}),R.jsx("div",{className:"editor-container",children:R.jsx(iu,{value:X,onValueChange:ue=>Se(ue),highlight:ue=>ha.highlight(ue,ha.languages.javascript,"javascript"),padding:10,className:"code-area-highlight"})})]}),R.jsxs("div",{className:"mb-2",children:[R.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[R.jsx("label",{className:"small",children:n.toStringFunc}),R.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>fe({type:"toString",code:Te}),children:R.jsx("i",{className:"bi bi-arrows-fullscreen small"})})]}),R.jsx("div",{className:"editor-container",children:R.jsx(iu,{value:Te,onValueChange:ue=>C(ue),highlight:ue=>ha.highlight(ue,ha.languages.javascript,"javascript"),padding:10,className:"code-area-highlight"})})]})]})]}),!_&&R.jsxs("div",{className:"panel-section",children:[R.jsxs("div",{className:"section-title",children:[R.jsx("i",{className:"bi bi-send"})," ",n.sendData]}),R.jsx("div",{className:"form-group mb-2",children:R.jsx("textarea",{className:"form-control send-area",value:I,onChange:ue=>U(ue.target.value),placeholder:p?n.inputHex:n.inputText,rows:4})}),R.jsxs("button",{className:"btn btn-primary w-100",onClick:()=>xs(),disabled:!d,children:[R.jsx("i",{className:"bi bi-send"})," ",n.send]})]}),d&&R.jsx("div",{className:"panel-section",children:R.jsxs("button",{className:"btn btn-danger w-100",onClick:cs,children:[R.jsx("i",{className:"bi bi-x-circle"})," ",n.disconnect]})})]}),R.jsx("section",{className:"terminal-panel",children:R.jsxs("div",{className:"main-content-row h-100 d-flex",children:[R.jsx("div",{className:"flex-grow-1 h-100 overflow-hidden",children:_?R.jsx(fw,{connected:d,onData:yt,onClear:ot,lang:t}):R.jsx(Wy,{messages:A,hexMode:p&&!pe,onClear:ot,onCopy:()=>{const ue=A.map(He=>`[${He.timestamp}] ${He.direction.toUpperCase()}: ${He.data}`).join(`
`);navigator.clipboard.writeText(ue),alert(n.copied)},autoScroll:!0,lang:t})}),!_&&R.jsx(_w,{onSend:(ue,He)=>xs(ue,He),lang:t,connected:d})]})})]}),R.jsxs("footer",{className:"app-footer",children:[R.jsxs("div",{className:"footer-stats",children:[R.jsxs("span",{className:"me-3",children:[n.rx,": ",R.jsx("strong",{className:"text-success",children:G})," ",n.bytes]}),R.jsxs("span",{className:"me-3",children:[n.tx,": ",R.jsx("strong",{className:"text-primary",children:re})," ",n.bytes]}),R.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:Ye,children:n.reset})]}),R.jsx("small",{className:"text-muted",children:"Web Serial Assistant v1.0 | Web Serial & Web Bluetooth"})]}),Y&&R.jsx("div",{className:"protocol-modal-overlay",children:R.jsxs("div",{className:"protocol-modal-content",children:[R.jsxs("div",{className:"protocol-modal-header",children:[R.jsx("h5",{className:"mb-0",children:Y.type==="pack"?n.packFunc:Y.type==="unpack"?n.unpackFunc:n.toStringFunc}),R.jsxs("div",{className:"d-flex gap-2",children:[R.jsxs("div",{className:"dropdown",children:[R.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:n.presets||"Presets"}),R.jsx("ul",{className:"dropdown-menu dropdown-menu-end",children:Object.entries(me).map(([ue,He])=>R.jsx("li",{children:R.jsx("button",{className:"dropdown-item",onClick:()=>{Y.type==="pack"?fe({...Y,code:He.pack}):Y.type==="unpack"?fe({...Y,code:He.unpack}):Y.type==="toString"&&fe({...Y,code:He.toString||Y.code})},children:He.name})},ue))})]}),R.jsx("button",{className:"btn-close btn-close-white",onClick:()=>fe(null)})]})]}),R.jsx("div",{className:"protocol-modal-body",children:R.jsx(iu,{value:Y.code,onValueChange:ue=>fe({...Y,code:ue}),highlight:ue=>ha.highlight(ue,ha.languages.javascript,"javascript"),padding:20,className:"full-editor"})}),R.jsxs("div",{className:"protocol-modal-footer",children:[R.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>fe(null),children:n.clear||"Cancel"}),R.jsx("button",{className:"btn btn-primary",onClick:()=>{Y.type==="pack"?J(Y.code):Y.type==="unpack"?Se(Y.code):Y.type==="toString"&&C(Y.code),fe(null)},children:n.save})]})]})})]})}Iy.createRoot(document.getElementById("root")).render(R.jsx(Fe.StrictMode,{children:R.jsx(Dw,{})}));
